!function(e,t,r,o,n){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof i[o]&&i[o],a=s.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function d(t,r){if(!a[t]){if(!e[t]){var n="function"==typeof i[o]&&i[o];if(!r&&n)return n(t,!0);if(s)return s(t,!0);if(l&&"string"==typeof t)return l(t);var u=Error("Cannot find module '"+t+"'");throw u.code="MODULE_NOT_FOUND",u}c.resolve=function(r){var o=e[t][1][r];return null!=o?o:r},c.cache={};var p=a[t]=new d.Module(t);e[t][0].call(p.exports,c,p,p.exports,i)}return a[t].exports;function c(e){var t=c.resolve(e);return!1===t?{}:d(t)}}d.isParcelRequire=!0,d.Module=function(e){this.id=e,this.bundle=d,this.exports={}},d.modules=e,d.cache=a,d.parent=s,d.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(d,"root",{get:function(){return i[o]}}),i[o]=d;for(var u=0;u<t.length;u++)d(t[u]);if(r){var p=d(r);"object"==typeof exports&&"undefined"!=typeof module?module.exports=p:"function"==typeof define&&define.amd&&define(function(){return p})}}({bVWFe:[function(e,t,r,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"drawQueue",()=>d);var i=e("./QueueVis.js"),s=e("./StackVis.js"),a=e("./ColorCode.js"),l=e("./Graph.js");function d(e){s.drawLabel("Queue",1,0),i.drawArrowByIndex(0,1),i.drawQueue(e,8,1,1),i.drawArrowByIndex(9,1)}class u extends l.DirectedGraph{constructor(){super(),this.S=new Set,this.queue=[]}next_node(){return 0==this.queue.length?null:this.queue.shift()}get_adjacent_nodes(e){let t=[];for(let r of this.E.get_edges())if(0!=r.weight&&this.V.get(r.from)==e){let e=this.V.get(r.to);t.includes(e)||t.push(e)}return t.sort((e,t)=>e.label.localeCompare(t.label)),t}onestep(e=!0){if(0==this.queue.size)return;let t=this.next_node();if(null!=t){for(let e of(t.order=this.S.size,this.S.add(t),this.get_adjacent_nodes(t)))this.S.has(e)||this.queue.includes(e)||this.queue.push(e);e&&this.refresh()}}bfs(){for(;this.queue.length>0;)this.onestep(!1);this.refresh()}initialize(){this.S.clear(),this.V.nodes.forEach(function(e){e.order=null});let e=$("#start").val(),t=this.V.get(e||0);this.queue=[],t&&this.queue.push(t)}setup(){super.setup(),this.reset()}start_node_refresh(){if(this.V.get_size()>0){let e=$("#start").val();$("#start").empty();for(let e=0;e<this.V.get_size();e++){let t=this.V.get(e);$("#start").append($("<option>").html(t.label).val(e))}$("#start").val(e||0)}}set_color(){this.V.nodes.forEach((function(e){this.S.has(e)?e.color=a.red:this.queue.includes(e)?e.color=a.yellow:e==this.V.get($("#start").val())?e.color=a.blue:e.color=a.white}).bind(this))}draw_search_order(){for(let e of this.V.get_nodes())this.S.has(e)&&(fill.apply(null,a.red),text(e.order,e.x,e.y-2*this.V.node_r))}draw(){this.set_color(),super.draw(),this.draw_search_order(),d(this.queue.map(e=>e.label))}refresh(){this.start_node_refresh(),super.refresh()}reset(){this.initialize(),this.refresh()}graph_select(){super.graph_select(),this.reset()}}let p=new u;window.setup=p.setup.bind(p),window.draw=p.draw.bind(p),window.mouseMoved=p.mouseMoved.bind(p),window.mouseReleased=p.mouseReleased.bind(p),window.matrix_change=p.matrix_change.bind(p),$(document).ready(function(){$("#add").click(()=>p.change_mode()),$("#search").click(()=>p.onestep()),$("#goal").click(()=>p.bfs()),$("#reset").click(()=>p.reset()),$("#start").change(()=>p.reset()),$("#graph-select").change(()=>p.graph_select())})},{"./ColorCode.js":"fgi4l","./Graph.js":"fmzMd","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3","./QueueVis.js":"bu2Gb","./StackVis.js":"dAPiW"}],fgi4l:[function(e,t,r,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function i(e){return console.assert(0<=e&&e<=255,"Scale error"),[e,e,e]}function s(e,t,r){console.assert(0<=e&&e<=360,"Scale error"),console.assert(0<=t&&t<=100,"Scale error"),console.assert(0<=r&&r<=100,"Scale error");var o,n=function(e){return 0|Math.round(255*e)},i=t/100,s=r/100;if(0===t){var a=n(s);return[a,a,a]}var l=e/60,d=0|Math.floor(l),u=l-d,p=s*(1-i),c=s*(1-i*u),h=s*(1-i*(1-u));switch(d){case 0:o=[s,h,p];break;case 1:o=[c,s,p];break;case 2:o=[p,s,h];break;case 3:o=[p,c,s];break;case 4:o=[h,p,s];break;default:o=[s,p,c]}return[n(o[0]),n(o[1]),n(o[2])]}n.defineInteropFlag(r),n.export(r,"grayScale",()=>i),n.export(r,"hsv",()=>s),n.export(r,"black",()=>a),n.export(r,"dark",()=>l),n.export(r,"gray",()=>d),n.export(r,"lightGray",()=>u),n.export(r,"white",()=>p),n.export(r,"red",()=>c),n.export(r,"yellow",()=>h),n.export(r,"blue",()=>f),n.export(r,"lightBlue",()=>g),n.export(r,"orange",()=>x);var a=i(0),l=i(30),d=i(120),u=i(180),p=i(255),c=s(18,80,100),h=s(57,80,100),f=s(200,80,100),g=s(200,20,100),x=s(40,80,100)},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],jBTt3:[function(e,t,r,o){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,t){return Object.keys(e).forEach(function(r){"default"===r||"__esModule"===r||Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})}),t},r.export=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:r})}},{}],fmzMd:[function(e,t,r,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Graph",()=>d),n.export(r,"DirectedGraph",()=>u),n.export(r,"UndirectedGraph",()=>p);var i=e("./ColorCode.js"),s=e("./DrawUtil.js");class a{constructor(){this.node_r=25,this.nodes=[]}draw_node(e){drawingContext.setLineDash([]);let t=2*this.node_r;strokeWeight(2),stroke.apply(null,i.black),fill.apply(null,e.color),ellipse(e.x,e.y,t,t),textAlign(CENTER,CENTER),fill(0),textSize(24),text(e.label,e.x,e.y)}make(e,t,r,o=i.white){return{label:e,x:t,y:r,color:o}}add(...e){let t=this.make.apply(this,e);this.nodes.push(t)}modify(e,t){this.nodes=this.nodes.map(r=>r==e?t:r)}get(e){return this.nodes[e]}get_index(e){return this.nodes.findIndex(t=>t.label==e)}get_node_from_canvas(e,t){return this.nodes.find(r=>(0,s.calc_dist)(e,t,r.x,r.y)<=this.node_r)}get_nodes(){return this.nodes}get_labels(){return this.nodes.map(e=>e.label)}get_size(){return this.nodes.length}draw(){this.nodes.forEach(this.draw_node,this)}}class l{constructor(e,t){this.V=e,this.edges=[],this.directed=t}draw_arrow_head(e,t,r,o,n){strokeWeight(2),fill.apply(null,n),stroke.apply(null,n);let[i,a]=(0,s.calc_edge_point)(r,o,e,t,r,o,10),[l,d]=(0,s.rotation)(r,o,i,a,Math.PI/8),[u,p]=(0,s.rotation)(r,o,i,a,-Math.PI/8);triangle(r,o,l,d,u,p)}draw_arrow(e,t,r,o,n){strokeWeight(2),fill.apply(null,n),stroke.apply(null,n),line(e,t,r,o),this.directed&&this.draw_arrow_head(e,t,r,o,n)}draw_curve_arrow(e,t,r,o,n,i,s){strokeWeight(2),noFill(),stroke.apply(null,s),bezier(e,t,n,i,n,i,r,o),this.draw_arrow_head(n,i,r,o,s)}draw_label(e,t,r){textAlign(CENTER,CENTER),fill(0),stroke.apply(null,i.white),strokeWeight(5),textSize(24),text(e,t,r)}draw_edge(e){if(0==e.weight)return;drawingContext.setLineDash(e.dashed?[5]:[]);let[t,r]=[this.V.get(e.from),this.V.get(e.to)],[o,n]=[t.x,t.y],[i,a]=[r.x,r.y],[l,d]=[(o+i)/2,(n+a)/2],u=1.4*this.V.node_r,[p,c]=(0,s.calc_edge_point)(o,n,i,a,o,n,u),[h,f]=(0,s.calc_edge_point)(i,a,o,n,i,a,u),g=this.get(e.to,e.from);if(this.directed&&g){let t=[i-o,a-n],r=Math.sqrt(t[0]*t[0]+t[1]*t[1]),s=[t[0]/r,t[1]/r],g=[-s[1]*u,s[0]*u],[x,m]=[l+g[0],d+g[1]],[v,_]=[p+.25*g[0],c+.25*g[1]],[E,w]=[h+.25*g[0],f+.25*g[1]];this.draw_curve_arrow(v,_,E,w,x,m,e.color),this.draw_label(e.weight,x,m)}else this.draw_arrow(p,c,h,f,e.color),this.draw_label(e.weight,l,d)}get0(e,t){return"number"==typeof e?this.get_edges().find(r=>r.from==e&&r.to==t):this.get_edges().find(r=>this.V.get(r.from)==e&&this.V.get(r.to)==t)}get(e,t){return this.directed?this.get0(e,t):this.get0(e,t)||this.get0(t,e)}get_edges(){return this.edges.filter(e=>0!=e.weight)}draw(){this.edges.forEach(this.draw_edge,this)}make(e,t,r){return{from:this.V.get_index(e),to:this.V.get_index(t),weight:r,color:i.black,dashed:!1}}add(...e){let t=this.make.apply(this,e);this.edges.push(t)}modify(e,t,r){let o=(e,t)=>this.V.get(e)==t;this.edges=this.edges.map(n=>o(n.from,e)&&o(n.to,t)?r:n)}get_html(e,t){if(e==t)return"<td>0</td>";if(this.directed||e<t){let r=this.get(e,t);return'<td><input class="alg-input" type="number" onchange="matrix_change('+String(e)+","+String(t)+',this.value)" type="text" value="'+String(r?r.weight:0)+'"></td>'}{let r=this.get(t,e);return"<td>"+String(r?r.weight:0)+"</td>"}}}class d{static normal_mode=0;static add_mode=1;static edit_mode=2;constructor(e=!0){this.V=new a,this.E=new l(this.V,e),this.mode=d.normal_mode,this.edit_mode=null}graph_reset(){this.V.nodes=[],this.E.edges=[]}matrix_change(e,t,r){let[o,n]=[this.V.get(e),this.V.get(t)],i=this.E.get(e,t),s=parseInt(r);if(i){let e=this.E.make(o.label,n.label,s);this.E.modify(o,n,e)}else this.E.add(o.label,n.label,s);this.refresh()}matrix_refresh(){$("#matrix_tbl").empty().append($("<thead>"),$("<tbody>")),$("#matrix_tbl thead").append(["<tr>",'<td class="gray"></td>',this.V.get_labels().map(e=>'<td class="gray text-center">'+e+"</td>").join(""),"</tr>"].join(""));for(let e=0;e<this.V.get_size();e++){let t=this.V.get(e);$("#matrix_tbl tbody").append(["<tr>",'<td class="gray">'+t.label+"</td>",Array.from(Array(this.V.get_size())).map((function(t,r){return this.E.get_html(e,r)}).bind(this)).join(""),"</tr>"].join(""))}}debug_output(){console.log("----");let e=[],t=[];for(let t of this.V.get_nodes())e.push("["+['"'+t.label+'"',parseInt(t.x),parseInt(t.y)].join(", ")+"]");for(let e of this.E.get_edges()){let r=this.V.get(e.from),o=this.V.get(e.to);t.push("["+['"'+r.label+'"','"'+o.label+'"',e.weight].join(", ")+"]")}console.log(e.join(",\n")),console.log(t.join(",\n"))}refresh(){this.matrix_refresh(),redraw()}change_mode(e=d.add_mode){e==d.add_mode&&""==$("#node_label").val()?alert("エラー: 頂点名が空です"):(this.mode=e,this.refresh())}draw(){if(background(this.mode==d.add_mode||this.mode==d.edit_mode?i.gray:i.lightGray),this.V.draw(),this.E.draw(),this.mode==d.add_mode||this.mode==d.edit_mode){strokeWeight(2),stroke.apply(null,i.black),drawingContext.setLineDash([10,10]),line(mouseX,0,mouseX,1e3),line(0,mouseY,1e3,mouseY);let e=this.mode==d.add_mode?$("#node_label").val():this.editing_node.label;this.V.draw_node(this.V.make(e,mouseX,mouseY,i.orange))}}setup(){createCanvas(1e3,1e3).parent("canvas-hole"),noLoop()}mouseMoved(){(this.mode==d.add_mode||this.mode==d.edit_mode)&&redraw()}mouseReleased(){if(this.mode==d.add_mode){let e=$("#node_label").val();this.V.add(e,mouseX,mouseY),$("#node_label").val(""),this.change_mode(d.normal_mode)}else if(this.mode==d.edit_mode)this.editing_node.x=mouseX,this.editing_node.y=mouseY,this.editing_node=null,this.change_mode(d.normal_mode);else{let e=this.V.get_node_from_canvas(mouseX,mouseY);e&&(this.editing_node=e,this.change_mode(d.edit_mode))}}}class u extends d{constructor(){super(!0)}load_sample(e){this.graph_reset(),1==e?([["A",97,493],["B",258,351],["C",334,593],["D",615,354],["E",521,572],["F",802,503]].map(e=>this.V.add.apply(this.V,e)),[["A","B",3],["A","C",5],["B","C",4],["B","D",13],["C","E",4],["C","D",9],["D","F",2],["E","D",7],["E","F",8]].map(e=>this.E.add.apply(this.E,e))):2==e?([["A",110,500],["B",240,340],["C",240,650],["D",480,340],["E",480,500],["F",480,650],["G",710,340],["H",710,650],["I",880,500]].map(e=>this.V.add.apply(this.V,e)),[["A","B",4],["A","C",8],["B","C",11],["B","D",8],["C","E",7],["D","E",2],["D","H",4],["D","G",7],["E","F",6],["C","F",1],["F","H",2],["G","H",14],["G","I",9],["H","I",10]].map(e=>this.E.add.apply(this.E,e))):3==e?([["A",480,290],["B",212,450],["C",480,450],["D",777,450],["E",148,620],["F",265,620],["G",411,620],["H",559,620],["I",727,620],["J",850,620],["K",315,780],["L",445,780],["M",523,780],["N",635,780],["O",850,780]].map(e=>this.V.add.apply(this.V,e)),[["A","B",1],["A","C",1],["A","D",1],["B","E",1],["B","F",1],["C","G",1],["C","H",1],["D","I",1],["D","J",1],["G","K",1],["G","L",1],["H","M",1],["H","N",1],["J","O",1]].map(e=>this.E.add.apply(this.E,e))):4==e&&([["00",150,275],["10",150,425],["20",150,575],["30",150,725],["40",150,875],["01",300,275],["11",300,425],["21",300,575],["31",300,725],["41",300,875],["02",450,275],["12",450,425],["22",450,575],["32",450,725],["42",450,875],["03",600,275],["13",600,425],["23",600,575],["33",600,725],["43",600,875],["04",750,275],["14",750,425],["24",750,575],["34",750,725],["44",750,875]].map(e=>this.V.add.apply(this.V,e)),[["00","01",1],["01","00",1],["00","10",1],["10","00",1],["00","10",1],["10","00",1],["01","02",1],["02","01",1],["02","12",1],["12","02",1],["02","12",1],["12","02",1],["04","14",1],["14","04",1],["04","14",1],["14","04",1],["10","20",1],["20","10",1],["10","20",1],["20","10",1],["12","13",1],["13","12",1],["12","22",1],["22","12",1],["12","22",1],["22","12",1],["13","14",1],["14","13",1],["14","24",1],["24","14",1],["14","24",1],["24","14",1],["20","30",1],["30","20",1],["20","30",1],["30","20",1],["22","32",1],["32","22",1],["22","32",1],["32","22",1],["24","34",1],["34","24",1],["24","34",1],["34","24",1],["30","40",1],["40","30",1],["30","40",1],["40","30",1],["32","33",1],["33","32",1],["32","42",1],["42","32",1],["32","42",1],["42","32",1],["33","34",1],["34","33",1],["33","43",1],["43","33",1],["33","43",1],["43","33",1],["34","44",1],["44","34",1],["34","44",1],["44","34",1],["40","41",1],["41","40",1],["41","42",1],["42","41",1],["42","43",1],["43","42",1],["43","44",1],["44","43",1]].map(e=>this.E.add.apply(this.E,e))),this.refresh()}graph_select(){let e=parseInt($("#graph-select").val());this.load_sample(e)}}class p extends d{constructor(){super(!1)}is_connected(){let e=this,t=new Set;return!function r(o){t.add(o);for(let n=0;n<e.V.get_size();n++)!t.has(n)&&e.E.get(o,n)&&r(n)}(0),this.V.get_size()==t.size}load_sample(e){this.graph_reset(),1==e?([["0",669,458],["1",309,508],["2",464,227],["3",512,508],["4",162,361],["5",829,338],["6",361,387],["7",536,388]].map(e=>this.V.add.apply(this.V,e)),[["0","3",5],["0","5",6],["0","7",3],["1","3",8],["1","6",3],["1","4",4],["2","4",9],["2","5",10],["2","7",5],["3","7",6],["4","6",2],["6","7",7]].map(e=>this.E.add.apply(this.E,e))):2==e?([["A",110,340],["B",240,180],["C",240,490],["D",480,180],["E",480,340],["F",480,490],["G",710,180],["H",710,490],["I",880,340]].map(e=>this.V.add.apply(this.V,e)),[["A","B",4],["A","C",8],["B","C",11],["B","D",8],["C","E",7],["D","E",2],["D","H",4],["D","G",7],["E","F",6],["C","F",1],["F","H",2],["G","H",14],["G","I",9],["H","I",10]].map(e=>this.E.add.apply(this.E,e))):3==e?([["A",480,90],["B",212,250],["C",480,250],["D",777,250],["E",148,420],["F",265,420],["G",411,420],["H",559,420],["I",727,420],["J",850,420],["K",315,580],["L",445,580],["M",523,580],["N",635,580],["O",850,580]].map(e=>this.V.add.apply(this.V,e)),[["A","B",1],["A","C",1],["A","D",1],["B","E",1],["B","F",1],["C","G",1],["C","H",1],["D","I",1],["D","J",1],["G","K",1],["G","L",1],["H","M",1],["H","N",1],["J","O",1]].map(e=>this.E.add.apply(this.E,e))):4==e&&([["00",150,275],["10",150,425],["20",150,575],["30",150,725],["40",150,875],["01",300,275],["11",300,425],["21",300,575],["31",300,725],["41",300,875],["02",450,275],["12",450,425],["22",450,575],["32",450,725],["42",450,875],["03",600,275],["13",600,425],["23",600,575],["33",600,725],["43",600,875],["04",750,275],["14",750,425],["24",750,575],["34",750,725],["44",750,875]].map(e=>this.V.add.apply(this.V,e)),[["00","01",1],["00","10",1],["00","10",1],["01","02",1],["02","12",1],["02","12",1],["04","14",1],["04","14",1],["10","20",1],["10","20",1],["12","13",1],["12","22",1],["12","22",1],["13","14",1],["14","24",1],["14","24",1],["20","30",1],["20","30",1],["22","32",1],["22","32",1],["24","34",1],["24","34",1],["30","40",1],["30","40",1],["32","33",1],["32","42",1],["32","42",1],["33","34",1],["33","43",1],["33","43",1],["34","44",1],["34","44",1],["40","41",1],["41","42",1],["42","43",1],["43","44",1]].map(e=>this.E.add.apply(this.E,e))),this.refresh()}graph_select(){let e=parseInt($("#graph-select").val());this.load_sample(e)}}},{"./ColorCode.js":"fgi4l","./DrawUtil.js":"d335M","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],d335M:[function(e,t,r,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"strokeWeight",()=>p),n.export(r,"textSize",()=>c),n.export(r,"nodeRadius",()=>h),n.export(r,"drawNode",()=>a),n.export(r,"epsilon",()=>f),n.export(r,"calc_dist",()=>l),n.export(r,"calc_edge_point",()=>d),n.export(r,"rotation",()=>u);var i=e("./P5.js"),s=e("./ColorCode.js");function a(e,t,r){strokeWeight(2),i.fillColor(s.white),ellipse(e,t,50,50),textAlign(CENTER,CENTER),textSize(24),i.fillColor(s.black),text(r,e,t)}var l=function(e,t,r,o){return Math.sqrt((e-r)**2+(t-o)**2)},d=function(e,t,r,o,n,i,s){e==r&&(e+=f);let a=(o-t)/(r-e),d=s/Math.sqrt(1+a*a),[u,p]=[e+d,t+a*d],[c,h]=[e-d,t-a*d],[g,x]=[(e+r)/2,(t+o)/2];return l(u,p,g,x)<l(c,h,g,x)?[u,p]:[c,h]},u=function(e,t,r,o,n){return[(r-e)*Math.cos(n)-(o-t)*Math.sin(n)+e,(r-e)*Math.sin(n)+(o-t)*Math.cos(n)+t]},p=2,c=24,h=25,f=1e-5},{"./P5.js":"kRQjY","./ColorCode.js":"fgi4l","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],kRQjY:[function(e,t,r,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function i(e){fill.apply(null,e)}function s(e){stroke.apply(null,e)}n.defineInteropFlag(r),n.export(r,"fillColor",()=>i),n.export(r,"strokeColor",()=>s)},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],bu2Gb:[function(e,t,r,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"padding",()=>A),n.export(r,"boxSize",()=>z),n.export(r,"halfBoxSize",()=>D),n.export(r,"quarterBoxSize",()=>O),n.export(r,"cellSize",()=>q),n.export(r,"state",()=>c),n.export(r,"drawCodeLabel",()=>h),n.export(r,"drawArrow",()=>f),n.export(r,"drawArrowByIndex",()=>g),n.export(r,"drawQueue",()=>x),n.export(r,"loadProgram",()=>m),n.export(r,"runQueue",()=>v),n.export(r,"getQueueState",()=>_),n.export(r,"getMaxQueueLength",()=>E),n.export(r,"setDisable",()=>w),n.export(r,"refreshButtons",()=>j),n.export(r,"isCode",()=>S),n.export(r,"draw",()=>b),n.export(r,"setHeight",()=>y),n.export(r,"initializeQueue",()=>C),n.export(r,"setup",()=>k),n.export(r,"createCanvas",()=>B),n.export(r,"run",()=>V),n.export(r,"prev",()=>M),n.export(r,"next",()=>I);var i=e("./P5.js"),s=e("./DrawUtil.js"),a=e("./StackVis.js"),l=e("./ColorCode.js"),d=e("@rescript/core/src/Core__Int.js"),u=e("@rescript/core/src/Core__Array.js"),p=e("@rescript/core/src/Core__Option.js"),c={index:{contents:void 0}};function h(e,t){var r=e[t];if(void 0!==r)return"object"!=typeof r?"Dequeue"===r?a.drawLabel("dequeue()",2,0):void 0:"EnqueueShow"===r.TAG?a.drawLabel("enqueue("+String(r._0)+")",2,0):void 0}function f(e,t){var r=[e,t-a.quarterBoxSize|0],o=e+a.halfBoxSize|0,n=t-a.quarterBoxSize|0,d=e+a.halfBoxSize|0,u=t-a.halfBoxSize|0,p=e+a.boxSize|0,c=e+a.halfBoxSize|0,h=t+a.halfBoxSize|0,f=e+a.halfBoxSize|0,g=t+a.quarterBoxSize|0,x=t+a.quarterBoxSize|0;strokeWeight(s.strokeWeight),i.strokeColor(l.black),i.fillColor(l.white),beginShape(),[r,[o,n],[d,u],[p,t],[c,h],[f,g],[e,x],r].forEach(function(e){vertex(e[0],e[1])}),endShape(CLOSE)}function g(e,t){var r=a.padding+a.halfBoxSize|0;f(a.padding+Math.imul(e,a.cellSize)|0,r+Math.imul(t,a.cellSize)|0)}function x(e,t,r,o){var n=void 0!==r?r:2;e.toReversed().forEach(function(e,t){a.drawBoxByIndex(e,t+n|0,1)});var d=(a.padding+Math.imul(n,a.cellSize)|0)+(a.cellSize/2|0)|0,u=a.padding+Math.imul(void 0!==o?o:1,a.cellSize)|0,p=(d-(a.cellSize/2|0)|0)-a.padding|0,c=p+Math.imul(t,a.cellSize)|0,h=u-a.padding|0,f=(u+a.cellSize|0)-a.padding|0;strokeWeight(s.strokeWeight<<1),i.strokeColor(l.black),line(p,h,c,h),line(p,f,c,f)}function m(){var e=$("#program").val(),t=RegExp("enqueue\\((\\d+)\\)"),r=RegExp("dequeue\\(\\)"),o=[];return e.split("\n").forEach(function(e){var n=t.exec(e);if(null==n){if(!r.test(e))return;o.push("Dequeue"),o.push("DequeuePause");return}var i=n.slice(1)[0],s=p.getExn(d.fromString(i,void 0),void 0);o.push({TAG:"EnqueueShow",_0:s}),o.push({TAG:"Enqueue",_0:s})}),o}function v(e,t){for(var r=[],o=0;;){var n,i,s=n,a=o;if(t<a)return[r,s];var l=e[a];"object"!=typeof l?i="Dequeue"===l?r.shift():void 0:"EnqueueShow"===l.TAG?i=l._0:(r.push(l._0),i=void 0),n=i,o=a+1|0}}function _(e,t){return 0<=t&&t<e.length?v(e,t):[[],void 0]}function E(e){return u.reduce(u.fromInitializer(e.length,function(t){return _(e,t)[0].length}),0,function(e,t){return e<t?t:e})}var w=(e,t)=>$(e).prop("disabled",t);function j(){var e=c.index.contents;if(void 0!==e){var t=m().length;w("#prev",-1===e),w("#next",(e+1|0)===t)}}function S(e,t,r){var o=e[t];return void 0!==o&&("object"!=typeof o?"Dequeue"===o&&"dequeue"===r:"EnqueueShow"===o.TAG&&"enqueue"===r)}function b(){background(200);var e=c.index.contents;if(void 0!==e){var t=m(),r=E(t),o=_(t,e),n=o[1];h(t,e),x(o[0].map(function(e){return String(e)}),r,void 0,void 0),S(t,e,"enqueue")?(g(1,1),a.drawBoxByIndex(String(p.getExn(n,void 0)),0,1)):S(t,e,"dequeue")&&(g(r+2|0,1),a.drawBoxByIndex(String(p.getExn(n,void 0)),r+3|0,1)),j()}}var y=e=>$(e).height($(e)[0].scrollHeight);function C(){var e="#program";$(e).val("enqueue(4)\nenqueue(2)\nenqueue(9)\ndequeue()\nenqueue(1)\ndequeue()\nenqueue(9)\nenqueue(7)\nenqueue(6)"),y(e)}function k(){createCanvas(0,0).parent("canvas-hole"),w("#prev",!0),w("#next",!0),C()}function B(){var e=Math.imul(a.cellSize,3);createCanvas(Math.imul(a.cellSize,E(m())+4|0),e).parent("canvas-hole"),noLoop()}function V(){B(),c.index.contents=-1}function M(){var e=c.index.contents;if(void 0!==e&&0<=e){c.index.contents=e-1|0;return}}function I(){var e=c.index.contents;if(void 0!==e&&e<(m().length-1|0)){c.index.contents=e+1|0;return}}$(document).ready(function(){[["#run",V],["#prev",M],["#next",I]].forEach(function(e){var t=e[1];$(e[0]).on("click",function(){t(),redraw()})})}),window.setup=k,window.draw=b;var A=a.padding,z=a.boxSize,D=a.halfBoxSize,O=a.quarterBoxSize,q=a.cellSize},{"./P5.js":"kRQjY","./DrawUtil.js":"d335M","./StackVis.js":"dAPiW","./ColorCode.js":"fgi4l","@rescript/core/src/Core__Int.js":"da5Bi","@rescript/core/src/Core__Array.js":"kmH7i","@rescript/core/src/Core__Option.js":"4Dake","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],dAPiW:[function(e,t,r,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"padding",()=>F),n.export(r,"boxSize",()=>p),n.export(r,"halfBoxSize",()=>c),n.export(r,"quarterBoxSize",()=>h),n.export(r,"cellSize",()=>f),n.export(r,"state",()=>g),n.export(r,"drawBox",()=>x),n.export(r,"drawBoxByIndex",()=>m),n.export(r,"drawLabel",()=>v),n.export(r,"drawCodeLabel",()=>_),n.export(r,"drawArrow",()=>E),n.export(r,"drawArrowByIndex",()=>w),n.export(r,"drawStack",()=>j),n.export(r,"loadProgram",()=>S),n.export(r,"runStack",()=>b),n.export(r,"getStackState",()=>y),n.export(r,"getMaxStackLength",()=>C),n.export(r,"setDisable",()=>k),n.export(r,"refreshButtons",()=>B),n.export(r,"isCode",()=>V),n.export(r,"draw",()=>M),n.export(r,"setHeight",()=>I),n.export(r,"initializeStack",()=>A),n.export(r,"setup",()=>z),n.export(r,"createCanvas",()=>D),n.export(r,"run",()=>O),n.export(r,"prev",()=>q),n.export(r,"next",()=>T);var i=e("./P5.js"),s=e("./DrawUtil.js"),a=e("./ColorCode.js"),l=e("@rescript/core/src/Core__Int.js"),d=e("@rescript/core/src/Core__Array.js"),u=e("@rescript/core/src/Core__Option.js"),p=(Math.sqrt(2)*s.nodeRadius|0)<<1,c=p/2|0,h=p/4|0,f=p+24|0,g={index:{contents:void 0}};function x(e,t,r){strokeWeight(s.strokeWeight),i.strokeColor(a.black),i.fillColor(a.lightBlue),rect(e-(p/2|0)|0,t-(p/2|0)|0,p,p),s.drawNode(e,t,r)}function m(e,t,r){x((12+(p/2|0)|0)+Math.imul(t,f)|0,(12+(p/2|0)|0)+Math.imul(r,f)|0,e)}function v(e,t,r){var o=Math.imul(t,f)+12|0,n=Math.imul(r,f)+(f/2|0)|0;textSize(40),strokeWeight(3),i.strokeColor(a.black),i.fillColor(a.red),textAlign(LEFT,CENTER),text(e,o,n)}function _(e,t){var r=e[t];if(void 0!==r)return"object"!=typeof r?"Pop"===r?v("pop()",2,0):void 0:"PushShow"===r.TAG?v("push("+String(r._0)+")",2,0):void 0}function E(e,t,r){var o=function(e){strokeWeight(s.strokeWeight),i.strokeColor(a.black),i.fillColor(a.white),beginShape(),e.forEach(function(e){vertex(e[0],e[1])}),endShape(CLOSE)};if(void 0!==r&&r){var n=[e,t];return o([n,[e+c|0,t-c|0],[e+c|0,t-h|0],[e+p|0,t-h|0],[e+p|0,t+h|0],[e+c|0,t+h|0],[e+c|0,t+c|0],n])}var l=[e,t-h|0];o([l,[e+c|0,t-h|0],[e+c|0,t-c|0],[e+p|0,t],[e+c|0,t+c|0],[e+c|0,t+h|0],[e,t+h|0],l])}function w(e,t,r){E(12+Math.imul(e,f)|0,(12+c|0)+Math.imul(t,f)|0,void 0!==r&&r)}function j(e,t,r,o){var n=void 0!==r?r:2,l=void 0!==o?o:1;e.forEach(function(e,r){m(e,((t-r|0)-1|0)+n|0,l)});var d=(12+Math.imul(n,f)|0)+(f/2|0)|0,u=12+Math.imul(l,f)|0,p=(d-(f/2|0)|0)-12|0,c=p+Math.imul(t,f)|0,h=u-12|0,g=(u+f|0)-12|0;strokeWeight(s.strokeWeight<<1),i.strokeColor(a.black),line(p,h,c,h),line(p,g,c,g),line(c,h,c,g)}function S(){var e=$("#program").val(),t=RegExp("push\\((\\d+)\\)"),r=RegExp("pop\\(\\)"),o=[];return e.split("\n").forEach(function(e){var n=t.exec(e);if(null==n){if(!r.test(e))return;o.push("Pop"),o.push("PopPause");return}var i=n.slice(1)[0],s=u.getExn(l.fromString(i,void 0),void 0);o.push({TAG:"PushShow",_0:s}),o.push({TAG:"Push",_0:s})}),o}function b(e,t){for(var r=[],o=0;;){var n,i,s=n,a=o;if(t<a)return[r,s];var l=e[a];"object"!=typeof l?i="Pop"===l?r.pop():void 0:"PushShow"===l.TAG?i=l._0:(r.push(l._0),i=void 0),n=i,o=a+1|0}}function y(e,t){return 0<=t&&t<e.length?b(e,t):[[],void 0]}function C(e){return d.reduce(d.fromInitializer(e.length,function(t){return y(e,t)[0].length}),0,function(e,t){return e<t?t:e})}var k=(e,t)=>$(e).prop("disabled",t);function B(){var e=g.index.contents;if(void 0!==e){var t=S().length;k("#prev",-1===e),k("#next",(e+1|0)===t)}}function V(e,t,r){var o=e[t];return void 0!==o&&("object"!=typeof o?"Pop"===o&&"pop"===r:"PushShow"===o.TAG&&"push"===r)}function M(){background(200);var e=g.index.contents;if(void 0!==e){var t=S(),r=C(t),o=y(t,e),n=o[1];_(t,e),j(o[0].map(function(e){return String(e)}),r,2,1),V(t,e,"push")?(w(1,1,void 0),m(String(u.getExn(n,void 0)),0,1)):V(t,e,"pop")&&(w(1,1,!0),m(String(u.getExn(n,void 0)),0,1)),B()}}var I=e=>$(e).height($(e)[0].scrollHeight);function A(){var e="#program";$(e).val("push(4)\npush(2)\npush(9)\npop()\npush(1)\npop()\npush(9)\npush(7)\npush(6)"),I(e)}function z(){createCanvas(0,0).parent("canvas-hole"),k("#prev",!0),k("#next",!0),A()}function D(){var e=Math.imul(f,3);createCanvas(Math.imul(f,C(S())+4|0),e).parent("canvas-hole"),noLoop()}function O(){D(),g.index.contents=-1}function q(){var e=g.index.contents;if(void 0!==e&&0<=e){g.index.contents=e-1|0;return}}function T(){var e=g.index.contents;if(void 0!==e&&e<(S().length-1|0)){g.index.contents=e+1|0;return}}$(document).ready(function(){[["#run",O],["#prev",q],["#next",T]].forEach(function(e){var t=e[1];$(e[0]).on("click",function(){t(),redraw()})})}),window.setup=z,window.draw=M;var F=12},{"./P5.js":"kRQjY","./DrawUtil.js":"d335M","./ColorCode.js":"fgi4l","@rescript/core/src/Core__Int.js":"da5Bi","@rescript/core/src/Core__Array.js":"kmH7i","@rescript/core/src/Core__Option.js":"4Dake","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],da5Bi:[function(e,t,r,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Constants",()=>p),n.export(r,"fromString",()=>s),n.export(r,"range",()=>a),n.export(r,"rangeWithOptions",()=>l),n.export(r,"clamp",()=>d),n.export(r,"Bitwise",()=>u);var i=e("./Core__Array.js");function s(e,t){var r=void 0!==t?parseInt(e,t):parseInt(e);if(!isNaN(r)&&!(r>0x7fffffff)&&!(r<-0x80000000))return 0|r}function a(e,t,r){var o,n,s=void 0!==r?r:{},a=e>t,l=s.step;if(void 0!==l){if(0!==l)o=l;else{if(e!==t)throw RangeError("Incorrect range arguments");o=l}}else o=a?-1:1;if(a===o>=0)n=0;else if(0===o)n=+(!0===s.inclusive);else{var d,u=a?e-t|0:t-e|0;n=0|Math.ceil((!0===s.inclusive?u+1|0:u)/((d=o)>=0?d:0|-d))}return i.fromInitializer(n,function(t){return e+Math.imul(t,o)|0})}function l(e,t,r){return a(e,t,r)}function d(e,t,r){var o=void 0!==t&&t<r?t:r;return void 0!==e&&e>o?e:o}var u={lnot:function(e){return -1^e}},p={minValue:-0x80000000,maxValue:0x7fffffff}},{"./Core__Array.js":"kmH7i","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],kmH7i:[function(e,t,r,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"make",()=>s),n.export(r,"fromInitializer",()=>a),n.export(r,"equal",()=>l),n.export(r,"compare",()=>d),n.export(r,"indexOfOpt",()=>u),n.export(r,"lastIndexOfOpt",()=>p),n.export(r,"reduce",()=>c),n.export(r,"reduceWithIndex",()=>h),n.export(r,"reduceRight",()=>f),n.export(r,"reduceRightWithIndex",()=>g),n.export(r,"findIndexOpt",()=>x),n.export(r,"filterMap",()=>_),n.export(r,"keepSome",()=>E),n.export(r,"toShuffled",()=>v),n.export(r,"shuffle",()=>m),n.export(r,"findMap",()=>w),n.export(r,"last",()=>j);var i=e("rescript/lib/es6/caml_option.js");function s(e,t){if(e<=0)return[];var r=Array(e);return r.fill(t),r}function a(e,t){if(e<=0)return[];for(var r=Array(e),o=0;o<e;++o)r[o]=t(o);return r}function l(e,t,r){var o=e.length;if(o!==t.length)return!1;for(var n=0;;){var i=n;if(i===o)return!0;if(!r(e[i],t[i]))return!1;n=i+1|0}}function d(e,t,r){var o=e.length,n=t.length;if(o<n)return -1;if(o>n)return 1;for(var i=0;;){var s=i;if(s===o)return 0;var a=r(e[s],t[s]);if(0!==a)return a;i=s+1|0}}function u(e,t){var r=e.indexOf(t);if(-1!==r)return r}function p(e,t){var r=e.lastIndexOf(t);if(-1!==r)return r}function c(e,t,r){return e.reduce(r,t)}function h(e,t,r){return e.reduce(r,t)}function f(e,t,r){return e.reduceRight(r,t)}function g(e,t,r){return e.reduceRight(r,t)}function x(e,t){var r=e.findIndex(t);if(-1!==r)return r}function m(e){for(var t,r=e.length,o=0;o<r;++o)!function(e,t,r){var o=e[t];e[t]=e[r],e[r]=o}(e,o,(0|Math.floor(Math.random()*(r-(t=o)|0)))+t|0)}function v(e){var t=e.slice();return m(t),t}function _(e,t){for(var r=e.length,o=Array(r),n=0,s=0;s<r;++s){var a=t(e[s]);void 0!==a&&(o[n]=i.valFromOption(a),n=n+1|0)}return o.length=n,o}function E(e){return _(e,function(e){return e})}function w(e,t){for(var r=0;;){var o=r;if(o===e.length)return;var n=t(e[o]);if(void 0!==n)return n;r=o+1|0}}function j(e){return e[e.length-1|0]}},{"rescript/lib/es6/caml_option.js":"lBDcT","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],lBDcT:[function(e,t,r,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function i(e){return void 0!==e.BS_PRIVATE_NESTED_SOME_NONE}function s(e){return void 0===e?{BS_PRIVATE_NESTED_SOME_NONE:0}:null!==e&&void 0!==e.BS_PRIVATE_NESTED_SOME_NONE?{BS_PRIVATE_NESTED_SOME_NONE:e.BS_PRIVATE_NESTED_SOME_NONE+1|0}:e}function a(e){if(null!=e)return s(e)}function l(e){if(void 0!==e)return s(e)}function d(e){if(null!==e)return s(e)}function u(e){if(null===e||void 0===e.BS_PRIVATE_NESTED_SOME_NONE)return e;var t=e.BS_PRIVATE_NESTED_SOME_NONE;if(0!==t)return{BS_PRIVATE_NESTED_SOME_NONE:t-1|0}}function p(e){if(void 0!==e)return u(e)}function c(e){return void 0!==e?e.VAL:e}n.defineInteropFlag(r),n.export(r,"nullable_to_opt",()=>a),n.export(r,"undefined_to_opt",()=>l),n.export(r,"null_to_opt",()=>d),n.export(r,"valFromOption",()=>u),n.export(r,"some",()=>s),n.export(r,"isNested",()=>i),n.export(r,"option_get",()=>p),n.export(r,"option_unwrap",()=>c)},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],"4Dake":[function(e,t,r,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"filter",()=>a),n.export(r,"forEach",()=>l),n.export(r,"getExn",()=>d),n.export(r,"mapOr",()=>u),n.export(r,"mapWithDefault",()=>_),n.export(r,"map",()=>p),n.export(r,"flatMap",()=>c),n.export(r,"getOr",()=>h),n.export(r,"getWithDefault",()=>E),n.export(r,"orElse",()=>f),n.export(r,"isSome",()=>g),n.export(r,"isNone",()=>x),n.export(r,"equal",()=>m),n.export(r,"compare",()=>v);var i=e("rescript/lib/es6/caml_option.js"),s=e("./Core__Error.js");function a(e,t){if(void 0!==e&&t(i.valFromOption(e)))return e}function l(e,t){if(void 0!==e)return t(i.valFromOption(e))}function d(e,t){return void 0!==e?i.valFromOption(e):s.panic(void 0!==t?t:"Option.getExn called for None value")}function u(e,t,r){return void 0!==e?r(i.valFromOption(e)):t}function p(e,t){if(void 0!==e)return i.some(t(i.valFromOption(e)))}function c(e,t){if(void 0!==e)return t(i.valFromOption(e))}function h(e,t){return void 0!==e?i.valFromOption(e):t}function f(e,t){return void 0!==e?e:t}function g(e){return void 0!==e}function x(e){return void 0===e}function m(e,t,r){return void 0===e?void 0===t:void 0!==t&&r(i.valFromOption(e),i.valFromOption(t))}function v(e,t,r){return void 0!==e?void 0!==t?r(i.valFromOption(e),i.valFromOption(t)):1:void 0!==t?-1:0}var _=u,E=h},{"rescript/lib/es6/caml_option.js":"lBDcT","./Core__Error.js":"gydnd","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],gydnd:[function(e,t,r,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"$$EvalError",()=>i),n.export(r,"$$RangeError",()=>s),n.export(r,"$$ReferenceError",()=>a),n.export(r,"$$SyntaxError",()=>l),n.export(r,"$$TypeError",()=>d),n.export(r,"$$URIError",()=>u),n.export(r,"panic",()=>p);var i={},s={},a={},l={},d={},u={};function p(e){throw Error("Panic! "+e)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}]},["bVWFe"],"bVWFe","parcelRequire94c2");
//# sourceMappingURL=BFS.js.map
