!function(e,t,r,s,o){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a="function"==typeof i[s]&&i[s],d=a.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function n(t,r){if(!d[t]){if(!e[t]){var o="function"==typeof i[s]&&i[s];if(!r&&o)return o(t,!0);if(a)return a(t,!0);if(l&&"string"==typeof t)return l(t);var h=Error("Cannot find module '"+t+"'");throw h.code="MODULE_NOT_FOUND",h}c.resolve=function(r){var s=e[t][1][r];return null!=s?s:r},c.cache={};var p=d[t]=new n.Module(t);e[t][0].call(p.exports,c,p,p.exports,i)}return d[t].exports;function c(e){var t=c.resolve(e);return!1===t?{}:n(t)}}n.isParcelRequire=!0,n.Module=function(e){this.id=e,this.bundle=n,this.exports={}},n.modules=e,n.cache=d,n.parent=a,n.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(n,"root",{get:function(){return i[s]}}),i[s]=n;for(var h=0;h<t.length;h++)n(t[h]);if(r){var p=n(r);"object"==typeof exports&&"undefined"!=typeof module?module.exports=p:"function"==typeof define&&define.amd&&define(function(){return p})}}({"5Vhrb":[function(e,t,r,s){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"Graph",()=>n),o.export(r,"DirectedGraph",()=>h),o.export(r,"UndirectedGraph",()=>p);var i=e("./color-code.js"),a=e("./draw-util.js");class d{constructor(){this.node_r=25,this.nodes=[]}draw_node(e){drawingContext.setLineDash([]);let t=2*this.node_r;strokeWeight(2),stroke.apply(null,i.color_code.black),fill.apply(null,e.color),ellipse(e.x,e.y,t,t),textAlign(CENTER,CENTER),fill(0),textSize(24),text(e.label,e.x,e.y)}make(e,t,r,s=i.color_code.white){return{label:e,x:t,y:r,color:s}}add(...e){let t=this.make.apply(this,e);this.nodes.push(t)}modify(e,t){this.nodes=this.nodes.map(r=>r==e?t:r)}get(e){return this.nodes[e]}get_index(e){return this.nodes.findIndex(t=>t.label==e)}get_node_from_canvas(e,t){return this.nodes.find(r=>(0,a.calc_dist)(e,t,r.x,r.y)<=this.node_r)}get_nodes(){return this.nodes}get_labels(){return this.nodes.map(e=>e.label)}get_size(){return this.nodes.length}draw(){this.nodes.forEach(this.draw_node,this)}}class l{constructor(e,t){this.V=e,this.edges=[],this.directed=t}draw_arrow_head(e,t,r,s,o){strokeWeight(2),fill.apply(null,o),stroke.apply(null,o);let[i,d]=(0,a.calc_edge_point)(r,s,e,t,r,s,10),[l,n]=(0,a.rotation)(r,s,i,d,Math.PI/8),[h,p]=(0,a.rotation)(r,s,i,d,-Math.PI/8);triangle(r,s,l,n,h,p)}draw_arrow(e,t,r,s,o){strokeWeight(2),fill.apply(null,o),stroke.apply(null,o),line(e,t,r,s),this.directed&&this.draw_arrow_head(e,t,r,s,o)}draw_curve_arrow(e,t,r,s,o,i,a){strokeWeight(2),noFill(),stroke.apply(null,a),bezier(e,t,o,i,o,i,r,s),this.draw_arrow_head(o,i,r,s,a)}draw_label(e,t,r){textAlign(CENTER,CENTER),fill(0),stroke.apply(null,i.color_code.white),strokeWeight(5),textSize(24),text(e,t,r)}draw_edge(e){if(0==e.weight)return;drawingContext.setLineDash(e.dashed?[5]:[]);let[t,r]=[this.V.get(e.from),this.V.get(e.to)],[s,o]=[t.x,t.y],[i,d]=[r.x,r.y],[l,n]=[(s+i)/2,(o+d)/2],h=1.4*this.V.node_r,[p,c]=(0,a.calc_edge_point)(s,o,i,d,s,o,h),[u,g]=(0,a.calc_edge_point)(i,d,s,o,i,d,h),_=this.get(e.to,e.from);if(this.directed&&_){let t=[i-s,d-o],r=Math.sqrt(t[0]*t[0]+t[1]*t[1]),a=[t[0]/r,t[1]/r],_=[-a[1]*h,a[0]*h],[m,f]=[l+_[0],n+_[1]],[y,w]=[p+.25*_[0],c+.25*_[1]],[b,E]=[u+.25*_[0],g+.25*_[1]];this.draw_curve_arrow(y,w,b,E,m,f,e.color),this.draw_label(e.weight,m,f)}else this.draw_arrow(p,c,u,g,e.color),this.draw_label(e.weight,l,n)}get0(e,t){return"number"==typeof e?this.get_edges().find(r=>r.from==e&&r.to==t):this.get_edges().find(r=>this.V.get(r.from)==e&&this.V.get(r.to)==t)}get(e,t){return this.directed?this.get0(e,t):this.get0(e,t)||this.get0(t,e)}get_edges(){return this.edges.filter(e=>0!=e.weight)}draw(){this.edges.forEach(this.draw_edge,this)}make(e,t,r){return{from:this.V.get_index(e),to:this.V.get_index(t),weight:r,color:i.color_code.black,dashed:!1}}add(...e){let t=this.make.apply(this,e);this.edges.push(t)}modify(e,t,r){let s=(e,t)=>this.V.get(e)==t;this.edges=this.edges.map(o=>s(o.from,e)&&s(o.to,t)?r:o)}get_html(e,t){if(e==t)return"<td>0</td>";if(this.directed||e<t){let r=this.get(e,t);return'<td><input class="alg-input" type="number" onchange="matrix_change('+String(e)+","+String(t)+',this.value)" type="text" value="'+String(r?r.weight:0)+'"></td>'}{let r=this.get(t,e);return"<td>"+String(r?r.weight:0)+"</td>"}}}class n{static normal_mode=0;static add_mode=1;static edit_mode=2;constructor(e=!0){this.V=new d,this.E=new l(this.V,e),this.mode=n.normal_mode,this.edit_mode=null}graph_reset(){this.V.nodes=[],this.E.edges=[]}matrix_change(e,t,r){let[s,o]=[this.V.get(e),this.V.get(t)],i=this.E.get(e,t),a=parseInt(r);if(i){let e=this.E.make(s.label,o.label,a);this.E.modify(s,o,e)}else this.E.add(s.label,o.label,a);this.refresh()}matrix_refresh(){$("#matrix_tbl").empty().append($("<thead>"),$("<tbody>")),$("#matrix_tbl thead").append(["<tr>",'<td class="gray"></td>',this.V.get_labels().map(e=>'<td class="gray text-center">'+e+"</td>").join(""),"</tr>"].join(""));for(let e=0;e<this.V.get_size();e++){let t=this.V.get(e);$("#matrix_tbl tbody").append(["<tr>",'<td class="gray">'+t.label+"</td>",Array.from(Array(this.V.get_size())).map((function(t,r){return this.E.get_html(e,r)}).bind(this)).join(""),"</tr>"].join(""))}}debug_output(){console.log("----");let e=[],t=[];for(let t of this.V.get_nodes())e.push("["+['"'+t.label+'"',parseInt(t.x),parseInt(t.y)].join(", ")+"]");for(let e of this.E.get_edges()){let r=this.V.get(e.from),s=this.V.get(e.to);t.push("["+['"'+r.label+'"','"'+s.label+'"',e.weight].join(", ")+"]")}console.log(e.join(",\n")),console.log(t.join(",\n"))}refresh(){this.matrix_refresh(),redraw()}change_mode(e=n.add_mode){e==n.add_mode&&""==$("#node_label").val()?alert("エラー: 頂点名が空です"):(this.mode=e,this.refresh())}draw(){if(background(this.mode==n.add_mode||this.mode==n.edit_mode?i.color_code.gray:i.color_code.light_gray),this.V.draw(),this.E.draw(),this.mode==n.add_mode||this.mode==n.edit_mode){strokeWeight(2),stroke.apply(null,i.color_code.black),drawingContext.setLineDash([10,10]),line(mouseX,0,mouseX,1e3),line(0,mouseY,1e3,mouseY);let e=this.mode==n.add_mode?$("#node_label").val():this.editing_node.label;this.V.draw_node(this.V.make(e,mouseX,mouseY,i.color_code.orange))}}setup(){createCanvas(1e3,1e3).parent("canvas-hole"),noLoop()}mouseMoved(){(this.mode==n.add_mode||this.mode==n.edit_mode)&&redraw()}mouseReleased(){if(this.mode==n.add_mode){let e=$("#node_label").val();this.V.add(e,mouseX,mouseY),$("#node_label").val(""),this.change_mode(n.normal_mode)}else if(this.mode==n.edit_mode)this.editing_node.x=mouseX,this.editing_node.y=mouseY,this.editing_node=null,this.change_mode(n.normal_mode);else{let e=this.V.get_node_from_canvas(mouseX,mouseY);e&&(this.editing_node=e,this.change_mode(n.edit_mode))}}}class h extends n{constructor(){super(!0)}load_sample(e){this.graph_reset(),1==e?([["A",97,393],["B",258,251],["C",334,493],["D",615,254],["E",521,472],["F",802,403]].map(e=>this.V.add.apply(this.V,e)),[["A","B",3],["A","C",5],["B","C",4],["B","D",13],["C","E",4],["C","D",9],["D","F",2],["E","D",7],["E","F",8]].map(e=>this.E.add.apply(this.E,e))):2==e?([["A",110,340],["B",240,180],["C",240,490],["D",480,180],["E",480,340],["F",480,490],["G",710,180],["H",710,490],["I",880,340]].map(e=>this.V.add.apply(this.V,e)),[["A","B",4],["A","C",8],["B","C",11],["B","D",8],["C","E",7],["D","E",2],["D","H",4],["D","G",7],["E","F",6],["C","F",1],["F","H",2],["G","H",14],["G","I",9],["H","I",10]].map(e=>this.E.add.apply(this.E,e))):3==e&&([["A",480,90],["B",212,250],["C",480,250],["D",777,250],["E",148,420],["F",265,420],["G",411,420],["H",559,420],["I",727,420],["J",850,420],["K",315,580],["L",445,580],["M",523,580],["N",635,580],["O",850,580]].map(e=>this.V.add.apply(this.V,e)),[["A","B",1],["A","C",1],["A","D",1],["B","E",1],["B","F",1],["C","G",1],["C","H",1],["D","I",1],["D","J",1],["G","K",1],["G","L",1],["H","M",1],["H","N",1],["J","O",1]].map(e=>this.E.add.apply(this.E,e))),this.refresh()}graph_select(){let e=parseInt($("#graph-select").val());this.load_sample(e)}}class p extends n{constructor(){super(!1)}is_connected(){let e=this,t=new Set;return!function r(s){t.add(s);for(let o=0;o<e.V.get_size();o++)!t.has(o)&&e.E.get(s,o)&&r(o)}(0),this.V.get_size()==t.size}load_sample(e){this.graph_reset(),1==e?([["0",669,458],["1",309,508],["2",464,227],["3",512,508],["4",162,361],["5",829,338],["6",361,387],["7",536,388]].map(e=>this.V.add.apply(this.V,e)),[["0","3",5],["0","5",6],["0","7",3],["1","3",8],["1","6",3],["1","4",4],["2","4",9],["2","5",10],["2","7",5],["3","7",6],["4","6",2],["6","7",7]].map(e=>this.E.add.apply(this.E,e))):2==e?([["A",110,340],["B",240,180],["C",240,490],["D",480,180],["E",480,340],["F",480,490],["G",710,180],["H",710,490],["I",880,340]].map(e=>this.V.add.apply(this.V,e)),[["A","B",4],["A","C",8],["B","C",11],["B","D",8],["C","E",7],["D","E",2],["D","H",4],["D","G",7],["E","F",6],["C","F",1],["F","H",2],["G","H",14],["G","I",9],["H","I",10]].map(e=>this.E.add.apply(this.E,e))):3==e&&([["A",480,90],["B",212,250],["C",480,250],["D",777,250],["E",148,420],["F",265,420],["G",411,420],["H",559,420],["I",727,420],["J",850,420],["K",315,580],["L",445,580],["M",523,580],["N",635,580],["O",850,580]].map(e=>this.V.add.apply(this.V,e)),[["A","B",1],["A","C",1],["A","D",1],["B","E",1],["B","F",1],["C","G",1],["C","H",1],["D","I",1],["D","J",1],["G","K",1],["G","L",1],["H","M",1],["H","N",1],["J","O",1]].map(e=>this.E.add.apply(this.E,e))),this.refresh()}graph_select(){let e=parseInt($("#graph-select").val());this.load_sample(e)}}},{"./draw-util.js":"3UZMJ","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3","./color-code.js":"4Jzwc"}],"3UZMJ":[function(e,t,r,s){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"calc_dist",()=>i),o.export(r,"calc_edge_point",()=>a),o.export(r,"rotation",()=>d),o.export(r,"draw_arrow",()=>l);let i=function(e,t,r,s){return Math.sqrt((e-r)**2+(t-s)**2)},a=function(e,t,r,s,o,a,d){e==r&&(e+=1e-5);let l=(s-t)/(r-e),n=d/Math.sqrt(1+l*l),[h,p]=[e+n,t+l*n],[c,u]=[e-n,t-l*n],[g,_]=[(e+r)/2,(t+s)/2];return i(h,p,g,_)<i(c,u,g,_)?[h,p]:[c,u]},d=function(e,t,r,s,o){return[(r-e)*Math.cos(o)-(s-t)*Math.sin(o)+e,(r-e)*Math.sin(o)+(s-t)*Math.cos(o)+t]},l=function(e,t,r,s){line(e,t,r,s);let[o,i]=a(r,s,e,t,r,s,10),[l,n]=d(r,s,o,i,Math.PI/8),[h,p]=d(r,s,o,i,-Math.PI/8);triangle(r,s,l,n,h,p)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],jBTt3:[function(e,t,r,s){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,t){return Object.keys(e).forEach(function(r){"default"===r||"__esModule"===r||Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})}),t},r.export=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:r})}},{}],"4Jzwc":[function(e,t,r,s){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"color_code",()=>i);let i={black:[0,0,0],white:[255,255,255],red:[255,111,51],yellow:[255,244,51],blue:[51,187,255],gray:[128,128,128],light_gray:[204,204,204],orange:[255,187,51],dark:[76,76,76]}},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}]},["5Vhrb"],"5Vhrb","parcelRequire94c2");
//# sourceMappingURL=graph.js.map
