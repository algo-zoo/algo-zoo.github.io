!function(e,t,s,r,i){var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a="function"==typeof o[r]&&o[r],l=a.cache||{},d="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function n(t,s){if(!l[t]){if(!e[t]){var i="function"==typeof o[r]&&o[r];if(!s&&i)return i(t,!0);if(a)return a(t,!0);if(d&&"string"==typeof t)return d(t);var h=Error("Cannot find module '"+t+"'");throw h.code="MODULE_NOT_FOUND",h}c.resolve=function(s){var r=e[t][1][s];return null!=r?r:s},c.cache={};var p=l[t]=new n.Module(t);e[t][0].call(p.exports,c,p,p.exports,o)}return l[t].exports;function c(e){var t=c.resolve(e);return!1===t?{}:n(t)}}n.isParcelRequire=!0,n.Module=function(e){this.id=e,this.bundle=n,this.exports={}},n.modules=e,n.cache=l,n.parent=a,n.register=function(t,s){e[t]=[function(e,t){t.exports=s},{}]},Object.defineProperty(n,"root",{get:function(){return o[r]}}),o[r]=n;for(var h=0;h<t.length;h++)n(t[h]);if(s){var p=n(s);"object"==typeof exports&&"undefined"!=typeof module?module.exports=p:"function"==typeof define&&define.amd&&define(function(){return p})}}({lPTik:[function(e,t,s,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(s);var i=e("./ColorCode.js"),o=e("./Graph.js");class a extends o.DirectedGraph{constructor(){super(),this.S=new Set,this.path_mode=!1}onestep(e=!0){if(this.S.size>=this.V.get_size())return;let t=this.V.get_nodes().filter(e=>!this.S.has(e)).reduce((e,t)=>e.dist<t.dist?e:t);for(let e of this.E.get_edges())if(this.V.get(e.from)==t){let s=this.V.get(e.to),r=e.weight;if(0==r)continue;let i=t.dist+r;s.dist>i&&(s.dist=i,s.prev=t)}this.S.add(t),e&&this.refresh()}dijkstra(){for(;this.S.size<this.V.get_size();)this.onestep(!1);this.refresh()}initialize(){if(this.S.clear(),this.V.nodes.forEach(function(e){e.dist=1/0,e.prev=null,e.color=i.white}),this.E.edges.forEach(function(e){e.color=i.black}),this.V.get_size()>0){let e=$("#start").val();this.V.nodes[e||0].dist=0}}setup(){super.setup(),this.reset()}reset(){this.initialize(),this.refresh()}table_refresh(){$("#data_tbl td").parent().empty(),0==$("#data_tbl tbody").length&&$("#data_tbl").append($("<tbody>"));for(let e=0;e<this.V.get_size();e++){let t=this.V.get(e),s="dist["+t.label+"] = "+(t.dist==1/0?"∞":t.dist),r="prev["+t.label+"] = "+(t.prev?t.prev.label:"NULL");$("#data_tbl tbody").append("<tr><td>"+t.label+"</td><td>"+(this.S.has(t)?"確定":"未確定")+"</td><td>"+s+"</td><td>"+r+"</td></tr>")}}start_node_refresh(){if(this.V.get_size()>0){let e=$("#start").val();$("#start").empty();for(let e=0;e<this.V.get_size();e++){let t=this.V.get(e);$("#start").append($("<option>").html(t.label).val(e))}$("#start").val(e||0)}}matrix_change(e,t,s){super.matrix_change(e,t,s),this.reset()}refresh(){this.table_refresh(),this.start_node_refresh(),super.refresh()}set_color(){if(this.V.nodes.forEach((function(e){this.S.has(e)?e.color=i.red:e==this.V.get($("#start").val())?e.color=i.blue:e.color=i.white}).bind(this)),this.E.edges.forEach((function(e){e.color=this.S.has(this.V.get(e.from))?i.red:i.black}).bind(this)),this.path_mode){var e=this.V.get_node_from_canvas(mouseX,mouseY);do{let t=e.prev,s=this.E.get(t,e);s&&(s.color=i.yellow),e.color=i.yellow,e=t}while(e)}}draw(){this.set_color(),super.draw()}has_shortest_path(e,t){let s=this.V.get_node_from_canvas(e,t);return!!s&&this.S.has(s)}mouseMoved(){this.path_mode=this.has_shortest_path(mouseX,mouseY),super.mouseMoved(),this.draw()}graph_select(){super.graph_select(),this.reset()}}let l=new a;window.setup=l.setup.bind(l),window.draw=l.draw.bind(l),window.mouseMoved=l.mouseMoved.bind(l),window.mouseReleased=l.mouseReleased.bind(l),window.matrix_change=l.matrix_change.bind(l),$(document).ready(function(){$("#add").click(()=>l.change_mode()),$("#search").click(()=>l.onestep()),$("#goal").click(()=>l.dijkstra()),$("#reset").click(()=>l.reset()),$("#start").change(()=>l.reset()),$("#graph-select").change(()=>l.graph_select())})},{"./ColorCode.js":"fgi4l","./Graph.js":"fmzMd","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],fgi4l:[function(e,t,s,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");function o(e){return console.assert(0<=e&&e<=255,"Scale error"),[e,e,e]}function a(e,t,s){console.assert(0<=e&&e<=360,"Scale error"),console.assert(0<=t&&t<=100,"Scale error"),console.assert(0<=s&&s<=100,"Scale error");var r,i=function(e){return 0|Math.round(255*e)},o=t/100,a=s/100;if(0===t){var l=i(a);return[l,l,l]}var d=e/60,n=0|Math.floor(d),h=d-n,p=a*(1-o),c=a*(1-o*h),u=a*(1-o*(1-h));switch(n){case 0:r=[a,u,p];break;case 1:r=[c,a,p];break;case 2:r=[p,a,u];break;case 3:r=[p,c,a];break;case 4:r=[u,p,a];break;default:r=[a,p,c]}return[i(r[0]),i(r[1]),i(r[2])]}i.defineInteropFlag(s),i.export(s,"grayScale",()=>o),i.export(s,"hsv",()=>a),i.export(s,"black",()=>l),i.export(s,"dark",()=>d),i.export(s,"gray",()=>n),i.export(s,"lightGray",()=>h),i.export(s,"white",()=>p),i.export(s,"red",()=>c),i.export(s,"yellow",()=>u),i.export(s,"blue",()=>f),i.export(s,"lightBlue",()=>g),i.export(s,"orange",()=>m);var l=o(0),d=o(30),n=o(120),h=o(180),p=o(255),c=a(18,80,100),u=a(57,80,100),f=a(200,80,100),g=a(200,20,100),m=a(40,80,100)},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],jBTt3:[function(e,t,s,r){s.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},s.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.exportAll=function(e,t){return Object.keys(e).forEach(function(s){"default"===s||"__esModule"===s||Object.prototype.hasOwnProperty.call(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[s]}})}),t},s.export=function(e,t,s){Object.defineProperty(e,t,{enumerable:!0,get:s})}},{}],fmzMd:[function(e,t,s,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(s),i.export(s,"Graph",()=>n),i.export(s,"DirectedGraph",()=>h),i.export(s,"UndirectedGraph",()=>p);var o=e("./ColorCode.js"),a=e("./DrawUtil.js");class l{constructor(){this.node_r=25,this.nodes=[]}draw_node(e){drawingContext.setLineDash([]);let t=2*this.node_r;strokeWeight(2),stroke.apply(null,o.black),fill.apply(null,e.color),ellipse(e.x,e.y,t,t),textAlign(CENTER,CENTER),fill(0),textSize(24),text(e.label,e.x,e.y)}make(e,t,s,r=o.white){return{label:e,x:t,y:s,color:r}}add(...e){let t=this.make.apply(this,e);this.nodes.push(t)}modify(e,t){this.nodes=this.nodes.map(s=>s==e?t:s)}get(e){return this.nodes[e]}get_index(e){return this.nodes.findIndex(t=>t.label==e)}get_node_from_canvas(e,t){return this.nodes.find(s=>(0,a.calc_dist)(e,t,s.x,s.y)<=this.node_r)}get_nodes(){return this.nodes}get_labels(){return this.nodes.map(e=>e.label)}get_size(){return this.nodes.length}draw(){this.nodes.forEach(this.draw_node,this)}}class d{constructor(e,t){this.V=e,this.edges=[],this.directed=t}draw_arrow_head(e,t,s,r,i){strokeWeight(2),fill.apply(null,i),stroke.apply(null,i);let[o,l]=(0,a.calc_edge_point)(s,r,e,t,s,r,10),[d,n]=(0,a.rotation)(s,r,o,l,Math.PI/8),[h,p]=(0,a.rotation)(s,r,o,l,-Math.PI/8);triangle(s,r,d,n,h,p)}draw_arrow(e,t,s,r,i){strokeWeight(2),fill.apply(null,i),stroke.apply(null,i),line(e,t,s,r),this.directed&&this.draw_arrow_head(e,t,s,r,i)}draw_curve_arrow(e,t,s,r,i,o,a){strokeWeight(2),noFill(),stroke.apply(null,a),bezier(e,t,i,o,i,o,s,r),this.draw_arrow_head(i,o,s,r,a)}draw_label(e,t,s){textAlign(CENTER,CENTER),fill(0),stroke.apply(null,o.white),strokeWeight(5),textSize(24),text(e,t,s)}draw_edge(e){if(0==e.weight)return;drawingContext.setLineDash(e.dashed?[5]:[]);let[t,s]=[this.V.get(e.from),this.V.get(e.to)],[r,i]=[t.x,t.y],[o,l]=[s.x,s.y],[d,n]=[(r+o)/2,(i+l)/2],h=1.4*this.V.node_r,[p,c]=(0,a.calc_edge_point)(r,i,o,l,r,i,h),[u,f]=(0,a.calc_edge_point)(o,l,r,i,o,l,h),g=this.get(e.to,e.from);if(this.directed&&g){let t=[o-r,l-i],s=Math.sqrt(t[0]*t[0]+t[1]*t[1]),a=[t[0]/s,t[1]/s],g=[-a[1]*h,a[0]*h],[m,_]=[d+g[0],n+g[1]],[y,b]=[p+.25*g[0],c+.25*g[1]],[w,x]=[u+.25*g[0],f+.25*g[1]];this.draw_curve_arrow(y,b,w,x,m,_,e.color),this.draw_label(e.weight,m,_)}else this.draw_arrow(p,c,u,f,e.color),this.draw_label(e.weight,d,n)}get0(e,t){return"number"==typeof e?this.get_edges().find(s=>s.from==e&&s.to==t):this.get_edges().find(s=>this.V.get(s.from)==e&&this.V.get(s.to)==t)}get(e,t){return this.directed?this.get0(e,t):this.get0(e,t)||this.get0(t,e)}get_edges(){return this.edges.filter(e=>0!=e.weight)}draw(){this.edges.forEach(this.draw_edge,this)}make(e,t,s){return{from:this.V.get_index(e),to:this.V.get_index(t),weight:s,color:o.black,dashed:!1}}add(...e){let t=this.make.apply(this,e);this.edges.push(t)}modify(e,t,s){let r=(e,t)=>this.V.get(e)==t;this.edges=this.edges.map(i=>r(i.from,e)&&r(i.to,t)?s:i)}get_html(e,t){if(e==t)return"<td>0</td>";if(this.directed||e<t){let s=this.get(e,t);return'<td><input class="alg-input" type="number" onchange="matrix_change('+String(e)+","+String(t)+',this.value)" type="text" value="'+String(s?s.weight:0)+'"></td>'}{let s=this.get(t,e);return"<td>"+String(s?s.weight:0)+"</td>"}}}class n{static normal_mode=0;static add_mode=1;static edit_mode=2;constructor(e=!0){this.V=new l,this.E=new d(this.V,e),this.mode=n.normal_mode,this.edit_mode=null}graph_reset(){this.V.nodes=[],this.E.edges=[]}matrix_change(e,t,s){let[r,i]=[this.V.get(e),this.V.get(t)],o=this.E.get(e,t),a=parseInt(s);if(o){let e=this.E.make(r.label,i.label,a);this.E.modify(r,i,e)}else this.E.add(r.label,i.label,a);this.refresh()}matrix_refresh(){$("#matrix_tbl").empty().append($("<thead>"),$("<tbody>")),$("#matrix_tbl thead").append(["<tr>",'<td class="gray"></td>',this.V.get_labels().map(e=>'<td class="gray text-center">'+e+"</td>").join(""),"</tr>"].join(""));for(let e=0;e<this.V.get_size();e++){let t=this.V.get(e);$("#matrix_tbl tbody").append(["<tr>",'<td class="gray">'+t.label+"</td>",Array.from(Array(this.V.get_size())).map((function(t,s){return this.E.get_html(e,s)}).bind(this)).join(""),"</tr>"].join(""))}}debug_output(){console.log("----");let e=[],t=[];for(let t of this.V.get_nodes())e.push("["+['"'+t.label+'"',parseInt(t.x),parseInt(t.y)].join(", ")+"]");for(let e of this.E.get_edges()){let s=this.V.get(e.from),r=this.V.get(e.to);t.push("["+['"'+s.label+'"','"'+r.label+'"',e.weight].join(", ")+"]")}console.log(e.join(",\n")),console.log(t.join(",\n"))}refresh(){this.matrix_refresh(),redraw()}change_mode(e=n.add_mode){e==n.add_mode&&""==$("#node_label").val()?alert("エラー: 頂点名が空です"):(this.mode=e,this.refresh())}draw(){if(background(this.mode==n.add_mode||this.mode==n.edit_mode?o.gray:o.lightGray),this.V.draw(),this.E.draw(),this.mode==n.add_mode||this.mode==n.edit_mode){strokeWeight(2),stroke.apply(null,o.black),drawingContext.setLineDash([10,10]),line(mouseX,0,mouseX,1e3),line(0,mouseY,1e3,mouseY);let e=this.mode==n.add_mode?$("#node_label").val():this.editing_node.label;this.V.draw_node(this.V.make(e,mouseX,mouseY,o.orange))}}setup(){createCanvas(1e3,1e3).parent("canvas-hole"),noLoop()}mouseMoved(){(this.mode==n.add_mode||this.mode==n.edit_mode)&&redraw()}mouseReleased(){if(this.mode==n.add_mode){let e=$("#node_label").val();this.V.add(e,mouseX,mouseY),$("#node_label").val(""),this.change_mode(n.normal_mode)}else if(this.mode==n.edit_mode)this.editing_node.x=mouseX,this.editing_node.y=mouseY,this.editing_node=null,this.change_mode(n.normal_mode);else{let e=this.V.get_node_from_canvas(mouseX,mouseY);e&&(this.editing_node=e,this.change_mode(n.edit_mode))}}}class h extends n{constructor(){super(!0)}load_sample(e){this.graph_reset(),1==e?([["A",97,493],["B",258,351],["C",334,593],["D",615,354],["E",521,572],["F",802,503]].map(e=>this.V.add.apply(this.V,e)),[["A","B",3],["A","C",5],["B","C",4],["B","D",13],["C","E",4],["C","D",9],["D","F",2],["E","D",7],["E","F",8]].map(e=>this.E.add.apply(this.E,e))):2==e?([["A",110,500],["B",240,340],["C",240,650],["D",480,340],["E",480,500],["F",480,650],["G",710,340],["H",710,650],["I",880,500]].map(e=>this.V.add.apply(this.V,e)),[["A","B",4],["A","C",8],["B","C",11],["B","D",8],["C","E",7],["D","E",2],["D","H",4],["D","G",7],["E","F",6],["C","F",1],["F","H",2],["G","H",14],["G","I",9],["H","I",10]].map(e=>this.E.add.apply(this.E,e))):3==e?([["A",480,290],["B",212,450],["C",480,450],["D",777,450],["E",148,620],["F",265,620],["G",411,620],["H",559,620],["I",727,620],["J",850,620],["K",315,780],["L",445,780],["M",523,780],["N",635,780],["O",850,780]].map(e=>this.V.add.apply(this.V,e)),[["A","B",1],["A","C",1],["A","D",1],["B","E",1],["B","F",1],["C","G",1],["C","H",1],["D","I",1],["D","J",1],["G","K",1],["G","L",1],["H","M",1],["H","N",1],["J","O",1]].map(e=>this.E.add.apply(this.E,e))):4==e&&([["00",150,275],["10",150,425],["20",150,575],["30",150,725],["40",150,875],["01",300,275],["11",300,425],["21",300,575],["31",300,725],["41",300,875],["02",450,275],["12",450,425],["22",450,575],["32",450,725],["42",450,875],["03",600,275],["13",600,425],["23",600,575],["33",600,725],["43",600,875],["04",750,275],["14",750,425],["24",750,575],["34",750,725],["44",750,875]].map(e=>this.V.add.apply(this.V,e)),[["00","01",1],["01","00",1],["00","10",1],["10","00",1],["00","10",1],["10","00",1],["01","02",1],["02","01",1],["02","12",1],["12","02",1],["02","12",1],["12","02",1],["04","14",1],["14","04",1],["04","14",1],["14","04",1],["10","20",1],["20","10",1],["10","20",1],["20","10",1],["12","13",1],["13","12",1],["12","22",1],["22","12",1],["12","22",1],["22","12",1],["13","14",1],["14","13",1],["14","24",1],["24","14",1],["14","24",1],["24","14",1],["20","30",1],["30","20",1],["20","30",1],["30","20",1],["22","32",1],["32","22",1],["22","32",1],["32","22",1],["24","34",1],["34","24",1],["24","34",1],["34","24",1],["30","40",1],["40","30",1],["30","40",1],["40","30",1],["32","33",1],["33","32",1],["32","42",1],["42","32",1],["32","42",1],["42","32",1],["33","34",1],["34","33",1],["33","43",1],["43","33",1],["33","43",1],["43","33",1],["34","44",1],["44","34",1],["34","44",1],["44","34",1],["40","41",1],["41","40",1],["41","42",1],["42","41",1],["42","43",1],["43","42",1],["43","44",1],["44","43",1]].map(e=>this.E.add.apply(this.E,e))),this.refresh()}graph_select(){let e=parseInt($("#graph-select").val());this.load_sample(e)}}class p extends n{constructor(){super(!1)}is_connected(){let e=this,t=new Set;return!function s(r){t.add(r);for(let i=0;i<e.V.get_size();i++)!t.has(i)&&e.E.get(r,i)&&s(i)}(0),this.V.get_size()==t.size}load_sample(e){this.graph_reset(),1==e?([["0",669,458],["1",309,508],["2",464,227],["3",512,508],["4",162,361],["5",829,338],["6",361,387],["7",536,388]].map(e=>this.V.add.apply(this.V,e)),[["0","3",5],["0","5",6],["0","7",3],["1","3",8],["1","6",3],["1","4",4],["2","4",9],["2","5",10],["2","7",5],["3","7",6],["4","6",2],["6","7",7]].map(e=>this.E.add.apply(this.E,e))):2==e?([["A",110,340],["B",240,180],["C",240,490],["D",480,180],["E",480,340],["F",480,490],["G",710,180],["H",710,490],["I",880,340]].map(e=>this.V.add.apply(this.V,e)),[["A","B",4],["A","C",8],["B","C",11],["B","D",8],["C","E",7],["D","E",2],["D","H",4],["D","G",7],["E","F",6],["C","F",1],["F","H",2],["G","H",14],["G","I",9],["H","I",10]].map(e=>this.E.add.apply(this.E,e))):3==e?([["A",480,90],["B",212,250],["C",480,250],["D",777,250],["E",148,420],["F",265,420],["G",411,420],["H",559,420],["I",727,420],["J",850,420],["K",315,580],["L",445,580],["M",523,580],["N",635,580],["O",850,580]].map(e=>this.V.add.apply(this.V,e)),[["A","B",1],["A","C",1],["A","D",1],["B","E",1],["B","F",1],["C","G",1],["C","H",1],["D","I",1],["D","J",1],["G","K",1],["G","L",1],["H","M",1],["H","N",1],["J","O",1]].map(e=>this.E.add.apply(this.E,e))):4==e&&([["00",150,275],["10",150,425],["20",150,575],["30",150,725],["40",150,875],["01",300,275],["11",300,425],["21",300,575],["31",300,725],["41",300,875],["02",450,275],["12",450,425],["22",450,575],["32",450,725],["42",450,875],["03",600,275],["13",600,425],["23",600,575],["33",600,725],["43",600,875],["04",750,275],["14",750,425],["24",750,575],["34",750,725],["44",750,875]].map(e=>this.V.add.apply(this.V,e)),[["00","01",1],["00","10",1],["00","10",1],["01","02",1],["02","12",1],["02","12",1],["04","14",1],["04","14",1],["10","20",1],["10","20",1],["12","13",1],["12","22",1],["12","22",1],["13","14",1],["14","24",1],["14","24",1],["20","30",1],["20","30",1],["22","32",1],["22","32",1],["24","34",1],["24","34",1],["30","40",1],["30","40",1],["32","33",1],["32","42",1],["32","42",1],["33","34",1],["33","43",1],["33","43",1],["34","44",1],["34","44",1],["40","41",1],["41","42",1],["42","43",1],["43","44",1]].map(e=>this.E.add.apply(this.E,e))),this.refresh()}graph_select(){let e=parseInt($("#graph-select").val());this.load_sample(e)}}},{"./ColorCode.js":"fgi4l","./DrawUtil.js":"d335M","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],d335M:[function(e,t,s,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(s),i.export(s,"strokeWeight",()=>p),i.export(s,"textSize",()=>c),i.export(s,"nodeRadius",()=>u),i.export(s,"drawNode",()=>l),i.export(s,"epsilon",()=>f),i.export(s,"calc_dist",()=>d),i.export(s,"calc_edge_point",()=>n),i.export(s,"rotation",()=>h);var o=e("./P5.js"),a=e("./ColorCode.js");function l(e,t,s){strokeWeight(2),o.fillColor(a.white),ellipse(e,t,50,50),textAlign(CENTER,CENTER),textSize(24),o.fillColor(a.black),text(s,e,t)}var d=function(e,t,s,r){return Math.sqrt((e-s)**2+(t-r)**2)},n=function(e,t,s,r,i,o,a){e==s&&(e+=f);let l=(r-t)/(s-e),n=a/Math.sqrt(1+l*l),[h,p]=[e+n,t+l*n],[c,u]=[e-n,t-l*n],[g,m]=[(e+s)/2,(t+r)/2];return d(h,p,g,m)<d(c,u,g,m)?[h,p]:[c,u]},h=function(e,t,s,r,i){return[(s-e)*Math.cos(i)-(r-t)*Math.sin(i)+e,(s-e)*Math.sin(i)+(r-t)*Math.cos(i)+t]},p=2,c=24,u=25,f=1e-5},{"./P5.js":"kRQjY","./ColorCode.js":"fgi4l","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],kRQjY:[function(e,t,s,r){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");function o(e){fill.apply(null,e)}function a(e){stroke.apply(null,e)}i.defineInteropFlag(s),i.export(s,"fillColor",()=>o),i.export(s,"strokeColor",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}]},["lPTik"],"lPTik","parcelRequire94c2");
//# sourceMappingURL=Dijkstra.js.map
