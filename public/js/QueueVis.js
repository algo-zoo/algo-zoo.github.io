!function(e,r,t,o,n){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a="function"==typeof i[o]&&i[o],u=a.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function s(r,t){if(!u[r]){if(!e[r]){var n="function"==typeof i[o]&&i[o];if(!t&&n)return n(r,!0);if(a)return a(r,!0);if(l&&"string"==typeof r)return l(r);var c=Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}f.resolve=function(t){var o=e[r][1][t];return null!=o?o:t},f.cache={};var p=u[r]=new s.Module(r);e[r][0].call(p.exports,f,p,p.exports,i)}return u[r].exports;function f(e){var r=f.resolve(e);return!1===r?{}:s(r)}}s.isParcelRequire=!0,s.Module=function(e){this.id=e,this.bundle=s,this.exports={}},s.modules=e,s.cache=u,s.parent=a,s.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]},Object.defineProperty(s,"root",{get:function(){return i[o]}}),i[o]=s;for(var c=0;c<r.length;c++)s(r[c]);if(t){var p=s(t);"object"==typeof exports&&"undefined"!=typeof module?module.exports=p:"function"==typeof define&&define.amd&&define(function(){return p})}}({bu2Gb:[function(e,r,t,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(t),n.export(t,"padding",()=>q),n.export(t,"boxSize",()=>z),n.export(t,"halfBoxSize",()=>I),n.export(t,"quarterBoxSize",()=>A),n.export(t,"cellSize",()=>P),n.export(t,"state",()=>f),n.export(t,"drawCodeLabel",()=>d),n.export(t,"drawArrow",()=>x),n.export(t,"drawArrowByIndex",()=>v),n.export(t,"drawQueue",()=>h),n.export(t,"loadProgram",()=>g),n.export(t,"runQueue",()=>m),n.export(t,"getQueueState",()=>j),n.export(t,"getMaxQueueLength",()=>S),n.export(t,"setDisable",()=>_),n.export(t,"refreshButtons",()=>E),n.export(t,"isCode",()=>w),n.export(t,"draw",()=>b),n.export(t,"setHeight",()=>k),n.export(t,"initializeQueue",()=>C),n.export(t,"setup",()=>B),n.export(t,"createCanvas",()=>O),n.export(t,"run",()=>M),n.export(t,"prev",()=>y),n.export(t,"next",()=>T);var i=e("./P5.js"),a=e("./DrawUtil.js"),u=e("./StackVis.js"),l=e("./ColorCode.js"),s=e("@rescript/core/src/Core__Int.js"),c=e("@rescript/core/src/Core__Array.js"),p=e("@rescript/core/src/Core__Option.js"),f={index:{contents:void 0}};function d(e,r){var t=e[r];if(void 0!==t)return"object"!=typeof t?"Dequeue"===t?u.drawLabel("dequeue()",2,0):void 0:"EnqueueShow"===t.TAG?u.drawLabel("enqueue("+String(t._0)+")",2,0):void 0}function x(e,r){var t=[e,r-u.quarterBoxSize|0],o=e+u.halfBoxSize|0,n=r-u.quarterBoxSize|0,s=e+u.halfBoxSize|0,c=r-u.halfBoxSize|0,p=e+u.boxSize|0,f=e+u.halfBoxSize|0,d=r+u.halfBoxSize|0,x=e+u.halfBoxSize|0,v=r+u.quarterBoxSize|0,h=r+u.quarterBoxSize|0;strokeWeight(a.strokeWeight),i.strokeColor(l.black),i.fillColor(l.white),beginShape(),[t,[o,n],[s,c],[p,r],[f,d],[x,v],[e,h],t].forEach(function(e){vertex(e[0],e[1])}),endShape(CLOSE)}function v(e,r){var t=u.padding+u.halfBoxSize|0;x(u.padding+Math.imul(e,u.cellSize)|0,t+Math.imul(r,u.cellSize)|0)}function h(e,r,t,o){var n=void 0!==t?t:2;e.toReversed().forEach(function(e,r){u.drawBoxByIndex(e,r+n|0,1)});var s=(u.padding+Math.imul(n,u.cellSize)|0)+(u.cellSize/2|0)|0,c=u.padding+Math.imul(void 0!==o?o:1,u.cellSize)|0,p=(s-(u.cellSize/2|0)|0)-u.padding|0,f=p+Math.imul(r,u.cellSize)|0,d=c-u.padding|0,x=(c+u.cellSize|0)-u.padding|0;strokeWeight(a.strokeWeight<<1),i.strokeColor(l.black),line(p,d,f,d),line(p,x,f,x)}function g(){var e=$("#program").val(),r=RegExp("enqueue\\((\\d+)\\)"),t=RegExp("dequeue\\(\\)"),o=[];return e.split("\n").forEach(function(e){var n=r.exec(e);if(null==n){if(!t.test(e))return;o.push("Dequeue"),o.push("DequeuePause");return}var i=n.slice(1)[0],a=p.getExn(s.fromString(i,void 0),void 0);o.push({TAG:"EnqueueShow",_0:a}),o.push({TAG:"Enqueue",_0:a})}),o}function m(e,r){for(var t=[],o=0;;){var n,i,a=n,u=o;if(r<u)return[t,a];var l=e[u];"object"!=typeof l?i="Dequeue"===l?t.shift():void 0:"EnqueueShow"===l.TAG?i=l._0:(t.push(l._0),i=void 0),n=i,o=u+1|0}}function j(e,r){return 0<=r&&r<e.length?m(e,r):[[],void 0]}function S(e){return c.reduce(c.fromInitializer(e.length,function(r){return j(e,r)[0].length}),0,function(e,r){return e<r?r:e})}var _=(e,r)=>$(e).prop("disabled",r);function E(){var e=f.index.contents;if(void 0!==e){var r=g().length;_("#prev",-1===e),_("#next",(e+1|0)===r)}}function w(e,r,t){var o=e[r];return void 0!==o&&("object"!=typeof o?"Dequeue"===o&&"dequeue"===t:"EnqueueShow"===o.TAG&&"enqueue"===t)}function b(){background(200);var e=f.index.contents;if(void 0!==e){var r=g(),t=S(r),o=j(r,e),n=o[1];d(r,e),h(o[0].map(function(e){return String(e)}),t,void 0,void 0),w(r,e,"enqueue")?(v(1,1),u.drawBoxByIndex(String(p.getExn(n,void 0)),0,1)):w(r,e,"dequeue")&&(v(t+2|0,1),u.drawBoxByIndex(String(p.getExn(n,void 0)),t+3|0,1)),E()}}var k=e=>$(e).height($(e)[0].scrollHeight);function C(){var e="#program";$(e).val("enqueue(4)\nenqueue(2)\nenqueue(9)\ndequeue()\nenqueue(1)\ndequeue()\nenqueue(9)\nenqueue(7)\nenqueue(6)"),k(e)}function B(){createCanvas(0,0).parent("canvas-hole"),_("#prev",!0),_("#next",!0),C()}function O(){var e=Math.imul(u.cellSize,3);createCanvas(Math.imul(u.cellSize,S(g())+4|0),e).parent("canvas-hole"),noLoop()}function M(){O(),f.index.contents=-1}function y(){var e=f.index.contents;if(void 0!==e&&0<=e){f.index.contents=e-1|0;return}}function T(){var e=f.index.contents;if(void 0!==e&&e<(g().length-1|0)){f.index.contents=e+1|0;return}}$(document).ready(function(){[["#run",M],["#prev",y],["#next",T]].forEach(function(e){var r=e[1];$(e[0]).on("click",function(){r(),redraw()})})}),window.setup=B,window.draw=b;var q=u.padding,z=u.boxSize,I=u.halfBoxSize,A=u.quarterBoxSize,P=u.cellSize},{"./P5.js":"kRQjY","./DrawUtil.js":"d335M","./ColorCode.js":"fgi4l","@rescript/core/src/Core__Int.js":"da5Bi","@rescript/core/src/Core__Array.js":"kmH7i","@rescript/core/src/Core__Option.js":"4Dake","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3","./StackVis.js":"dAPiW"}],kRQjY:[function(e,r,t,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function i(e){fill.apply(null,e)}function a(e){stroke.apply(null,e)}n.defineInteropFlag(t),n.export(t,"fillColor",()=>i),n.export(t,"strokeColor",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],jBTt3:[function(e,r,t,o){t.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},t.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.exportAll=function(e,r){return Object.keys(e).forEach(function(t){"default"===t||"__esModule"===t||Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(r,t,{enumerable:!0,get:function(){return e[t]}})}),r},t.export=function(e,r,t){Object.defineProperty(e,r,{enumerable:!0,get:t})}},{}],d335M:[function(e,r,t,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(t),n.export(t,"strokeWeight",()=>p),n.export(t,"textSize",()=>f),n.export(t,"nodeRadius",()=>d),n.export(t,"drawNode",()=>u),n.export(t,"epsilon",()=>x),n.export(t,"calc_dist",()=>l),n.export(t,"calc_edge_point",()=>s),n.export(t,"rotation",()=>c);var i=e("./P5.js"),a=e("./ColorCode.js");function u(e,r,t){strokeWeight(2),i.fillColor(a.white),ellipse(e,r,50,50),textAlign(CENTER,CENTER),textSize(24),i.fillColor(a.black),text(t,e,r)}var l=function(e,r,t,o){return Math.sqrt((e-t)**2+(r-o)**2)},s=function(e,r,t,o,n,i,a){e==t&&(e+=x);let u=(o-r)/(t-e),s=a/Math.sqrt(1+u*u),[c,p]=[e+s,r+u*s],[f,d]=[e-s,r-u*s],[v,h]=[(e+t)/2,(r+o)/2];return l(c,p,v,h)<l(f,d,v,h)?[c,p]:[f,d]},c=function(e,r,t,o,n){return[(t-e)*Math.cos(n)-(o-r)*Math.sin(n)+e,(t-e)*Math.sin(n)+(o-r)*Math.cos(n)+r]},p=2,f=24,d=25,x=1e-5},{"./P5.js":"kRQjY","./ColorCode.js":"fgi4l","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],fgi4l:[function(e,r,t,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function i(e){return console.assert(0<=e&&e<=255,"Scale error"),[e,e,e]}function a(e,r,t){console.assert(0<=e&&e<=360,"Scale error"),console.assert(0<=r&&r<=100,"Scale error"),console.assert(0<=t&&t<=100,"Scale error");var o,n=function(e){return 0|Math.round(255*e)},i=r/100,a=t/100;if(0===r){var u=n(a);return[u,u,u]}var l=e/60,s=0|Math.floor(l),c=l-s,p=a*(1-i),f=a*(1-i*c),d=a*(1-i*(1-c));switch(s){case 0:o=[a,d,p];break;case 1:o=[f,a,p];break;case 2:o=[p,a,d];break;case 3:o=[p,f,a];break;case 4:o=[d,p,a];break;default:o=[a,p,f]}return[n(o[0]),n(o[1]),n(o[2])]}n.defineInteropFlag(t),n.export(t,"grayScale",()=>i),n.export(t,"hsv",()=>a),n.export(t,"black",()=>u),n.export(t,"dark",()=>l),n.export(t,"gray",()=>s),n.export(t,"lightGray",()=>c),n.export(t,"white",()=>p),n.export(t,"red",()=>f),n.export(t,"yellow",()=>d),n.export(t,"blue",()=>x),n.export(t,"lightBlue",()=>v),n.export(t,"orange",()=>h);var u=i(0),l=i(30),s=i(120),c=i(180),p=i(255),f=a(18,80,100),d=a(57,80,100),x=a(200,80,100),v=a(200,20,100),h=a(40,80,100)},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],da5Bi:[function(e,r,t,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(t),n.export(t,"Constants",()=>p),n.export(t,"fromString",()=>a),n.export(t,"range",()=>u),n.export(t,"rangeWithOptions",()=>l),n.export(t,"clamp",()=>s),n.export(t,"Bitwise",()=>c);var i=e("./Core__Array.js");function a(e,r){var t=void 0!==r?parseInt(e,r):parseInt(e);if(!isNaN(t)&&!(t>0x7fffffff)&&!(t<-0x80000000))return 0|t}function u(e,r,t){var o,n,a=void 0!==t?t:{},u=e>r,l=a.step;if(void 0!==l){if(0!==l)o=l;else{if(e!==r)throw RangeError("Incorrect range arguments");o=l}}else o=u?-1:1;if(u===o>=0)n=0;else if(0===o)n=+(!0===a.inclusive);else{var s,c=u?e-r|0:r-e|0;n=0|Math.ceil((!0===a.inclusive?c+1|0:c)/((s=o)>=0?s:0|-s))}return i.fromInitializer(n,function(r){return e+Math.imul(r,o)|0})}function l(e,r,t){return u(e,r,t)}function s(e,r,t){var o=void 0!==r&&r<t?r:t;return void 0!==e&&e>o?e:o}var c={lnot:function(e){return -1^e}},p={minValue:-0x80000000,maxValue:0x7fffffff}},{"./Core__Array.js":"kmH7i","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],kmH7i:[function(e,r,t,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(t),n.export(t,"make",()=>a),n.export(t,"fromInitializer",()=>u),n.export(t,"equal",()=>l),n.export(t,"compare",()=>s),n.export(t,"indexOfOpt",()=>c),n.export(t,"lastIndexOfOpt",()=>p),n.export(t,"reduce",()=>f),n.export(t,"reduceWithIndex",()=>d),n.export(t,"reduceRight",()=>x),n.export(t,"reduceRightWithIndex",()=>v),n.export(t,"findIndexOpt",()=>h),n.export(t,"filterMap",()=>j),n.export(t,"keepSome",()=>S),n.export(t,"toShuffled",()=>m),n.export(t,"shuffle",()=>g),n.export(t,"findMap",()=>_),n.export(t,"last",()=>E);var i=e("rescript/lib/es6/caml_option.js");function a(e,r){if(e<=0)return[];var t=Array(e);return t.fill(r),t}function u(e,r){if(e<=0)return[];for(var t=Array(e),o=0;o<e;++o)t[o]=r(o);return t}function l(e,r,t){var o=e.length;if(o!==r.length)return!1;for(var n=0;;){var i=n;if(i===o)return!0;if(!t(e[i],r[i]))return!1;n=i+1|0}}function s(e,r,t){var o=e.length,n=r.length;if(o<n)return -1;if(o>n)return 1;for(var i=0;;){var a=i;if(a===o)return 0;var u=t(e[a],r[a]);if(0!==u)return u;i=a+1|0}}function c(e,r){var t=e.indexOf(r);if(-1!==t)return t}function p(e,r){var t=e.lastIndexOf(r);if(-1!==t)return t}function f(e,r,t){return e.reduce(t,r)}function d(e,r,t){return e.reduce(t,r)}function x(e,r,t){return e.reduceRight(t,r)}function v(e,r,t){return e.reduceRight(t,r)}function h(e,r){var t=e.findIndex(r);if(-1!==t)return t}function g(e){for(var r,t=e.length,o=0;o<t;++o)!function(e,r,t){var o=e[r];e[r]=e[t],e[t]=o}(e,o,(0|Math.floor(Math.random()*(t-(r=o)|0)))+r|0)}function m(e){var r=e.slice();return g(r),r}function j(e,r){for(var t=e.length,o=Array(t),n=0,a=0;a<t;++a){var u=r(e[a]);void 0!==u&&(o[n]=i.valFromOption(u),n=n+1|0)}return o.length=n,o}function S(e){return j(e,function(e){return e})}function _(e,r){for(var t=0;;){var o=t;if(o===e.length)return;var n=r(e[o]);if(void 0!==n)return n;t=o+1|0}}function E(e){return e[e.length-1|0]}},{"rescript/lib/es6/caml_option.js":"lBDcT","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],lBDcT:[function(e,r,t,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");function i(e){return void 0!==e.BS_PRIVATE_NESTED_SOME_NONE}function a(e){return void 0===e?{BS_PRIVATE_NESTED_SOME_NONE:0}:null!==e&&void 0!==e.BS_PRIVATE_NESTED_SOME_NONE?{BS_PRIVATE_NESTED_SOME_NONE:e.BS_PRIVATE_NESTED_SOME_NONE+1|0}:e}function u(e){if(null!=e)return a(e)}function l(e){if(void 0!==e)return a(e)}function s(e){if(null!==e)return a(e)}function c(e){if(null===e||void 0===e.BS_PRIVATE_NESTED_SOME_NONE)return e;var r=e.BS_PRIVATE_NESTED_SOME_NONE;if(0!==r)return{BS_PRIVATE_NESTED_SOME_NONE:r-1|0}}function p(e){if(void 0!==e)return c(e)}function f(e){return void 0!==e?e.VAL:e}n.defineInteropFlag(t),n.export(t,"nullable_to_opt",()=>u),n.export(t,"undefined_to_opt",()=>l),n.export(t,"null_to_opt",()=>s),n.export(t,"valFromOption",()=>c),n.export(t,"some",()=>a),n.export(t,"isNested",()=>i),n.export(t,"option_get",()=>p),n.export(t,"option_unwrap",()=>f)},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],"4Dake":[function(e,r,t,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(t),n.export(t,"filter",()=>u),n.export(t,"forEach",()=>l),n.export(t,"getExn",()=>s),n.export(t,"mapOr",()=>c),n.export(t,"mapWithDefault",()=>j),n.export(t,"map",()=>p),n.export(t,"flatMap",()=>f),n.export(t,"getOr",()=>d),n.export(t,"getWithDefault",()=>S),n.export(t,"orElse",()=>x),n.export(t,"isSome",()=>v),n.export(t,"isNone",()=>h),n.export(t,"equal",()=>g),n.export(t,"compare",()=>m);var i=e("rescript/lib/es6/caml_option.js"),a=e("./Core__Error.js");function u(e,r){if(void 0!==e&&r(i.valFromOption(e)))return e}function l(e,r){if(void 0!==e)return r(i.valFromOption(e))}function s(e,r){return void 0!==e?i.valFromOption(e):a.panic(void 0!==r?r:"Option.getExn called for None value")}function c(e,r,t){return void 0!==e?t(i.valFromOption(e)):r}function p(e,r){if(void 0!==e)return i.some(r(i.valFromOption(e)))}function f(e,r){if(void 0!==e)return r(i.valFromOption(e))}function d(e,r){return void 0!==e?i.valFromOption(e):r}function x(e,r){return void 0!==e?e:r}function v(e){return void 0!==e}function h(e){return void 0===e}function g(e,r,t){return void 0===e?void 0===r:void 0!==r&&t(i.valFromOption(e),i.valFromOption(r))}function m(e,r,t){return void 0!==e?void 0!==r?t(i.valFromOption(e),i.valFromOption(r)):1:void 0!==r?-1:0}var j=c,S=d},{"rescript/lib/es6/caml_option.js":"lBDcT","./Core__Error.js":"gydnd","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],gydnd:[function(e,r,t,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(t),n.export(t,"$$EvalError",()=>i),n.export(t,"$$RangeError",()=>a),n.export(t,"$$ReferenceError",()=>u),n.export(t,"$$SyntaxError",()=>l),n.export(t,"$$TypeError",()=>s),n.export(t,"$$URIError",()=>c),n.export(t,"panic",()=>p);var i={},a={},u={},l={},s={},c={};function p(e){throw Error("Panic! "+e)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],dAPiW:[function(e,r,t,o){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(t),n.export(t,"padding",()=>R),n.export(t,"boxSize",()=>p),n.export(t,"halfBoxSize",()=>f),n.export(t,"quarterBoxSize",()=>d),n.export(t,"cellSize",()=>x),n.export(t,"state",()=>v),n.export(t,"drawBox",()=>h),n.export(t,"drawBoxByIndex",()=>g),n.export(t,"drawLabel",()=>m),n.export(t,"drawCodeLabel",()=>j),n.export(t,"drawArrow",()=>S),n.export(t,"drawArrowByIndex",()=>_),n.export(t,"drawStack",()=>E),n.export(t,"loadProgram",()=>w),n.export(t,"runStack",()=>b),n.export(t,"getStackState",()=>k),n.export(t,"getMaxStackLength",()=>C),n.export(t,"setDisable",()=>B),n.export(t,"refreshButtons",()=>O),n.export(t,"isCode",()=>M),n.export(t,"draw",()=>y),n.export(t,"setHeight",()=>T),n.export(t,"initializeStack",()=>q),n.export(t,"setup",()=>z),n.export(t,"createCanvas",()=>I),n.export(t,"run",()=>A),n.export(t,"prev",()=>P),n.export(t,"next",()=>N);var i=e("./P5.js"),a=e("./DrawUtil.js"),u=e("./ColorCode.js"),l=e("@rescript/core/src/Core__Int.js"),s=e("@rescript/core/src/Core__Array.js"),c=e("@rescript/core/src/Core__Option.js"),p=(Math.sqrt(2)*a.nodeRadius|0)<<1,f=p/2|0,d=p/4|0,x=p+24|0,v={index:{contents:void 0}};function h(e,r,t){strokeWeight(a.strokeWeight),i.strokeColor(u.black),i.fillColor(u.lightBlue),rect(e-(p/2|0)|0,r-(p/2|0)|0,p,p),a.drawNode(e,r,t)}function g(e,r,t){h((12+(p/2|0)|0)+Math.imul(r,x)|0,(12+(p/2|0)|0)+Math.imul(t,x)|0,e)}function m(e,r,t){var o=Math.imul(r,x)+12|0,n=Math.imul(t,x)+(x/2|0)|0;textSize(40),strokeWeight(3),i.strokeColor(u.black),i.fillColor(u.red),textAlign(LEFT,CENTER),text(e,o,n)}function j(e,r){var t=e[r];if(void 0!==t)return"object"!=typeof t?"Pop"===t?m("pop()",2,0):void 0:"PushShow"===t.TAG?m("push("+String(t._0)+")",2,0):void 0}function S(e,r,t){var o=function(e){strokeWeight(a.strokeWeight),i.strokeColor(u.black),i.fillColor(u.white),beginShape(),e.forEach(function(e){vertex(e[0],e[1])}),endShape(CLOSE)};if(void 0!==t&&t){var n=[e,r];return o([n,[e+f|0,r-f|0],[e+f|0,r-d|0],[e+p|0,r-d|0],[e+p|0,r+d|0],[e+f|0,r+d|0],[e+f|0,r+f|0],n])}var l=[e,r-d|0];o([l,[e+f|0,r-d|0],[e+f|0,r-f|0],[e+p|0,r],[e+f|0,r+f|0],[e+f|0,r+d|0],[e,r+d|0],l])}function _(e,r,t){S(12+Math.imul(e,x)|0,(12+f|0)+Math.imul(r,x)|0,void 0!==t&&t)}function E(e,r,t,o){var n=void 0!==t?t:2,l=void 0!==o?o:1;e.forEach(function(e,t){g(e,((r-t|0)-1|0)+n|0,l)});var s=(12+Math.imul(n,x)|0)+(x/2|0)|0,c=12+Math.imul(l,x)|0,p=(s-(x/2|0)|0)-12|0,f=p+Math.imul(r,x)|0,d=c-12|0,v=(c+x|0)-12|0;strokeWeight(a.strokeWeight<<1),i.strokeColor(u.black),line(p,d,f,d),line(p,v,f,v),line(f,d,f,v)}function w(){var e=$("#program").val(),r=RegExp("push\\((\\d+)\\)"),t=RegExp("pop\\(\\)"),o=[];return e.split("\n").forEach(function(e){var n=r.exec(e);if(null==n){if(!t.test(e))return;o.push("Pop"),o.push("PopPause");return}var i=n.slice(1)[0],a=c.getExn(l.fromString(i,void 0),void 0);o.push({TAG:"PushShow",_0:a}),o.push({TAG:"Push",_0:a})}),o}function b(e,r){for(var t=[],o=0;;){var n,i,a=n,u=o;if(r<u)return[t,a];var l=e[u];"object"!=typeof l?i="Pop"===l?t.pop():void 0:"PushShow"===l.TAG?i=l._0:(t.push(l._0),i=void 0),n=i,o=u+1|0}}function k(e,r){return 0<=r&&r<e.length?b(e,r):[[],void 0]}function C(e){return s.reduce(s.fromInitializer(e.length,function(r){return k(e,r)[0].length}),0,function(e,r){return e<r?r:e})}var B=(e,r)=>$(e).prop("disabled",r);function O(){var e=v.index.contents;if(void 0!==e){var r=w().length;B("#prev",-1===e),B("#next",(e+1|0)===r)}}function M(e,r,t){var o=e[r];return void 0!==o&&("object"!=typeof o?"Pop"===o&&"pop"===t:"PushShow"===o.TAG&&"push"===t)}function y(){background(200);var e=v.index.contents;if(void 0!==e){var r=w(),t=C(r),o=k(r,e),n=o[1];j(r,e),E(o[0].map(function(e){return String(e)}),t,2,1),M(r,e,"push")?(_(1,1,void 0),g(String(c.getExn(n,void 0)),0,1)):M(r,e,"pop")&&(_(1,1,!0),g(String(c.getExn(n,void 0)),0,1)),O()}}var T=e=>$(e).height($(e)[0].scrollHeight);function q(){var e="#program";$(e).val("push(4)\npush(2)\npush(9)\npop()\npush(1)\npop()\npush(9)\npush(7)\npush(6)"),T(e)}function z(){createCanvas(0,0).parent("canvas-hole"),B("#prev",!0),B("#next",!0),q()}function I(){var e=Math.imul(x,3);createCanvas(Math.imul(x,C(w())+4|0),e).parent("canvas-hole"),noLoop()}function A(){I(),v.index.contents=-1}function P(){var e=v.index.contents;if(void 0!==e&&0<=e){v.index.contents=e-1|0;return}}function N(){var e=v.index.contents;if(void 0!==e&&e<(w().length-1|0)){v.index.contents=e+1|0;return}}$(document).ready(function(){[["#run",A],["#prev",P],["#next",N]].forEach(function(e){var r=e[1];$(e[0]).on("click",function(){r(),redraw()})})}),window.setup=z,window.draw=y;var R=12},{"./P5.js":"kRQjY","./DrawUtil.js":"d335M","./ColorCode.js":"fgi4l","@rescript/core/src/Core__Int.js":"da5Bi","@rescript/core/src/Core__Array.js":"kmH7i","@rescript/core/src/Core__Option.js":"4Dake","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}]},["bu2Gb"],"bu2Gb","parcelRequire94c2");
//# sourceMappingURL=QueueVis.js.map
