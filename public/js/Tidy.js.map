{"mappings":"C,A,S,C,C,C,C,C,C,C,C,C,E,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,A,Y,O,C,C,E,E,C,C,E,C,E,E,K,E,C,E,E,A,a,O,Q,A,Y,O,O,O,E,O,O,C,I,C,Q,S,E,C,C,C,E,G,C,C,C,E,C,C,G,C,C,C,E,C,C,I,E,A,Y,O,C,C,E,E,C,C,E,C,G,C,G,E,O,E,E,C,G,G,E,O,E,E,C,G,G,G,A,U,O,E,O,E,G,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,O,C,S,C,E,I,E,C,C,E,C,E,C,E,C,O,A,M,E,E,C,E,E,K,C,C,E,I,E,C,C,E,C,I,E,M,C,G,C,C,E,C,E,C,I,C,E,O,C,E,E,E,O,C,E,C,O,C,C,E,C,O,C,S,E,C,E,I,E,E,O,C,G,M,A,C,I,E,C,E,E,E,C,C,E,e,C,C,E,E,M,C,S,C,E,I,C,E,C,E,I,C,M,C,E,I,C,O,C,C,C,E,E,O,C,E,E,K,C,E,E,M,C,E,E,Q,C,S,C,C,C,E,C,C,E,C,C,S,C,C,C,E,E,O,C,C,E,C,E,A,E,O,c,C,E,O,C,I,W,O,C,C,E,A,C,G,C,C,E,C,E,I,I,E,E,E,E,M,C,I,E,C,C,E,E,G,E,C,I,E,E,E,A,C,U,O,S,A,a,O,O,O,O,C,E,Y,O,Q,O,G,E,O,W,O,C,E,C,E,C,Q,C,S,C,C,C,C,C,C,C,E,I,E,E,kD,E,iB,C,GCyrBA,EAAA,MAAA,CAAA,EAAA,kBAAA,IACE,IADF,EAAA,MAAA,CAAA,EAAA,YAAA,IAEE,GAFF,EAAA,MAAA,CAAA,EAAA,WAAA,IAGE,GAHF,EAAA,MAAA,CAAA,EAAA,WAAA,IAIE,GAJF,EAAA,MAAA,CAAA,EAAA,eAAA,IAKE,GALF,EAAA,MAAA,CAAA,EAAA,cAAA,IAME,GANF,EAAA,MAAA,CAAA,EAAA,cAAA,IAOE,GAPF,EAAA,MAAA,CAAA,EAAA,YAAA,IAQE,GARF,EAAA,MAAA,CAAA,EAAA,cAAA,IASE,GATF,EAAA,MAAA,CAAA,EAAA,UAAA,IAUE,GAVF,EAAA,MAAA,CAAA,EAAA,cAAA,IAWE,GAXF,EAAA,MAAA,CAAA,EAAA,gBAAA,IAYE,GAZF,EAA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","sources":["<anon>","rescript/Tidy.js","node_modules/rescript/lib/es6/caml.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","rescript/ColorCode.js","node_modules/rescript/lib/es6/caml_int32.js","rescript/ConvexHull.js","node_modules/rescript/lib/es6/caml_option.js","node_modules/@rescript/core/src/Core__Option.js","node_modules/@rescript/core/src/Core__Error.js"],"sourcesContent":["// modules are defined as an array\n// [ module function, map of requires ]\n//\n// map of requires is short require name -> numeric require\n//\n// anything defined in a previous bundle is accessed via the\n// orig method which is the require for previous bundles\n\n(function (modules, entry, mainEntry, parcelRequireName, globalName) {\n  /* eslint-disable no-undef */\n  var globalObject =\n    typeof globalThis !== 'undefined'\n      ? globalThis\n      : typeof self !== 'undefined'\n      ? self\n      : typeof window !== 'undefined'\n      ? window\n      : typeof global !== 'undefined'\n      ? global\n      : {};\n  /* eslint-enable no-undef */\n\n  // Save the require from previous bundle to this closure if any\n  var previousRequire =\n    typeof globalObject[parcelRequireName] === 'function' &&\n    globalObject[parcelRequireName];\n\n  var cache = previousRequire.cache || {};\n  // Do not use `require` to prevent Webpack from trying to bundle this call\n  var nodeRequire =\n    typeof module !== 'undefined' &&\n    typeof module.require === 'function' &&\n    module.require.bind(module);\n\n  function newRequire(name, jumped) {\n    if (!cache[name]) {\n      if (!modules[name]) {\n        // if we cannot find the module within our internal map or\n        // cache jump to the current global require ie. the last bundle\n        // that was added to the page.\n        var currentRequire =\n          typeof globalObject[parcelRequireName] === 'function' &&\n          globalObject[parcelRequireName];\n        if (!jumped && currentRequire) {\n          return currentRequire(name, true);\n        }\n\n        // If there are other bundles on this page the require from the\n        // previous one is saved to 'previousRequire'. Repeat this as\n        // many times as there are bundles until the module is found or\n        // we exhaust the require chain.\n        if (previousRequire) {\n          return previousRequire(name, true);\n        }\n\n        // Try the node require function if it exists.\n        if (nodeRequire && typeof name === 'string') {\n          return nodeRequire(name);\n        }\n\n        var err = new Error(\"Cannot find module '\" + name + \"'\");\n        err.code = 'MODULE_NOT_FOUND';\n        throw err;\n      }\n\n      localRequire.resolve = resolve;\n      localRequire.cache = {};\n\n      var module = (cache[name] = new newRequire.Module(name));\n\n      modules[name][0].call(\n        module.exports,\n        localRequire,\n        module,\n        module.exports,\n        globalObject\n      );\n    }\n\n    return cache[name].exports;\n\n    function localRequire(x) {\n      var res = localRequire.resolve(x);\n      return res === false ? {} : newRequire(res);\n    }\n\n    function resolve(x) {\n      var id = modules[name][1][x];\n      return id != null ? id : x;\n    }\n  }\n\n  function Module(moduleName) {\n    this.id = moduleName;\n    this.bundle = newRequire;\n    this.exports = {};\n  }\n\n  newRequire.isParcelRequire = true;\n  newRequire.Module = Module;\n  newRequire.modules = modules;\n  newRequire.cache = cache;\n  newRequire.parent = previousRequire;\n  newRequire.register = function (id, exports) {\n    modules[id] = [\n      function (require, module) {\n        module.exports = exports;\n      },\n      {},\n    ];\n  };\n\n  Object.defineProperty(newRequire, 'root', {\n    get: function () {\n      return globalObject[parcelRequireName];\n    },\n  });\n\n  globalObject[parcelRequireName] = newRequire;\n\n  for (var i = 0; i < entry.length; i++) {\n    newRequire(entry[i]);\n  }\n\n  if (mainEntry) {\n    // Expose entry point to Node, AMD or browser globals\n    // Based on https://github.com/ForbesLindesay/umd/blob/master/template.js\n    var mainExports = newRequire(mainEntry);\n\n    // CommonJS\n    if (typeof exports === 'object' && typeof module !== 'undefined') {\n      module.exports = mainExports;\n\n      // RequireJS\n    } else if (typeof define === 'function' && define.amd) {\n      define(function () {\n        return mainExports;\n      });\n\n      // <script>\n    } else if (globalName) {\n      this[globalName] = mainExports;\n    }\n  }\n})({\"68WsM\":[function(require,module,exports,__globalThis) {\n// Generated by ReScript, PLEASE EDIT WITH CARE\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"resizeThreshold\", ()=>resizeThreshold) /* state Not a pure module */ ;\nparcelHelpers.export(exports, \"drawPoint\", ()=>drawPoint);\nparcelHelpers.export(exports, \"drawLine\", ()=>drawLine);\nparcelHelpers.export(exports, \"drawRect\", ()=>drawRect);\nparcelHelpers.export(exports, \"getColorCode\", ()=>getColorCode);\nparcelHelpers.export(exports, \"setLineDash\", ()=>setLineDash);\nparcelHelpers.export(exports, \"strokeColor\", ()=>strokeColor);\nparcelHelpers.export(exports, \"fillColor\", ()=>fillColor);\nparcelHelpers.export(exports, \"strokeWidth\", ()=>strokeWidth);\nparcelHelpers.export(exports, \"getSize\", ()=>getSize);\nparcelHelpers.export(exports, \"getRectSize\", ()=>getRectSize);\nparcelHelpers.export(exports, \"setCanvasById\", ()=>setCanvasById);\nparcelHelpers.export(exports, \"createCanvas\", ()=>createCanvas);\nparcelHelpers.export(exports, \"initializeCanvas\", ()=>initializeCanvas);\nparcelHelpers.export(exports, \"duplicateCanvas\", ()=>duplicateCanvas);\nparcelHelpers.export(exports, \"rotateCanvas\", ()=>rotateCanvas);\nparcelHelpers.export(exports, \"rotateCanvasCW\", ()=>rotateCanvasCW);\nparcelHelpers.export(exports, \"rotateCanvasCCW\", ()=>rotateCanvasCCW);\nparcelHelpers.export(exports, \"state\", ()=>state);\nparcelHelpers.export(exports, \"isEditMode\", ()=>isEditMode);\nparcelHelpers.export(exports, \"scaleDrawSize\", ()=>scaleDrawSize);\nparcelHelpers.export(exports, \"scalePoint\", ()=>scalePoint);\nparcelHelpers.export(exports, \"calcDist\", ()=>calcDist);\nparcelHelpers.export(exports, \"transform\", ()=>transform);\nparcelHelpers.export(exports, \"drawCheckerBoard\", ()=>drawCheckerBoard);\nparcelHelpers.export(exports, \"drawImage\", ()=>drawImage);\nparcelHelpers.export(exports, \"drawInput\", ()=>drawInput);\nparcelHelpers.export(exports, \"drawOutput\", ()=>drawOutput);\nparcelHelpers.export(exports, \"invokeDraw\", ()=>invokeDraw);\nparcelHelpers.export(exports, \"invokeDrawInput\", ()=>invokeDrawInput);\nparcelHelpers.export(exports, \"invokeDrawOutput\", ()=>invokeDrawOutput);\nparcelHelpers.export(exports, \"getNearestCornerPointIndex\", ()=>getNearestCornerPointIndex);\nparcelHelpers.export(exports, \"setImage\", ()=>setImage);\nparcelHelpers.export(exports, \"setCorners\", ()=>setCorners);\nparcelHelpers.export(exports, \"setCursor\", ()=>setCursor);\nparcelHelpers.export(exports, \"setEditPointIndex\", ()=>setEditPointIndex);\nparcelHelpers.export(exports, \"getBasename\", ()=>getBasename);\nparcelHelpers.export(exports, \"setSaveName\", ()=>setSaveName);\nparcelHelpers.export(exports, \"loadImage\", ()=>loadImage);\nparcelHelpers.export(exports, \"invokeLoadImage\", ()=>invokeLoadImage);\nparcelHelpers.export(exports, \"mousemove\", ()=>mousemove);\nparcelHelpers.export(exports, \"invokeMousemove\", ()=>invokeMousemove);\nparcelHelpers.export(exports, \"click\", ()=>click);\nparcelHelpers.export(exports, \"invokeClick\", ()=>invokeClick);\nparcelHelpers.export(exports, \"saveCanvas\", ()=>saveCanvas);\nparcelHelpers.export(exports, \"rotatePoint\", ()=>rotatePoint);\nparcelHelpers.export(exports, \"rotate\", ()=>rotate);\nparcelHelpers.export(exports, \"save\", ()=>save);\nparcelHelpers.export(exports, \"invokeDragOver\", ()=>invokeDragOver);\nparcelHelpers.export(exports, \"invokeDrop\", ()=>invokeDrop);\nvar _camlJs = require(\"rescript/lib/es6/caml.js\");\nvar _colorCodeJs = require(\"./ColorCode.js\");\nvar _camlInt32Js = require(\"rescript/lib/es6/caml_int32.js\");\nvar _convexHullJs = require(\"./ConvexHull.js\");\nvar _camlOptionJs = require(\"rescript/lib/es6/caml_option.js\");\nvar _coreOptionJs = require(\"@rescript/core/src/Core__Option.js\");\nvar drawPoint = function(canvas, pt) {\n    const [x, y] = pt;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.beginPath();\n    ctx.arc(x, y, 5, 0, Math.PI * 2);\n    ctx.fillStyle = \"red\";\n    ctx.fill();\n    return canvas;\n};\nvar drawLine = function(canvas, pt1, pt2) {\n    const [x1, y1] = pt1;\n    const [x2, y2] = pt2;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n    return canvas;\n};\nvar drawRect = function(canvas, pt, sz) {\n    const [x, y] = pt;\n    const [w, h] = sz;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.fillRect(x, y, w, h);\n    return canvas;\n};\nvar getColorCode = function(color) {\n    return \"rgb(\" + color[0] + \",\" + color[1] + \",\" + color[2] + \")\";\n};\nvar setLineDash = function(canvas, arr) {\n    const ctx = canvas.getContext(\"2d\");\n    ctx.setLineDash(arr);\n    return canvas;\n};\nvar strokeColor = function(canvas, color) {\n    const ctx = canvas.getContext(\"2d\");\n    ctx.strokeStyle = getColorCode(color);\n    return canvas;\n};\nvar fillColor = function(canvas, color) {\n    const ctx = canvas.getContext(\"2d\");\n    ctx.fillStyle = getColorCode(color);\n    return canvas;\n};\nvar strokeWidth = function(canvas, width) {\n    const ctx = canvas.getContext(\"2d\");\n    ctx.lineWidth = width;\n    return canvas;\n};\nvar getSize = function(canvas) {\n    return [\n        canvas.width,\n        canvas.height\n    ];\n};\nvar getRectSize = function(id) {\n    const canvas = $(id)[0];\n    const ctx = canvas.getContext(\"2d\");\n    const rect = canvas.getBoundingClientRect();\n    return [\n        rect.width,\n        rect.height\n    ];\n};\nvar setCanvasById = function(src_canv, id) {\n    const tar_canv = $(id)[0];\n    const tar_ctx = tar_canv.getContext(\"2d\");\n    tar_ctx.canvas.width = src_canv.width;\n    tar_ctx.canvas.height = src_canv.height;\n    tar_ctx.drawImage(src_canv, 0, 0);\n};\nvar createCanvas = function(sz) {\n    const [w, h] = sz;\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = w;\n    canvas.height = h;\n    return canvas;\n};\nvar initializeCanvas = function(file, cont) {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = function() {\n        const data = reader.result;\n        const img = new Image();\n        img.src = data;\n        img.onload = function() {\n            var width = img.width;\n            var height = img.height;\n            // If the input image is too big\n            if (width >= resizeThreshold || height >= resizeThreshold) {\n                const scale = Math.min(resizeThreshold / width, resizeThreshold / height);\n                width = Math.floor(width * scale);\n                height = Math.floor(height * scale);\n            }\n            const img_canvas = createCanvas([\n                width,\n                height\n            ]);\n            const ctx = img_canvas.getContext(\"2d\");\n            ctx.drawImage(img, 0, 0, width, height);\n            cont(img_canvas);\n        };\n    };\n};\nvar duplicateCanvas = function(canvas) {\n    const newCanvas = document.createElement(\"canvas\");\n    newCanvas.width = canvas.width;\n    newCanvas.height = canvas.height;\n    const ctx = newCanvas.getContext(\"2d\");\n    ctx.drawImage(canvas, 0, 0);\n    return newCanvas;\n};\nvar rotateCanvas = function(canvas, angle) {\n    const rcanvas = document.createElement(\"canvas\");\n    const rctx = rcanvas.getContext(\"2d\");\n    rcanvas.width = canvas.height;\n    rcanvas.height = canvas.width;\n    rctx.save();\n    rctx.translate(rcanvas.width / 2, rcanvas.height / 2);\n    rctx.rotate(angle);\n    rctx.drawImage(canvas, -canvas.width / 2, -canvas.height / 2);\n    rctx.restore();\n    return rcanvas;\n};\nfunction rotateCanvasCW(c) {\n    return rotateCanvas(c, Math.acos(-1) / 2.0);\n}\nfunction rotateCanvasCCW(c) {\n    return rotateCanvas(c, -Math.acos(-1) / 2.0);\n}\nvar state_canvas = {\n    contents: undefined\n};\nvar state_image = {\n    contents: createCanvas([\n        0,\n        0\n    ])\n};\nvar state_cursor = {\n    contents: [\n        -1,\n        -1\n    ]\n};\nvar state_corners = {\n    contents: [\n        [\n            0,\n            0\n        ],\n        [\n            0,\n            0\n        ],\n        [\n            0,\n            0\n        ],\n        [\n            0,\n            0\n        ]\n    ]\n};\nvar state_editPointIndex = {\n    contents: undefined\n};\nvar state = {\n    canvas: state_canvas,\n    image: state_image,\n    cursor: state_cursor,\n    corners: state_corners,\n    editPointIndex: state_editPointIndex\n};\nfunction isEditMode(state) {\n    return state.editPointIndex.contents !== undefined;\n}\nfunction scaleDrawSize(c, sz) {\n    var match = getSize(c);\n    var match$1 = getRectSize(\"#inputCanvas\");\n    var canvasSize = Math.max(match[0], match[1]);\n    var rectSize = Math.max(match$1[0], match$1[1]);\n    return sz * Math.max(1.0, canvasSize / rectSize) | 0;\n}\nfunction scalePoint(c, pt) {\n    var match = getSize(c);\n    var match$1 = getRectSize(\"#inputCanvas\");\n    return [\n        _camlInt32Js.div(Math.imul(pt[0], match[0]), match$1[0]),\n        _camlInt32Js.div(Math.imul(pt[1], match[1]), match$1[1])\n    ];\n}\nfunction calcDist(pt1, pt2) {\n    var p1 = Math.pow(pt2[0] - pt1[0] | 0, 2.0);\n    var p2 = Math.pow(pt2[1] - pt1[1] | 0, 2.0);\n    return Math.sqrt(p1 + p2) | 0;\n}\nvar transform = function(canvas, corners) {\n    const ctx = canvas.getContext(\"2d\");\n    const [pt1, pt2, pt3, pt4] = corners;\n    const widthTop = calcDist(pt1, pt2);\n    const widthBottom = calcDist(pt3, pt4);\n    const tarWidth = Math.max(widthTop, widthBottom);\n    const heightLeft = calcDist(pt1, pt4);\n    const heightRight = calcDist(pt2, pt3);\n    const tarHeight = Math.max(heightLeft, heightRight);\n    const fxCanvas = fx.canvas();\n    const texture = fxCanvas.texture(canvas);\n    fxCanvas.draw(texture).perspective([\n        ...pt1,\n        ...pt2,\n        ...pt3,\n        ...pt4\n    ], [\n        0,\n        0,\n        tarWidth,\n        0,\n        tarWidth,\n        tarHeight,\n        0,\n        tarHeight\n    ]).update();\n    canvas.width = tarWidth;\n    canvas.height = tarHeight;\n    ctx.drawImage(fxCanvas, 0, 0);\n    return canvas;\n};\nfunction drawCheckerBoard(c) {\n    var match = getSize(c);\n    var h = match[1];\n    var w = match[0];\n    var sz = scaleDrawSize(c, 12);\n    var _c = c;\n    var _i = 0;\n    var _j = 0;\n    while(true){\n        var j = _j;\n        var i = _i;\n        var c$1 = _c;\n        var x = Math.imul(i, sz);\n        var y = Math.imul(j, sz);\n        if (y >= h) return c$1;\n        if (x >= w) {\n            _j = j + 1 | 0;\n            _i = 0;\n            continue;\n        }\n        _i = i + 1 | 0;\n        _c = drawRect(fillColor(c$1, (i + j | 0) % 2 === 0 ? _colorCodeJs.lightGray : _colorCodeJs.white), [\n            x,\n            y\n        ], [\n            sz,\n            sz\n        ]);\n        continue;\n    }\n}\nfunction drawImage(c) {\n    var rawDrawImage = function(canvas, img) {\n        const ctx = canvas.getContext(\"2d\");\n        const sz = Math.max(img.width, img.height);\n        ctx.drawImage(img, (sz - img.width) / 2, (sz - img.height) / 2);\n        return canvas;\n    };\n    return rawDrawImage(c, state_image.contents);\n}\nfunction drawInput(c) {\n    var drawMarker = function(c, pt, baseColorOpt) {\n        var baseColor = baseColorOpt !== undefined ? baseColorOpt : _colorCodeJs.black;\n        var y = pt[1];\n        var x = pt[0];\n        var f = function(c, color, sz) {\n            var t = scaleDrawSize(c, sz);\n            return drawRect(fillColor(c, color), [\n                x - (t / 2 | 0) | 0,\n                y - (t / 2 | 0) | 0\n            ], [\n                t,\n                t\n            ]);\n        };\n        return f(f(f(c, baseColor, 16), _colorCodeJs.white, 12), baseColor, 8);\n    };\n    var drawFrame = function(c) {\n        var match = state_corners.contents;\n        var cpt4 = match[3];\n        var cpt3 = match[2];\n        var cpt2 = match[1];\n        var cpt1 = match[0];\n        var match$1;\n        if (isEditMode(state)) {\n            var pt = state_cursor.contents;\n            var i = _coreOptionJs.getExn(state_editPointIndex.contents, undefined);\n            switch(i){\n                case 0:\n                    match$1 = [\n                        pt,\n                        cpt2,\n                        cpt3,\n                        cpt4\n                    ];\n                    break;\n                case 1:\n                    match$1 = [\n                        cpt1,\n                        pt,\n                        cpt3,\n                        cpt4\n                    ];\n                    break;\n                case 2:\n                    match$1 = [\n                        cpt1,\n                        cpt2,\n                        pt,\n                        cpt4\n                    ];\n                    break;\n                case 3:\n                    match$1 = [\n                        cpt1,\n                        cpt2,\n                        cpt3,\n                        pt\n                    ];\n                    break;\n                default:\n                    throw {\n                        RE_EXN_ID: \"Assert_failure\",\n                        _1: [\n                            \"Tidy.res\",\n                            310,\n                            13\n                        ],\n                        Error: new Error()\n                    };\n            }\n        } else match$1 = [\n            cpt1,\n            cpt2,\n            cpt3,\n            cpt4\n        ];\n        var pt4 = match$1[3];\n        var pt3 = match$1[2];\n        var pt2 = match$1[1];\n        var pt1 = match$1[0];\n        return drawMarker(drawMarker(drawMarker(drawMarker(drawLine(drawLine(drawLine(drawLine(strokeColor(strokeWidth(c, scaleDrawSize(c, 6)), _colorCodeJs.red), pt1, pt2), pt2, pt3), pt3, pt4), pt4, pt1), pt1, undefined), pt2, undefined), pt3, undefined), pt4, undefined);\n    };\n    var c$1 = drawFrame(drawImage(drawCheckerBoard(c)));\n    if (!isEditMode(state)) return c$1;\n    var match = getSize(c$1);\n    var match$1 = state_cursor.contents;\n    var y = match$1[1];\n    var x = match$1[0];\n    return drawMarker(drawLine(drawLine(strokeColor(setLineDash(c$1, [\n        scaleDrawSize(c$1, 10)\n    ]), _colorCodeJs.black), [\n        x,\n        0\n    ], [\n        x,\n        match[1]\n    ]), [\n        0,\n        y\n    ], [\n        match[0],\n        y\n    ]), [\n        x,\n        y\n    ], _colorCodeJs.red);\n}\nfunction drawOutput(c) {\n    return transform(drawImage(drawCheckerBoard(c)), state_corners.contents);\n}\nfunction invokeDraw(id, f) {\n    var c = state_canvas.contents;\n    if (c !== undefined) return setCanvasById(f(duplicateCanvas(_camlOptionJs.valFromOption(c))), id);\n}\nfunction invokeDrawInput() {\n    invokeDraw(\"#inputCanvas\", drawInput);\n}\nfunction invokeDrawOutput() {\n    invokeDraw(\"#outputCanvas\", drawOutput);\n}\nfunction getNearestCornerPointIndex(pt) {\n    var match = state_corners.contents;\n    var arr = [\n        match[0],\n        match[1],\n        match[2],\n        match[3]\n    ];\n    var dists = arr.map(function(pti) {\n        return calcDist(pt, pti);\n    });\n    var min = dists.toSorted(_camlJs.int_compare)[0];\n    return dists.indexOf(min);\n}\nfunction setImage(state, img) {\n    state.image.contents = img;\n}\nfunction setCorners(state, corners) {\n    var hull = _convexHullJs.hull([\n        corners[0],\n        corners[1],\n        corners[2],\n        corners[3]\n    ]);\n    if (hull.length === 4) state.corners.contents = [\n        hull[0],\n        hull[1],\n        hull[2],\n        hull[3]\n    ];\n    else state.corners.contents = corners;\n    invokeDraw(\"#inputCanvas\", drawInput);\n    invokeDraw(\"#outputCanvas\", drawOutput);\n}\nfunction setCursor(state, pt) {\n    state.cursor.contents = pt;\n    invokeDraw(\"#inputCanvas\", drawInput);\n}\nfunction setEditPointIndex(state, optIdx) {\n    state.editPointIndex.contents = optIdx;\n    invokeDraw(\"#inputCanvas\", drawInput);\n}\nvar getBasename = function(file) {\n    const last = file.name.lastIndexOf(\".\");\n    return last == -1 ? file.name : file.name.substring(0, last);\n};\nvar setSaveName = (name)=>$(\"#file_name\").val(name);\nfunction loadImage(files) {\n    var file = files[0];\n    var basename = getBasename(file);\n    setSaveName(\"corrected_\" + basename);\n    initializeCanvas(file, function(img) {\n        var match = getSize(img);\n        var h = match[1];\n        var w = match[0];\n        var sz = w < h ? h : w;\n        state_canvas.contents = _camlOptionJs.some(createCanvas([\n            sz,\n            sz\n        ]));\n        state_image.contents = img;\n        var u = sz / 8 | 0;\n        setCorners(state, [\n            [\n                u << 1,\n                u << 1\n            ],\n            [\n                Math.imul(6, u),\n                u << 1\n            ],\n            [\n                u,\n                Math.imul(6, u)\n            ],\n            [\n                Math.imul(7, u),\n                Math.imul(6, u)\n            ]\n        ]);\n    });\n}\nvar invokeLoadImage = (e)=>loadImage(e.target.files);\nfunction mousemove(pt) {\n    if (isEditMode(state)) {\n        var pt$1 = scalePoint(_coreOptionJs.getExn(state_canvas.contents, undefined), pt);\n        return setCursor(state, pt$1);\n    }\n}\nvar invokeMousemove = (e)=>mousemove([\n        e.offsetX,\n        e.offsetY\n    ]);\nfunction click(pt) {\n    var c = state_canvas.contents;\n    if (c === undefined) return;\n    var newPt = scalePoint(_camlOptionJs.valFromOption(c), pt);\n    setCursor(state, newPt);\n    if (!isEditMode(state)) return setEditPointIndex(state, getNearestCornerPointIndex(newPt));\n    var i = _coreOptionJs.getExn(state_editPointIndex.contents, undefined);\n    var match = state_corners.contents;\n    var pt4 = match[3];\n    var pt3 = match[2];\n    var pt2 = match[1];\n    var pt1 = match[0];\n    setEditPointIndex(state, undefined);\n    var tmp;\n    switch(i){\n        case 0:\n            tmp = [\n                newPt,\n                pt2,\n                pt3,\n                pt4\n            ];\n            break;\n        case 1:\n            tmp = [\n                pt1,\n                newPt,\n                pt3,\n                pt4\n            ];\n            break;\n        case 2:\n            tmp = [\n                pt1,\n                pt2,\n                newPt,\n                pt4\n            ];\n            break;\n        case 3:\n            tmp = [\n                pt1,\n                pt2,\n                pt3,\n                newPt\n            ];\n            break;\n        default:\n            throw {\n                RE_EXN_ID: \"Assert_failure\",\n                _1: [\n                    \"Tidy.res\",\n                    468,\n                    13\n                ],\n                Error: new Error()\n            };\n    }\n    setCorners(state, tmp);\n}\nvar invokeClick = (e)=>click([\n        e.offsetX,\n        e.offsetY\n    ]);\nvar saveCanvas = function(canvas) {\n    const link = document.createElement(\"a\");\n    link.download = $(\"#file_name\").val() + \".jpg\";\n    link.href = canvas.toDataURL(\"image/jpg\");\n    link.click();\n};\nfunction rotatePoint(pt, center, flag) {\n    var shift = function(pt, shift$1) {\n        return [\n            pt[0] + shift$1[0] | 0,\n            pt[1] + shift$1[1] | 0\n        ];\n    };\n    var rotate = function(pt) {\n        var y = pt[1];\n        var x = pt[0];\n        if (flag === \"CCW\") return [\n            y,\n            -x | 0\n        ];\n        else return [\n            -y | 0,\n            x\n        ];\n    };\n    var cy = center[1];\n    var cx = center[0];\n    return shift(rotate(shift(pt, [\n        -cx | 0,\n        -cy | 0\n    ])), [\n        cx,\n        cy\n    ]);\n}\nfunction rotate(flag) {\n    var c = state_canvas.contents;\n    if (c === undefined) return;\n    var rotator = flag === \"CCW\" ? rotateCanvasCCW : rotateCanvasCW;\n    var img = rotator(state_image.contents);\n    state_image.contents = img;\n    var match = state_corners.contents;\n    var match$1 = getSize(_camlOptionJs.valFromOption(c));\n    var center_0 = match$1[0] / 2 | 0;\n    var center_1 = match$1[1] / 2 | 0;\n    var center = [\n        center_0,\n        center_1\n    ];\n    setCorners(state, [\n        rotatePoint(match[0], center, flag),\n        rotatePoint(match[1], center, flag),\n        rotatePoint(match[2], center, flag),\n        rotatePoint(match[3], center, flag)\n    ]);\n}\nfunction save() {\n    var c = state_canvas.contents;\n    if (c !== undefined) return saveCanvas(drawOutput(duplicateCanvas(_camlOptionJs.valFromOption(c))));\n}\nvar invokeDragOver = (e)=>e.preventDefault();\nvar invokeDrop = function(e) {\n    e.preventDefault();\n    loadImage(e.originalEvent.dataTransfer.files);\n};\n$(document).ready(function() {\n    $(\"#load\").on(\"change\", invokeLoadImage);\n    $(\"#inputCanvas\").mousemove(invokeMousemove);\n    $(\"#inputCanvas\").on(\"click\", invokeClick);\n    $(\"#cw\").on(\"click\", function() {\n        rotate(\"CW\");\n    });\n    $(\"#ccw\").on(\"click\", function() {\n        rotate(\"CCW\");\n    });\n    $(\"#save\").on(\"click\", save);\n    $(document).on(\"dragover\", invokeDragOver);\n    $(document).on(\"drop\", invokeDrop);\n});\nvar resizeThreshold = 4000;\n\n},{\"rescript/lib/es6/caml.js\":\"7scqq\",\"./ColorCode.js\":\"fgi4l\",\"rescript/lib/es6/caml_int32.js\":\"aniu3\",\"./ConvexHull.js\":\"9oJS8\",\"rescript/lib/es6/caml_option.js\":\"lBDcT\",\"@rescript/core/src/Core__Option.js\":\"4Dake\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"jBTt3\"}],\"7scqq\":[function(require,module,exports,__globalThis) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"int_compare\", ()=>int_compare) /* No side effect */ ;\nparcelHelpers.export(exports, \"bool_compare\", ()=>bool_compare);\nparcelHelpers.export(exports, \"float_compare\", ()=>float_compare);\nparcelHelpers.export(exports, \"bigint_compare\", ()=>bigint_compare);\nparcelHelpers.export(exports, \"string_compare\", ()=>string_compare);\nparcelHelpers.export(exports, \"bool_min\", ()=>bool_min);\nparcelHelpers.export(exports, \"int_min\", ()=>int_min);\nparcelHelpers.export(exports, \"float_min\", ()=>float_min);\nparcelHelpers.export(exports, \"string_min\", ()=>string_min);\nparcelHelpers.export(exports, \"bool_max\", ()=>bool_max);\nparcelHelpers.export(exports, \"int_max\", ()=>int_max);\nparcelHelpers.export(exports, \"float_max\", ()=>float_max);\nparcelHelpers.export(exports, \"string_max\", ()=>string_max);\nparcelHelpers.export(exports, \"i64_eq\", ()=>i64_eq);\nparcelHelpers.export(exports, \"i64_neq\", ()=>i64_neq);\nparcelHelpers.export(exports, \"i64_lt\", ()=>i64_lt);\nparcelHelpers.export(exports, \"i64_gt\", ()=>i64_gt);\nparcelHelpers.export(exports, \"i64_le\", ()=>i64_le);\nparcelHelpers.export(exports, \"i64_ge\", ()=>i64_ge);\nparcelHelpers.export(exports, \"i64_min\", ()=>i64_min);\nparcelHelpers.export(exports, \"i64_max\", ()=>i64_max);\nfunction int_compare(x, y) {\n    if (x < y) return -1;\n    else if (x === y) return 0;\n    else return 1;\n}\nfunction bool_compare(x, y) {\n    if (x) {\n        if (y) return 0;\n        else return 1;\n    } else if (y) return -1;\n    else return 0;\n}\nfunction float_compare(x, y) {\n    if (x === y) return 0;\n    else if (x < y) return -1;\n    else if (x > y || x === x) return 1;\n    else if (y === y) return -1;\n    else return 0;\n}\nfunction bigint_compare(x, y) {\n    if (x < y) return -1;\n    else if (x === y) return 0;\n    else return 1;\n}\nfunction string_compare(s1, s2) {\n    if (s1 === s2) return 0;\n    else if (s1 < s2) return -1;\n    else return 1;\n}\nfunction bool_min(x, y) {\n    if (x) return y;\n    else return x;\n}\nfunction int_min(x, y) {\n    if (x < y) return x;\n    else return y;\n}\nfunction float_min(x, y) {\n    if (x < y) return x;\n    else return y;\n}\nfunction string_min(x, y) {\n    if (x < y) return x;\n    else return y;\n}\nfunction bool_max(x, y) {\n    if (x) return x;\n    else return y;\n}\nfunction int_max(x, y) {\n    if (x > y) return x;\n    else return y;\n}\nfunction float_max(x, y) {\n    if (x > y) return x;\n    else return y;\n}\nfunction string_max(x, y) {\n    if (x > y) return x;\n    else return y;\n}\nfunction i64_eq(x, y) {\n    if (x[1] === y[1]) return x[0] === y[0];\n    else return false;\n}\nfunction i64_ge(param, param$1) {\n    var other_hi = param$1[0];\n    var hi = param[0];\n    if (hi > other_hi) return true;\n    else if (hi < other_hi) return false;\n    else return param[1] >= param$1[1];\n}\nfunction i64_neq(x, y) {\n    return !i64_eq(x, y);\n}\nfunction i64_lt(x, y) {\n    return !i64_ge(x, y);\n}\nfunction i64_gt(x, y) {\n    if (x[0] > y[0]) return true;\n    else if (x[0] < y[0]) return false;\n    else return x[1] > y[1];\n}\nfunction i64_le(x, y) {\n    return !i64_gt(x, y);\n}\nfunction i64_min(x, y) {\n    if (i64_ge(x, y)) return y;\n    else return x;\n}\nfunction i64_max(x, y) {\n    if (i64_gt(x, y)) return x;\n    else return y;\n}\n\n},{\"@parcel/transformer-js/src/esmodule-helpers.js\":\"jBTt3\"}],\"jBTt3\":[function(require,module,exports,__globalThis) {\nexports.interopDefault = function(a) {\n    return a && a.__esModule ? a : {\n        default: a\n    };\n};\nexports.defineInteropFlag = function(a) {\n    Object.defineProperty(a, '__esModule', {\n        value: true\n    });\n};\nexports.exportAll = function(source, dest) {\n    Object.keys(source).forEach(function(key) {\n        if (key === 'default' || key === '__esModule' || Object.prototype.hasOwnProperty.call(dest, key)) return;\n        Object.defineProperty(dest, key, {\n            enumerable: true,\n            get: function() {\n                return source[key];\n            }\n        });\n    });\n    return dest;\n};\nexports.export = function(dest, destName, get) {\n    Object.defineProperty(dest, destName, {\n        enumerable: true,\n        get: get\n    });\n};\n\n},{}],\"fgi4l\":[function(require,module,exports,__globalThis) {\n// Generated by ReScript, PLEASE EDIT WITH CARE\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"grayScale\", ()=>grayScale) /* black Not a pure module */ ;\nparcelHelpers.export(exports, \"hsv\", ()=>hsv);\nparcelHelpers.export(exports, \"black\", ()=>black);\nparcelHelpers.export(exports, \"dark\", ()=>dark);\nparcelHelpers.export(exports, \"gray\", ()=>gray);\nparcelHelpers.export(exports, \"lightGray\", ()=>lightGray);\nparcelHelpers.export(exports, \"white\", ()=>white);\nparcelHelpers.export(exports, \"red\", ()=>red);\nparcelHelpers.export(exports, \"yellow\", ()=>yellow);\nparcelHelpers.export(exports, \"blue\", ()=>blue);\nparcelHelpers.export(exports, \"lightBlue\", ()=>lightBlue);\nparcelHelpers.export(exports, \"orange\", ()=>orange);\nfunction grayScale(v) {\n    console.assert(0 <= v && v <= 255, \"Scale error\");\n    return [\n        v,\n        v,\n        v\n    ];\n}\nfunction hsv(h, s, v) {\n    console.assert(0 <= h && h <= 360, \"Scale error\");\n    console.assert(0 <= s && s <= 100, \"Scale error\");\n    console.assert(0 <= v && v <= 100, \"Scale error\");\n    var normalize = function(x) {\n        return Math.round(x * 255.0) | 0;\n    };\n    var hf = h;\n    var sf = s / 100.0;\n    var vf = v / 100.0;\n    if (s === 0) {\n        var v$1 = normalize(vf);\n        return [\n            v$1,\n            v$1,\n            v$1\n        ];\n    }\n    var nh = hf / 60.0;\n    var i = Math.floor(nh) | 0;\n    var f = nh - i;\n    var p = vf * (1.0 - sf);\n    var q = vf * (1.0 - sf * f);\n    var t = vf * (1.0 - sf * (1.0 - f));\n    var match;\n    switch(i){\n        case 0:\n            match = [\n                vf,\n                t,\n                p\n            ];\n            break;\n        case 1:\n            match = [\n                q,\n                vf,\n                p\n            ];\n            break;\n        case 2:\n            match = [\n                p,\n                vf,\n                t\n            ];\n            break;\n        case 3:\n            match = [\n                p,\n                q,\n                vf\n            ];\n            break;\n        case 4:\n            match = [\n                t,\n                p,\n                vf\n            ];\n            break;\n        default:\n            match = [\n                vf,\n                p,\n                q\n            ];\n    }\n    var r = normalize(match[0]);\n    var g = normalize(match[1]);\n    var b = normalize(match[2]);\n    return [\n        r,\n        g,\n        b\n    ];\n}\nvar black = grayScale(0);\nvar dark = grayScale(30);\nvar gray = grayScale(120);\nvar lightGray = grayScale(180);\nvar white = grayScale(255);\nvar red = hsv(18, 80, 100);\nvar yellow = hsv(57, 80, 100);\nvar blue = hsv(200, 80, 100);\nvar lightBlue = hsv(200, 20, 100);\nvar orange = hsv(40, 80, 100);\n\n},{\"@parcel/transformer-js/src/esmodule-helpers.js\":\"jBTt3\"}],\"aniu3\":[function(require,module,exports,__globalThis) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"div\", ()=>div) /* No side effect */ ;\nparcelHelpers.export(exports, \"mod_\", ()=>mod_);\nfunction div(x, y) {\n    if (y === 0) throw {\n        RE_EXN_ID: \"Division_by_zero\",\n        Error: new Error()\n    };\n    return x / y | 0;\n}\nfunction mod_(x, y) {\n    if (y === 0) throw {\n        RE_EXN_ID: \"Division_by_zero\",\n        Error: new Error()\n    };\n    return x % y;\n}\n\n},{\"@parcel/transformer-js/src/esmodule-helpers.js\":\"jBTt3\"}],\"9oJS8\":[function(require,module,exports,__globalThis) {\n// Generated by ReScript, PLEASE EDIT WITH CARE\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"cross\", ()=>cross) /* No side effect */ ;\nparcelHelpers.export(exports, \"ccw\", ()=>ccw);\nparcelHelpers.export(exports, \"hull\", ()=>hull);\nvar _camlInt32Js = require(\"rescript/lib/es6/caml_int32.js\");\nfunction cross(pt1, pt2) {\n    return pt1[0] * pt2[1] - pt1[1] * pt2[0];\n}\nfunction ccw(p, q, r) {\n    var qy = q[1];\n    var qx = q[0];\n    var pq_0 = qx - p[0];\n    var pq_1 = qy - p[1];\n    var pq = [\n        pq_0,\n        pq_1\n    ];\n    var qr_0 = r[0] - qx;\n    var qr_1 = r[1] - qy;\n    var qr = [\n        qr_0,\n        qr_1\n    ];\n    return cross(pq, qr) > 0.0;\n}\nfunction hull(pts) {\n    var fpts = pts.map(function(v) {\n        return [\n            v[0],\n            v[1]\n        ];\n    }).toSorted(function(pt1, pt2) {\n        return pt1[0] + pt1[1] - (pt2[0] + pt2[1]);\n    });\n    var n = fpts.length;\n    var calcNext = function(currentIdx) {\n        var _i = 0;\n        var _candidateIdx = _camlInt32Js.mod_(currentIdx + 1 | 0, n);\n        while(true){\n            var candidateIdx = _candidateIdx;\n            var i = _i;\n            if (i >= n) return candidateIdx;\n            var next = ccw(fpts[currentIdx], fpts[i], fpts[candidateIdx]) ? i : candidateIdx;\n            _candidateIdx = next;\n            _i = i + 1 | 0;\n            continue;\n        }\n    };\n    if (n <= 2) return [];\n    var hull$1 = [];\n    var loop = function(_currentIdx) {\n        while(true){\n            var currentIdx = _currentIdx;\n            var match = fpts[currentIdx];\n            hull$1.push([\n                match[0] | 0,\n                match[1] | 0\n            ]);\n            var nextIdx = calcNext(currentIdx);\n            if (nextIdx === 0) return;\n            _currentIdx = nextIdx;\n            continue;\n        }\n    };\n    loop(0);\n    return hull$1;\n}\n\n},{\"rescript/lib/es6/caml_int32.js\":\"aniu3\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"jBTt3\"}],\"lBDcT\":[function(require,module,exports,__globalThis) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"nullable_to_opt\", ()=>nullable_to_opt) /* No side effect */ ;\nparcelHelpers.export(exports, \"undefined_to_opt\", ()=>undefined_to_opt);\nparcelHelpers.export(exports, \"null_to_opt\", ()=>null_to_opt);\nparcelHelpers.export(exports, \"valFromOption\", ()=>valFromOption);\nparcelHelpers.export(exports, \"some\", ()=>some);\nparcelHelpers.export(exports, \"isNested\", ()=>isNested);\nparcelHelpers.export(exports, \"option_get\", ()=>option_get);\nparcelHelpers.export(exports, \"option_unwrap\", ()=>option_unwrap);\nfunction isNested(x) {\n    return x.BS_PRIVATE_NESTED_SOME_NONE !== undefined;\n}\nfunction some(x) {\n    if (x === undefined) return {\n        BS_PRIVATE_NESTED_SOME_NONE: 0\n    };\n    else if (x !== null && x.BS_PRIVATE_NESTED_SOME_NONE !== undefined) return {\n        BS_PRIVATE_NESTED_SOME_NONE: x.BS_PRIVATE_NESTED_SOME_NONE + 1 | 0\n    };\n    else return x;\n}\nfunction nullable_to_opt(x) {\n    if (x == null) return;\n    else return some(x);\n}\nfunction undefined_to_opt(x) {\n    if (x === undefined) return;\n    else return some(x);\n}\nfunction null_to_opt(x) {\n    if (x === null) return;\n    else return some(x);\n}\nfunction valFromOption(x) {\n    if (!(x !== null && x.BS_PRIVATE_NESTED_SOME_NONE !== undefined)) return x;\n    var depth = x.BS_PRIVATE_NESTED_SOME_NONE;\n    if (depth === 0) return;\n    else return {\n        BS_PRIVATE_NESTED_SOME_NONE: depth - 1 | 0\n    };\n}\nfunction option_get(x) {\n    if (x === undefined) return;\n    else return valFromOption(x);\n}\nfunction option_unwrap(x) {\n    if (x !== undefined) return x.VAL;\n    else return x;\n}\n\n},{\"@parcel/transformer-js/src/esmodule-helpers.js\":\"jBTt3\"}],\"4Dake\":[function(require,module,exports,__globalThis) {\n// Generated by ReScript, PLEASE EDIT WITH CARE\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"filter\", ()=>filter) /* No side effect */ ;\nparcelHelpers.export(exports, \"forEach\", ()=>forEach);\nparcelHelpers.export(exports, \"getExn\", ()=>getExn);\nparcelHelpers.export(exports, \"mapOr\", ()=>mapOr);\nparcelHelpers.export(exports, \"mapWithDefault\", ()=>mapWithDefault);\nparcelHelpers.export(exports, \"map\", ()=>map);\nparcelHelpers.export(exports, \"flatMap\", ()=>flatMap);\nparcelHelpers.export(exports, \"getOr\", ()=>getOr);\nparcelHelpers.export(exports, \"getWithDefault\", ()=>getWithDefault);\nparcelHelpers.export(exports, \"orElse\", ()=>orElse);\nparcelHelpers.export(exports, \"isSome\", ()=>isSome);\nparcelHelpers.export(exports, \"isNone\", ()=>isNone);\nparcelHelpers.export(exports, \"equal\", ()=>equal);\nparcelHelpers.export(exports, \"compare\", ()=>compare);\nvar _camlOptionJs = require(\"rescript/lib/es6/caml_option.js\");\nvar _coreErrorJs = require(\"./Core__Error.js\");\nfunction filter(opt, p) {\n    if (opt !== undefined && p(_camlOptionJs.valFromOption(opt))) return opt;\n}\nfunction forEach(opt, f) {\n    if (opt !== undefined) return f(_camlOptionJs.valFromOption(opt));\n}\nfunction getExn(x, message) {\n    if (x !== undefined) return _camlOptionJs.valFromOption(x);\n    else return _coreErrorJs.panic(message !== undefined ? message : \"Option.getExn called for None value\");\n}\nfunction mapOr(opt, $$default, f) {\n    if (opt !== undefined) return f(_camlOptionJs.valFromOption(opt));\n    else return $$default;\n}\nfunction map(opt, f) {\n    if (opt !== undefined) return _camlOptionJs.some(f(_camlOptionJs.valFromOption(opt)));\n}\nfunction flatMap(opt, f) {\n    if (opt !== undefined) return f(_camlOptionJs.valFromOption(opt));\n}\nfunction getOr(opt, $$default) {\n    if (opt !== undefined) return _camlOptionJs.valFromOption(opt);\n    else return $$default;\n}\nfunction orElse(opt, other) {\n    if (opt !== undefined) return opt;\n    else return other;\n}\nfunction isSome(x) {\n    return x !== undefined;\n}\nfunction isNone(x) {\n    return x === undefined;\n}\nfunction equal(a, b, eq) {\n    if (a !== undefined) {\n        if (b !== undefined) return eq(_camlOptionJs.valFromOption(a), _camlOptionJs.valFromOption(b));\n        else return false;\n    } else return b === undefined;\n}\nfunction compare(a, b, cmp) {\n    if (a !== undefined) {\n        if (b !== undefined) return cmp(_camlOptionJs.valFromOption(a), _camlOptionJs.valFromOption(b));\n        else return 1;\n    } else if (b !== undefined) return -1;\n    else return 0;\n}\nvar mapWithDefault = mapOr;\nvar getWithDefault = getOr;\n\n},{\"rescript/lib/es6/caml_option.js\":\"lBDcT\",\"./Core__Error.js\":\"gydnd\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"jBTt3\"}],\"gydnd\":[function(require,module,exports,__globalThis) {\n// Generated by ReScript, PLEASE EDIT WITH CARE\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"$$EvalError\", ()=>$$EvalError) /* No side effect */ ;\nparcelHelpers.export(exports, \"$$RangeError\", ()=>$$RangeError);\nparcelHelpers.export(exports, \"$$ReferenceError\", ()=>$$ReferenceError);\nparcelHelpers.export(exports, \"$$SyntaxError\", ()=>$$SyntaxError);\nparcelHelpers.export(exports, \"$$TypeError\", ()=>$$TypeError);\nparcelHelpers.export(exports, \"$$URIError\", ()=>$$URIError);\nparcelHelpers.export(exports, \"panic\", ()=>panic);\nvar $$EvalError = {};\nvar $$RangeError = {};\nvar $$ReferenceError = {};\nvar $$SyntaxError = {};\nvar $$TypeError = {};\nvar $$URIError = {};\nfunction panic(msg) {\n    throw new Error(\"Panic! \" + msg);\n}\n\n},{\"@parcel/transformer-js/src/esmodule-helpers.js\":\"jBTt3\"}]},[\"68WsM\"], \"68WsM\", \"parcelRequire94c2\")\n\n//# sourceMappingURL=Tidy.js.map\n","// Generated by ReScript, PLEASE EDIT WITH CARE\n\nimport * as Caml from \"rescript/lib/es6/caml.js\";\nimport * as ColorCode from \"./ColorCode.js\";\nimport * as Caml_int32 from \"rescript/lib/es6/caml_int32.js\";\nimport * as ConvexHull from \"./ConvexHull.js\";\nimport * as Caml_option from \"rescript/lib/es6/caml_option.js\";\nimport * as Core__Option from \"@rescript/core/src/Core__Option.js\";\n\nvar drawPoint = (function (canvas, pt) {\n    const [x, y] = pt;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.beginPath();\n    ctx.arc(x, y, 5, 0, Math.PI * 2);\n    ctx.fillStyle = \"red\";\n    ctx.fill();\n    return canvas;\n  });\n\nvar drawLine = (function (canvas, pt1, pt2) {\n    const [x1, y1] = pt1;\n    const [x2, y2] = pt2;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n    return canvas;\n  });\n\nvar drawRect = (function (canvas, pt, sz) {\n    const [x, y] = pt;\n    const [w, h] = sz;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.fillRect(x, y, w, h);\n    return canvas;\n  });\n\nvar getColorCode = (function (color) {\n    return \"rgb(\" + color[0] + \",\" + color[1] + \",\" + color[2] + \")\";\n  });\n\nvar setLineDash = (function (canvas, arr) {\n    const ctx = canvas.getContext(\"2d\");\n    ctx.setLineDash(arr);\n    return canvas;\n  });\n\nvar strokeColor = (function (canvas, color) {\n    const ctx = canvas.getContext(\"2d\");\n    ctx.strokeStyle = getColorCode(color);\n    return canvas;\n  });\n\nvar fillColor = (function (canvas, color) {\n    const ctx = canvas.getContext(\"2d\");\n    ctx.fillStyle = getColorCode(color);\n    return canvas;\n  });\n\nvar strokeWidth = (function (canvas, width) {\n    const ctx = canvas.getContext(\"2d\");\n    ctx.lineWidth = width;\n    return canvas;\n  });\n\nvar getSize = (function (canvas) {\n    return [canvas.width, canvas.height];\n  });\n\nvar getRectSize = (function (id) {\n    const canvas = $(id)[0];\n    const ctx = canvas.getContext(\"2d\");\n    const rect = canvas.getBoundingClientRect();\n    return [rect.width, rect.height];\n  });\n\nvar setCanvasById = (function (src_canv, id) {\n    const tar_canv = $(id)[0];\n    const tar_ctx = tar_canv.getContext(\"2d\");\n    tar_ctx.canvas.width = src_canv.width;\n    tar_ctx.canvas.height = src_canv.height;\n    tar_ctx.drawImage(src_canv, 0, 0);\n  });\n\nvar createCanvas = (function (sz) {\n    const [w, h] = sz;\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = w;\n    canvas.height = h;\n    return canvas;\n  });\n\nvar initializeCanvas = (function (file, cont) {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = function() {\n      const data = reader.result;\n      const img = new Image();\n      img.src = data;\n      img.onload = function () {\n        var width = img.width;\n        var height = img.height;\n\n        // If the input image is too big\n        if (width >= resizeThreshold || height >= resizeThreshold) { \n          const scale = Math.min(resizeThreshold / width, resizeThreshold / height);\n          width = Math.floor(width * scale);\n          height = Math.floor(height * scale);\n        }\n\n        const img_canvas = createCanvas([ width, height ]);\n        const ctx = img_canvas.getContext(\"2d\");\n        ctx.drawImage(img, 0, 0, width, height);\n        cont(img_canvas);\n      }\n    }\n  });\n\nvar duplicateCanvas = (function (canvas) {\n    const newCanvas = document.createElement(\"canvas\");\n    newCanvas.width = canvas.width;\n    newCanvas.height = canvas.height;\n    const ctx = newCanvas.getContext(\"2d\");\n    ctx.drawImage(canvas, 0, 0);\n    return newCanvas;\n  });\n\nvar rotateCanvas = (function (canvas, angle) {\n    const rcanvas = document.createElement(\"canvas\");\n    const rctx = rcanvas.getContext(\"2d\");\n    rcanvas.width = canvas.height;\n    rcanvas.height = canvas.width;\n    rctx.save();\n    rctx.translate(rcanvas.width / 2, rcanvas.height / 2);\n    rctx.rotate(angle);\n    rctx.drawImage(canvas, -canvas.width/2, -canvas.height/2);\n    rctx.restore();\n    return rcanvas;\n  });\n\nfunction rotateCanvasCW(c) {\n  return rotateCanvas(c, Math.acos(-1.0) / 2.0);\n}\n\nfunction rotateCanvasCCW(c) {\n  return rotateCanvas(c, - Math.acos(-1.0) / 2.0);\n}\n\nvar state_canvas = {\n  contents: undefined\n};\n\nvar state_image = {\n  contents: createCanvas([\n        0,\n        0\n      ])\n};\n\nvar state_cursor = {\n  contents: [\n    -1,\n    -1\n  ]\n};\n\nvar state_corners = {\n  contents: [\n    [\n      0,\n      0\n    ],\n    [\n      0,\n      0\n    ],\n    [\n      0,\n      0\n    ],\n    [\n      0,\n      0\n    ]\n  ]\n};\n\nvar state_editPointIndex = {\n  contents: undefined\n};\n\nvar state = {\n  canvas: state_canvas,\n  image: state_image,\n  cursor: state_cursor,\n  corners: state_corners,\n  editPointIndex: state_editPointIndex\n};\n\nfunction isEditMode(state) {\n  return state.editPointIndex.contents !== undefined;\n}\n\nfunction scaleDrawSize(c, sz) {\n  var match = getSize(c);\n  var match$1 = getRectSize(\"#inputCanvas\");\n  var canvasSize = Math.max(match[0], match[1]);\n  var rectSize = Math.max(match$1[0], match$1[1]);\n  return sz * Math.max(1.0, canvasSize / rectSize) | 0;\n}\n\nfunction scalePoint(c, pt) {\n  var match = getSize(c);\n  var match$1 = getRectSize(\"#inputCanvas\");\n  return [\n          Caml_int32.div(Math.imul(pt[0], match[0]), match$1[0]),\n          Caml_int32.div(Math.imul(pt[1], match[1]), match$1[1])\n        ];\n}\n\nfunction calcDist(pt1, pt2) {\n  var p1 = Math.pow(pt2[0] - pt1[0] | 0, 2.0);\n  var p2 = Math.pow(pt2[1] - pt1[1] | 0, 2.0);\n  return Math.sqrt(p1 + p2) | 0;\n}\n\nvar transform = (function (canvas, corners) {\n    const ctx = canvas.getContext(\"2d\");\n\n    const [pt1, pt2, pt3, pt4] = corners;\n    const widthTop = calcDist(pt1, pt2);\n    const widthBottom = calcDist(pt3, pt4);\n    const tarWidth = Math.max(widthTop, widthBottom);\n  \n    const heightLeft = calcDist(pt1, pt4);\n    const heightRight = calcDist(pt2, pt3);\n    const tarHeight = Math.max(heightLeft, heightRight);\n\n    const fxCanvas = fx.canvas();\n    const texture = fxCanvas.texture(canvas);\n    fxCanvas.draw(texture)\n      .perspective(\n        [...pt1, ...pt2, ...pt3, ...pt4],\n        [0, 0, tarWidth, 0, tarWidth, tarHeight, 0, tarHeight]\n      )\n      .update();\n    canvas.width = tarWidth;\n    canvas.height = tarHeight;\n    ctx.drawImage(fxCanvas, 0, 0);\n    \n    return canvas;\n  });\n\nfunction drawCheckerBoard(c) {\n  var match = getSize(c);\n  var h = match[1];\n  var w = match[0];\n  var sz = scaleDrawSize(c, 12);\n  var _c = c;\n  var _i = 0;\n  var _j = 0;\n  while(true) {\n    var j = _j;\n    var i = _i;\n    var c$1 = _c;\n    var x = Math.imul(i, sz);\n    var y = Math.imul(j, sz);\n    if (y >= h) {\n      return c$1;\n    }\n    if (x >= w) {\n      _j = j + 1 | 0;\n      _i = 0;\n      continue ;\n    }\n    _i = i + 1 | 0;\n    _c = drawRect(fillColor(c$1, (i + j | 0) % 2 === 0 ? ColorCode.lightGray : ColorCode.white), [\n          x,\n          y\n        ], [\n          sz,\n          sz\n        ]);\n    continue ;\n  };\n}\n\nfunction drawImage(c) {\n  var rawDrawImage = (function (canvas, img) {\n      const ctx = canvas.getContext(\"2d\");\n      const sz = Math.max(img.width, img.height);\n      ctx.drawImage(img, (sz-img.width)/2, (sz-img.height)/2);\n      return canvas;\n    });\n  return rawDrawImage(c, state_image.contents);\n}\n\nfunction drawInput(c) {\n  var drawMarker = function (c, pt, baseColorOpt) {\n    var baseColor = baseColorOpt !== undefined ? baseColorOpt : ColorCode.black;\n    var y = pt[1];\n    var x = pt[0];\n    var f = function (c, color, sz) {\n      var t = scaleDrawSize(c, sz);\n      return drawRect(fillColor(c, color), [\n                  x - (t / 2 | 0) | 0,\n                  y - (t / 2 | 0) | 0\n                ], [\n                  t,\n                  t\n                ]);\n    };\n    return f(f(f(c, baseColor, 16), ColorCode.white, 12), baseColor, 8);\n  };\n  var drawFrame = function (c) {\n    var match = state_corners.contents;\n    var cpt4 = match[3];\n    var cpt3 = match[2];\n    var cpt2 = match[1];\n    var cpt1 = match[0];\n    var match$1;\n    if (isEditMode(state)) {\n      var pt = state_cursor.contents;\n      var i = Core__Option.getExn(state_editPointIndex.contents, undefined);\n      switch (i) {\n        case 0 :\n            match$1 = [\n              pt,\n              cpt2,\n              cpt3,\n              cpt4\n            ];\n            break;\n        case 1 :\n            match$1 = [\n              cpt1,\n              pt,\n              cpt3,\n              cpt4\n            ];\n            break;\n        case 2 :\n            match$1 = [\n              cpt1,\n              cpt2,\n              pt,\n              cpt4\n            ];\n            break;\n        case 3 :\n            match$1 = [\n              cpt1,\n              cpt2,\n              cpt3,\n              pt\n            ];\n            break;\n        default:\n          throw {\n                RE_EXN_ID: \"Assert_failure\",\n                _1: [\n                  \"Tidy.res\",\n                  310,\n                  13\n                ],\n                Error: new Error()\n              };\n      }\n    } else {\n      match$1 = [\n        cpt1,\n        cpt2,\n        cpt3,\n        cpt4\n      ];\n    }\n    var pt4 = match$1[3];\n    var pt3 = match$1[2];\n    var pt2 = match$1[1];\n    var pt1 = match$1[0];\n    return drawMarker(drawMarker(drawMarker(drawMarker(drawLine(drawLine(drawLine(drawLine(strokeColor(strokeWidth(c, scaleDrawSize(c, 6)), ColorCode.red), pt1, pt2), pt2, pt3), pt3, pt4), pt4, pt1), pt1, undefined), pt2, undefined), pt3, undefined), pt4, undefined);\n  };\n  var c$1 = drawFrame(drawImage(drawCheckerBoard(c)));\n  if (!isEditMode(state)) {\n    return c$1;\n  }\n  var match = getSize(c$1);\n  var match$1 = state_cursor.contents;\n  var y = match$1[1];\n  var x = match$1[0];\n  return drawMarker(drawLine(drawLine(strokeColor(setLineDash(c$1, [scaleDrawSize(c$1, 10)]), ColorCode.black), [\n                      x,\n                      0\n                    ], [\n                      x,\n                      match[1]\n                    ]), [\n                  0,\n                  y\n                ], [\n                  match[0],\n                  y\n                ]), [\n              x,\n              y\n            ], ColorCode.red);\n}\n\nfunction drawOutput(c) {\n  return transform(drawImage(drawCheckerBoard(c)), state_corners.contents);\n}\n\nfunction invokeDraw(id, f) {\n  var c = state_canvas.contents;\n  if (c !== undefined) {\n    return setCanvasById(f(duplicateCanvas(Caml_option.valFromOption(c))), id);\n  }\n  \n}\n\nfunction invokeDrawInput() {\n  invokeDraw(\"#inputCanvas\", drawInput);\n}\n\nfunction invokeDrawOutput() {\n  invokeDraw(\"#outputCanvas\", drawOutput);\n}\n\nfunction getNearestCornerPointIndex(pt) {\n  var match = state_corners.contents;\n  var arr = [\n    match[0],\n    match[1],\n    match[2],\n    match[3]\n  ];\n  var dists = arr.map(function (pti) {\n        return calcDist(pt, pti);\n      });\n  var min = dists.toSorted(Caml.int_compare)[0];\n  return dists.indexOf(min);\n}\n\nfunction setImage(state, img) {\n  state.image.contents = img;\n}\n\nfunction setCorners(state, corners) {\n  var hull = ConvexHull.hull([\n        corners[0],\n        corners[1],\n        corners[2],\n        corners[3]\n      ]);\n  if (hull.length === 4) {\n    state.corners.contents = [\n      hull[0],\n      hull[1],\n      hull[2],\n      hull[3]\n    ];\n  } else {\n    state.corners.contents = corners;\n  }\n  invokeDraw(\"#inputCanvas\", drawInput);\n  invokeDraw(\"#outputCanvas\", drawOutput);\n}\n\nfunction setCursor(state, pt) {\n  state.cursor.contents = pt;\n  invokeDraw(\"#inputCanvas\", drawInput);\n}\n\nfunction setEditPointIndex(state, optIdx) {\n  state.editPointIndex.contents = optIdx;\n  invokeDraw(\"#inputCanvas\", drawInput);\n}\n\nvar getBasename = (function (file) {\n    const last = file.name.lastIndexOf(\".\");\n    return last == -1 ? file.name : file.name.substring(0, last);\n  });\n\nvar setSaveName = (name => $(\"#file_name\").val(name));\n\nfunction loadImage(files) {\n  var file = files[0];\n  var basename = getBasename(file);\n  setSaveName(\"corrected_\" + basename);\n  initializeCanvas(file, (function (img) {\n          var match = getSize(img);\n          var h = match[1];\n          var w = match[0];\n          var sz = w < h ? h : w;\n          state_canvas.contents = Caml_option.some(createCanvas([\n                    sz,\n                    sz\n                  ]));\n          state_image.contents = img;\n          var u = sz / 8 | 0;\n          setCorners(state, [\n                [\n                  (u << 1),\n                  (u << 1)\n                ],\n                [\n                  Math.imul(6, u),\n                  (u << 1)\n                ],\n                [\n                  u,\n                  Math.imul(6, u)\n                ],\n                [\n                  Math.imul(7, u),\n                  Math.imul(6, u)\n                ]\n              ]);\n        }));\n}\n\nvar invokeLoadImage = (e => loadImage(e.target.files));\n\nfunction mousemove(pt) {\n  if (isEditMode(state)) {\n    var pt$1 = scalePoint(Core__Option.getExn(state_canvas.contents, undefined), pt);\n    return setCursor(state, pt$1);\n  }\n  \n}\n\nvar invokeMousemove = (e => mousemove([ e.offsetX, e.offsetY ]));\n\nfunction click(pt) {\n  var c = state_canvas.contents;\n  if (c === undefined) {\n    return ;\n  }\n  var newPt = scalePoint(Caml_option.valFromOption(c), pt);\n  setCursor(state, newPt);\n  if (!isEditMode(state)) {\n    return setEditPointIndex(state, getNearestCornerPointIndex(newPt));\n  }\n  var i = Core__Option.getExn(state_editPointIndex.contents, undefined);\n  var match = state_corners.contents;\n  var pt4 = match[3];\n  var pt3 = match[2];\n  var pt2 = match[1];\n  var pt1 = match[0];\n  setEditPointIndex(state, undefined);\n  var tmp;\n  switch (i) {\n    case 0 :\n        tmp = [\n          newPt,\n          pt2,\n          pt3,\n          pt4\n        ];\n        break;\n    case 1 :\n        tmp = [\n          pt1,\n          newPt,\n          pt3,\n          pt4\n        ];\n        break;\n    case 2 :\n        tmp = [\n          pt1,\n          pt2,\n          newPt,\n          pt4\n        ];\n        break;\n    case 3 :\n        tmp = [\n          pt1,\n          pt2,\n          pt3,\n          newPt\n        ];\n        break;\n    default:\n      throw {\n            RE_EXN_ID: \"Assert_failure\",\n            _1: [\n              \"Tidy.res\",\n              468,\n              13\n            ],\n            Error: new Error()\n          };\n  }\n  setCorners(state, tmp);\n}\n\nvar invokeClick = (e => click([ e.offsetX, e.offsetY ]));\n\nvar saveCanvas = (function (canvas) {\n    const link = document.createElement(\"a\");\n    link.download = $(\"#file_name\").val() + \".jpg\"\n    link.href = canvas.toDataURL(\"image/jpg\");\n    link.click();\n  });\n\nfunction rotatePoint(pt, center, flag) {\n  var shift = function (pt, shift$1) {\n    return [\n            pt[0] + shift$1[0] | 0,\n            pt[1] + shift$1[1] | 0\n          ];\n  };\n  var rotate = function (pt) {\n    var y = pt[1];\n    var x = pt[0];\n    if (flag === \"CCW\") {\n      return [\n              y,\n              -x | 0\n            ];\n    } else {\n      return [\n              -y | 0,\n              x\n            ];\n    }\n  };\n  var cy = center[1];\n  var cx = center[0];\n  return shift(rotate(shift(pt, [\n                      -cx | 0,\n                      -cy | 0\n                    ])), [\n              cx,\n              cy\n            ]);\n}\n\nfunction rotate(flag) {\n  var c = state_canvas.contents;\n  if (c === undefined) {\n    return ;\n  }\n  var rotator = flag === \"CCW\" ? rotateCanvasCCW : rotateCanvasCW;\n  var img = rotator(state_image.contents);\n  state_image.contents = img;\n  var match = state_corners.contents;\n  var match$1 = getSize(Caml_option.valFromOption(c));\n  var center_0 = match$1[0] / 2 | 0;\n  var center_1 = match$1[1] / 2 | 0;\n  var center = [\n    center_0,\n    center_1\n  ];\n  setCorners(state, [\n        rotatePoint(match[0], center, flag),\n        rotatePoint(match[1], center, flag),\n        rotatePoint(match[2], center, flag),\n        rotatePoint(match[3], center, flag)\n      ]);\n}\n\nfunction save() {\n  var c = state_canvas.contents;\n  if (c !== undefined) {\n    return saveCanvas(drawOutput(duplicateCanvas(Caml_option.valFromOption(c))));\n  }\n  \n}\n\nvar invokeDragOver = (e => e.preventDefault());\n\nvar invokeDrop = (function (e) {\n    e.preventDefault();\n    loadImage(e.originalEvent.dataTransfer.files);\n  });\n\n$(document).ready(function () {\n      $(\"#load\").on(\"change\", invokeLoadImage);\n      $(\"#inputCanvas\").mousemove(invokeMousemove);\n      $(\"#inputCanvas\").on(\"click\", invokeClick);\n      $(\"#cw\").on(\"click\", (function () {\n              rotate(\"CW\");\n            }));\n      $(\"#ccw\").on(\"click\", (function () {\n              rotate(\"CCW\");\n            }));\n      $(\"#save\").on(\"click\", save);\n      $(document).on(\"dragover\", invokeDragOver);\n      $(document).on(\"drop\", invokeDrop);\n    });\n\nvar resizeThreshold = 4000;\n\nexport {\n  resizeThreshold ,\n  drawPoint ,\n  drawLine ,\n  drawRect ,\n  getColorCode ,\n  setLineDash ,\n  strokeColor ,\n  fillColor ,\n  strokeWidth ,\n  getSize ,\n  getRectSize ,\n  setCanvasById ,\n  createCanvas ,\n  initializeCanvas ,\n  duplicateCanvas ,\n  rotateCanvas ,\n  rotateCanvasCW ,\n  rotateCanvasCCW ,\n  state ,\n  isEditMode ,\n  scaleDrawSize ,\n  scalePoint ,\n  calcDist ,\n  transform ,\n  drawCheckerBoard ,\n  drawImage ,\n  drawInput ,\n  drawOutput ,\n  invokeDraw ,\n  invokeDrawInput ,\n  invokeDrawOutput ,\n  getNearestCornerPointIndex ,\n  setImage ,\n  setCorners ,\n  setCursor ,\n  setEditPointIndex ,\n  getBasename ,\n  setSaveName ,\n  loadImage ,\n  invokeLoadImage ,\n  mousemove ,\n  invokeMousemove ,\n  click ,\n  invokeClick ,\n  saveCanvas ,\n  rotatePoint ,\n  rotate ,\n  save ,\n  invokeDragOver ,\n  invokeDrop ,\n}\n/* state Not a pure module */\n","\n\n\nfunction int_compare(x, y) {\n  if (x < y) {\n    return -1;\n  } else if (x === y) {\n    return 0;\n  } else {\n    return 1;\n  }\n}\n\nfunction bool_compare(x, y) {\n  if (x) {\n    if (y) {\n      return 0;\n    } else {\n      return 1;\n    }\n  } else if (y) {\n    return -1;\n  } else {\n    return 0;\n  }\n}\n\nfunction float_compare(x, y) {\n  if (x === y) {\n    return 0;\n  } else if (x < y) {\n    return -1;\n  } else if (x > y || x === x) {\n    return 1;\n  } else if (y === y) {\n    return -1;\n  } else {\n    return 0;\n  }\n}\n\nfunction bigint_compare(x, y) {\n  if (x < y) {\n    return -1;\n  } else if (x === y) {\n    return 0;\n  } else {\n    return 1;\n  }\n}\n\nfunction string_compare(s1, s2) {\n  if (s1 === s2) {\n    return 0;\n  } else if (s1 < s2) {\n    return -1;\n  } else {\n    return 1;\n  }\n}\n\nfunction bool_min(x, y) {\n  if (x) {\n    return y;\n  } else {\n    return x;\n  }\n}\n\nfunction int_min(x, y) {\n  if (x < y) {\n    return x;\n  } else {\n    return y;\n  }\n}\n\nfunction float_min(x, y) {\n  if (x < y) {\n    return x;\n  } else {\n    return y;\n  }\n}\n\nfunction string_min(x, y) {\n  if (x < y) {\n    return x;\n  } else {\n    return y;\n  }\n}\n\nfunction bool_max(x, y) {\n  if (x) {\n    return x;\n  } else {\n    return y;\n  }\n}\n\nfunction int_max(x, y) {\n  if (x > y) {\n    return x;\n  } else {\n    return y;\n  }\n}\n\nfunction float_max(x, y) {\n  if (x > y) {\n    return x;\n  } else {\n    return y;\n  }\n}\n\nfunction string_max(x, y) {\n  if (x > y) {\n    return x;\n  } else {\n    return y;\n  }\n}\n\nfunction i64_eq(x, y) {\n  if (x[1] === y[1]) {\n    return x[0] === y[0];\n  } else {\n    return false;\n  }\n}\n\nfunction i64_ge(param, param$1) {\n  var other_hi = param$1[0];\n  var hi = param[0];\n  if (hi > other_hi) {\n    return true;\n  } else if (hi < other_hi) {\n    return false;\n  } else {\n    return param[1] >= param$1[1];\n  }\n}\n\nfunction i64_neq(x, y) {\n  return !i64_eq(x, y);\n}\n\nfunction i64_lt(x, y) {\n  return !i64_ge(x, y);\n}\n\nfunction i64_gt(x, y) {\n  if (x[0] > y[0]) {\n    return true;\n  } else if (x[0] < y[0]) {\n    return false;\n  } else {\n    return x[1] > y[1];\n  }\n}\n\nfunction i64_le(x, y) {\n  return !i64_gt(x, y);\n}\n\nfunction i64_min(x, y) {\n  if (i64_ge(x, y)) {\n    return y;\n  } else {\n    return x;\n  }\n}\n\nfunction i64_max(x, y) {\n  if (i64_gt(x, y)) {\n    return x;\n  } else {\n    return y;\n  }\n}\n\nexport {\n  int_compare ,\n  bool_compare ,\n  float_compare ,\n  bigint_compare ,\n  string_compare ,\n  bool_min ,\n  int_min ,\n  float_min ,\n  string_min ,\n  bool_max ,\n  int_max ,\n  float_max ,\n  string_max ,\n  i64_eq ,\n  i64_neq ,\n  i64_lt ,\n  i64_gt ,\n  i64_le ,\n  i64_ge ,\n  i64_min ,\n  i64_max ,\n}\n/* No side effect */\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (\n      key === 'default' ||\n      key === '__esModule' ||\n      Object.prototype.hasOwnProperty.call(dest, key)\n    ) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","// Generated by ReScript, PLEASE EDIT WITH CARE\n\n\nfunction grayScale(v) {\n  console.assert(0 <= v && v <= 255, \"Scale error\");\n  return [\n          v,\n          v,\n          v\n        ];\n}\n\nfunction hsv(h, s, v) {\n  console.assert(0 <= h && h <= 360, \"Scale error\");\n  console.assert(0 <= s && s <= 100, \"Scale error\");\n  console.assert(0 <= v && v <= 100, \"Scale error\");\n  var normalize = function (x) {\n    return Math.round(x * 255.0) | 0;\n  };\n  var hf = h;\n  var sf = s / 100.0;\n  var vf = v / 100.0;\n  if (s === 0) {\n    var v$1 = normalize(vf);\n    return [\n            v$1,\n            v$1,\n            v$1\n          ];\n  }\n  var nh = hf / 60.0;\n  var i = Math.floor(nh) | 0;\n  var f = nh - i;\n  var p = vf * (1.0 - sf);\n  var q = vf * (1.0 - sf * f);\n  var t = vf * (1.0 - sf * (1.0 - f));\n  var match;\n  switch (i) {\n    case 0 :\n        match = [\n          vf,\n          t,\n          p\n        ];\n        break;\n    case 1 :\n        match = [\n          q,\n          vf,\n          p\n        ];\n        break;\n    case 2 :\n        match = [\n          p,\n          vf,\n          t\n        ];\n        break;\n    case 3 :\n        match = [\n          p,\n          q,\n          vf\n        ];\n        break;\n    case 4 :\n        match = [\n          t,\n          p,\n          vf\n        ];\n        break;\n    default:\n      match = [\n        vf,\n        p,\n        q\n      ];\n  }\n  var r = normalize(match[0]);\n  var g = normalize(match[1]);\n  var b = normalize(match[2]);\n  return [\n          r,\n          g,\n          b\n        ];\n}\n\nvar black = grayScale(0);\n\nvar dark = grayScale(30);\n\nvar gray = grayScale(120);\n\nvar lightGray = grayScale(180);\n\nvar white = grayScale(255);\n\nvar red = hsv(18, 80, 100);\n\nvar yellow = hsv(57, 80, 100);\n\nvar blue = hsv(200, 80, 100);\n\nvar lightBlue = hsv(200, 20, 100);\n\nvar orange = hsv(40, 80, 100);\n\nexport {\n  grayScale ,\n  hsv ,\n  black ,\n  dark ,\n  gray ,\n  lightGray ,\n  white ,\n  red ,\n  yellow ,\n  blue ,\n  lightBlue ,\n  orange ,\n}\n/* black Not a pure module */\n","\n\n\nfunction div(x, y) {\n  if (y === 0) {\n    throw {\n          RE_EXN_ID: \"Division_by_zero\",\n          Error: new Error()\n        };\n  }\n  return x / y | 0;\n}\n\nfunction mod_(x, y) {\n  if (y === 0) {\n    throw {\n          RE_EXN_ID: \"Division_by_zero\",\n          Error: new Error()\n        };\n  }\n  return x % y;\n}\n\nexport {\n  div ,\n  mod_ ,\n}\n/* No side effect */\n","// Generated by ReScript, PLEASE EDIT WITH CARE\n\nimport * as Caml_int32 from \"rescript/lib/es6/caml_int32.js\";\n\nfunction cross(pt1, pt2) {\n  return pt1[0] * pt2[1] - pt1[1] * pt2[0];\n}\n\nfunction ccw(p, q, r) {\n  var qy = q[1];\n  var qx = q[0];\n  var pq_0 = qx - p[0];\n  var pq_1 = qy - p[1];\n  var pq = [\n    pq_0,\n    pq_1\n  ];\n  var qr_0 = r[0] - qx;\n  var qr_1 = r[1] - qy;\n  var qr = [\n    qr_0,\n    qr_1\n  ];\n  return cross(pq, qr) > 0.0;\n}\n\nfunction hull(pts) {\n  var fpts = pts.map(function (v) {\n          return [\n                  v[0],\n                  v[1]\n                ];\n        }).toSorted(function (pt1, pt2) {\n        return pt1[0] + pt1[1] - (pt2[0] + pt2[1]);\n      });\n  var n = fpts.length;\n  var calcNext = function (currentIdx) {\n    var _i = 0;\n    var _candidateIdx = Caml_int32.mod_(currentIdx + 1 | 0, n);\n    while(true) {\n      var candidateIdx = _candidateIdx;\n      var i = _i;\n      if (i >= n) {\n        return candidateIdx;\n      }\n      var next = ccw(fpts[currentIdx], fpts[i], fpts[candidateIdx]) ? i : candidateIdx;\n      _candidateIdx = next;\n      _i = i + 1 | 0;\n      continue ;\n    };\n  };\n  if (n <= 2) {\n    return [];\n  }\n  var hull$1 = [];\n  var loop = function (_currentIdx) {\n    while(true) {\n      var currentIdx = _currentIdx;\n      var match = fpts[currentIdx];\n      hull$1.push([\n            match[0] | 0,\n            match[1] | 0\n          ]);\n      var nextIdx = calcNext(currentIdx);\n      if (nextIdx === 0) {\n        return ;\n      }\n      _currentIdx = nextIdx;\n      continue ;\n    };\n  };\n  loop(0);\n  return hull$1;\n}\n\nexport {\n  cross ,\n  ccw ,\n  hull ,\n}\n/* No side effect */\n","\n\n\nfunction isNested(x) {\n  return x.BS_PRIVATE_NESTED_SOME_NONE !== undefined;\n}\n\nfunction some(x) {\n  if (x === undefined) {\n    return {\n            BS_PRIVATE_NESTED_SOME_NONE: 0\n          };\n  } else if (x !== null && x.BS_PRIVATE_NESTED_SOME_NONE !== undefined) {\n    return {\n            BS_PRIVATE_NESTED_SOME_NONE: x.BS_PRIVATE_NESTED_SOME_NONE + 1 | 0\n          };\n  } else {\n    return x;\n  }\n}\n\nfunction nullable_to_opt(x) {\n  if (x == null) {\n    return ;\n  } else {\n    return some(x);\n  }\n}\n\nfunction undefined_to_opt(x) {\n  if (x === undefined) {\n    return ;\n  } else {\n    return some(x);\n  }\n}\n\nfunction null_to_opt(x) {\n  if (x === null) {\n    return ;\n  } else {\n    return some(x);\n  }\n}\n\nfunction valFromOption(x) {\n  if (!(x !== null && x.BS_PRIVATE_NESTED_SOME_NONE !== undefined)) {\n    return x;\n  }\n  var depth = x.BS_PRIVATE_NESTED_SOME_NONE;\n  if (depth === 0) {\n    return ;\n  } else {\n    return {\n            BS_PRIVATE_NESTED_SOME_NONE: depth - 1 | 0\n          };\n  }\n}\n\nfunction option_get(x) {\n  if (x === undefined) {\n    return ;\n  } else {\n    return valFromOption(x);\n  }\n}\n\nfunction option_unwrap(x) {\n  if (x !== undefined) {\n    return x.VAL;\n  } else {\n    return x;\n  }\n}\n\nexport {\n  nullable_to_opt ,\n  undefined_to_opt ,\n  null_to_opt ,\n  valFromOption ,\n  some ,\n  isNested ,\n  option_get ,\n  option_unwrap ,\n}\n/* No side effect */\n","// Generated by ReScript, PLEASE EDIT WITH CARE\n\nimport * as Caml_option from \"rescript/lib/es6/caml_option.js\";\nimport * as Core__Error from \"./Core__Error.js\";\n\nfunction filter(opt, p) {\n  if (opt !== undefined && p(Caml_option.valFromOption(opt))) {\n    return opt;\n  }\n  \n}\n\nfunction forEach(opt, f) {\n  if (opt !== undefined) {\n    return f(Caml_option.valFromOption(opt));\n  }\n  \n}\n\nfunction getExn(x, message) {\n  if (x !== undefined) {\n    return Caml_option.valFromOption(x);\n  } else {\n    return Core__Error.panic(message !== undefined ? message : \"Option.getExn called for None value\");\n  }\n}\n\nfunction mapOr(opt, $$default, f) {\n  if (opt !== undefined) {\n    return f(Caml_option.valFromOption(opt));\n  } else {\n    return $$default;\n  }\n}\n\nfunction map(opt, f) {\n  if (opt !== undefined) {\n    return Caml_option.some(f(Caml_option.valFromOption(opt)));\n  }\n  \n}\n\nfunction flatMap(opt, f) {\n  if (opt !== undefined) {\n    return f(Caml_option.valFromOption(opt));\n  }\n  \n}\n\nfunction getOr(opt, $$default) {\n  if (opt !== undefined) {\n    return Caml_option.valFromOption(opt);\n  } else {\n    return $$default;\n  }\n}\n\nfunction orElse(opt, other) {\n  if (opt !== undefined) {\n    return opt;\n  } else {\n    return other;\n  }\n}\n\nfunction isSome(x) {\n  return x !== undefined;\n}\n\nfunction isNone(x) {\n  return x === undefined;\n}\n\nfunction equal(a, b, eq) {\n  if (a !== undefined) {\n    if (b !== undefined) {\n      return eq(Caml_option.valFromOption(a), Caml_option.valFromOption(b));\n    } else {\n      return false;\n    }\n  } else {\n    return b === undefined;\n  }\n}\n\nfunction compare(a, b, cmp) {\n  if (a !== undefined) {\n    if (b !== undefined) {\n      return cmp(Caml_option.valFromOption(a), Caml_option.valFromOption(b));\n    } else {\n      return 1;\n    }\n  } else if (b !== undefined) {\n    return -1;\n  } else {\n    return 0;\n  }\n}\n\nvar mapWithDefault = mapOr;\n\nvar getWithDefault = getOr;\n\nexport {\n  filter ,\n  forEach ,\n  getExn ,\n  mapOr ,\n  mapWithDefault ,\n  map ,\n  flatMap ,\n  getOr ,\n  getWithDefault ,\n  orElse ,\n  isSome ,\n  isNone ,\n  equal ,\n  compare ,\n}\n/* No side effect */\n","// Generated by ReScript, PLEASE EDIT WITH CARE\n\n\nvar $$EvalError = {};\n\nvar $$RangeError = {};\n\nvar $$ReferenceError = {};\n\nvar $$SyntaxError = {};\n\nvar $$TypeError = {};\n\nvar $$URIError = {};\n\nfunction panic(msg) {\n  throw new Error(\"Panic! \" + msg);\n}\n\nexport {\n  $$EvalError ,\n  $$RangeError ,\n  $$ReferenceError ,\n  $$SyntaxError ,\n  $$TypeError ,\n  $$URIError ,\n  panic ,\n}\n/* No side effect */\n"],"names":["modules","entry","mainEntry","parcelRequireName","globalName","globalObject","globalThis","self","window","global","previousRequire","cache","nodeRequire","module","require","bind","newRequire","name","jumped","currentRequire","err","Error","code","localRequire","resolve","x","id","Module","call","exports","res","isParcelRequire","moduleName","bundle","parent","register","Object","defineProperty","get","i","length","mainExports","define","amd","__globalThis","parcelHelpers","defineInteropFlag","export","resizeThreshold","drawPoint","drawLine","drawRect","getColorCode","setLineDash","strokeColor","fillColor","strokeWidth","getSize","getRectSize","setCanvasById","createCanvas","initializeCanvas","duplicateCanvas","rotateCanvas","rotateCanvasCW","rotateCanvasCCW","state","isEditMode","scaleDrawSize","scalePoint","calcDist","transform","drawCheckerBoard","drawImage","drawInput","drawOutput","invokeDraw","invokeDrawInput","invokeDrawOutput","getNearestCornerPointIndex","setImage","setCorners","setCursor","setEditPointIndex","getBasename","setSaveName","loadImage","invokeLoadImage","mousemove","invokeMousemove","click","invokeClick","saveCanvas","rotatePoint","rotate","save","invokeDragOver","invokeDrop","_camlJs","_colorCodeJs","_camlInt32Js","_convexHullJs","_camlOptionJs","_coreOptionJs","canvas","pt","y","ctx","getContext","beginPath","arc","Math","PI","fillStyle","fill","pt1","pt2","x1","y1","x2","y2","moveTo","lineTo","stroke","sz","w","h","fillRect","color","arr","strokeStyle","width","lineWidth","height","$","rect","getBoundingClientRect","src_canv","tar_ctx","tar_canv","document","createElement","file","cont","reader","FileReader","readAsDataURL","onload","data","result","img","Image","src","scale","min","floor","img_canvas","newCanvas","angle","rcanvas","rctx","translate","restore","c","acos","state_canvas","contents","undefined","state_image","state_cursor","state_corners","state_editPointIndex","image","cursor","corners","editPointIndex","match","match$1","max","canvasSize","div","imul","sqrt","p1","pow","pt3","pt4","tarWidth","tarHeight","fxCanvas","fx","texture","draw","perspective","update","_c","_i","_j","j","c$1","lightGray","white","rawDrawImage","drawMarker","baseColorOpt","baseColor","black","f","t","drawFrame","cpt4","cpt3","cpt2","cpt1","getExn","RE_EXN_ID","_1","red","valFromOption","dists","map","pti","toSorted","int_compare","indexOf","hull","optIdx","last","lastIndexOf","substring","val","files","some","u","e","target","offsetX","offsetY","tmp","newPt","link","download","href","toDataURL","center","flag","shift","shift$1","cy","cx","rotator","preventDefault","originalEvent","dataTransfer","ready","on","bool_compare","float_compare","bigint_compare","string_compare","s1","s2","bool_min","int_min","float_min","string_min","bool_max","int_max","float_max","string_max","i64_eq","i64_ge","param","param$1","other_hi","hi","i64_neq","i64_lt","i64_gt","i64_le","i64_min","i64_max","interopDefault","a","__esModule","default","value","exportAll","source","dest","keys","forEach","key","prototype","hasOwnProperty","enumerable","destName","grayScale","v","console","assert","hsv","s","normalize","round","sf","vf","v$1","nh","hf","p","q","dark","gray","yellow","blue","lightBlue","orange","mod_","cross","ccw","r","qy","qx","pts","fpts","n","calcNext","currentIdx","_candidateIdx","candidateIdx","hull$1","loop","_currentIdx","push","nextIdx","isNested","BS_PRIVATE_NESTED_SOME_NONE","nullable_to_opt","undefined_to_opt","null_to_opt","depth","option_get","option_unwrap","VAL","filter","mapOr","mapWithDefault","flatMap","getOr","getWithDefault","orElse","isSome","isNone","equal","compare","_coreErrorJs","opt","message","panic","$$default","other","b","eq","cmp","$$EvalError","$$RangeError","$$ReferenceError","$$SyntaxError","$$TypeError","$$URIError","msg"],"version":3,"file":"Tidy.js.map"}