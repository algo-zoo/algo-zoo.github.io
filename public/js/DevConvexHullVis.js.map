{"mappings":"C,A,S,C,C,C,C,C,C,C,C,C,E,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,A,Y,O,C,C,E,E,C,C,E,C,E,E,K,E,C,E,E,A,a,O,Q,A,Y,O,O,O,E,O,O,C,I,C,Q,S,E,C,C,C,E,G,C,C,C,E,C,C,G,C,C,C,E,C,C,I,E,A,Y,O,C,C,E,E,C,C,E,C,G,C,G,E,O,E,E,C,G,G,E,O,E,E,C,G,G,G,A,U,O,E,O,E,G,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,O,C,S,C,E,I,E,C,C,E,C,E,C,E,C,O,A,M,E,E,C,E,E,K,C,C,E,I,E,C,C,E,C,I,E,M,C,G,C,C,E,C,E,C,I,C,E,O,C,E,E,E,O,C,E,C,O,C,C,E,C,O,C,S,E,C,E,I,E,E,O,C,G,M,A,C,I,E,C,E,E,E,C,C,E,e,C,C,E,E,M,C,S,C,E,I,C,E,C,E,I,C,M,C,E,I,C,O,C,C,C,E,E,O,C,E,E,K,C,E,E,M,C,E,E,Q,C,S,C,C,C,E,C,C,E,C,C,S,C,C,C,E,E,O,C,C,E,C,E,A,E,O,c,C,E,O,C,I,W,O,C,C,E,A,C,G,C,C,E,C,E,I,I,E,E,E,E,M,C,I,E,C,C,E,E,G,E,C,I,E,E,E,A,C,U,O,S,A,a,O,O,O,O,C,E,Y,O,Q,O,G,E,O,W,O,C,E,C,E,C,Q,C,S,C,C,C,C,C,C,C,E,I,E,E,kD,E,iB,C,GC2GA,EAAA,MAAA,CAAA,EAAA,cAAA,IACE,GA1GF,IAAA,EAAA,EAAA,mBAEA,EAAA,EAAA,kBAGA,IAAM,EAAK,CACT,EAAG,IACH,EAAG,IACH,OAAQ,EACV,EAKM,EAAQ,CACZ,OAAQ,KACR,KAAM,KACN,MAAO,IACT,EAEA,SAAS,IACP,EAAM,MAAM,CAAG,EAAE,CACjB,EAAM,IAAI,CAAG,EAAE,CACf,EAAM,KAAK,CAAG,CAChB,CA2CA,SAAS,IACH,EAAM,KAAK,CAAG,GAChB,EAAM,KAAK,EAEf,CAEA,SAAS,IACH,EAAM,KAAK,CAAG,EAAM,IAAI,CAAC,MAAM,EACjC,EAAM,KAAK,EAEf,CAEA,SAAS,IACP,IAEA,IAAK,IAAI,EAAI,EAAG,EAAI,GAAI,IAA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","sources":["<anon>","rescript/DevConvexHullVis.js","rescript/ConvexHull.js","node_modules/rescript/lib/es6/caml_int32.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","rescript/ColorCode.js"],"sourcesContent":["// modules are defined as an array\n// [ module function, map of requires ]\n//\n// map of requires is short require name -> numeric require\n//\n// anything defined in a previous bundle is accessed via the\n// orig method which is the require for previous bundles\n\n(function (modules, entry, mainEntry, parcelRequireName, globalName) {\n  /* eslint-disable no-undef */\n  var globalObject =\n    typeof globalThis !== 'undefined'\n      ? globalThis\n      : typeof self !== 'undefined'\n      ? self\n      : typeof window !== 'undefined'\n      ? window\n      : typeof global !== 'undefined'\n      ? global\n      : {};\n  /* eslint-enable no-undef */\n\n  // Save the require from previous bundle to this closure if any\n  var previousRequire =\n    typeof globalObject[parcelRequireName] === 'function' &&\n    globalObject[parcelRequireName];\n\n  var cache = previousRequire.cache || {};\n  // Do not use `require` to prevent Webpack from trying to bundle this call\n  var nodeRequire =\n    typeof module !== 'undefined' &&\n    typeof module.require === 'function' &&\n    module.require.bind(module);\n\n  function newRequire(name, jumped) {\n    if (!cache[name]) {\n      if (!modules[name]) {\n        // if we cannot find the module within our internal map or\n        // cache jump to the current global require ie. the last bundle\n        // that was added to the page.\n        var currentRequire =\n          typeof globalObject[parcelRequireName] === 'function' &&\n          globalObject[parcelRequireName];\n        if (!jumped && currentRequire) {\n          return currentRequire(name, true);\n        }\n\n        // If there are other bundles on this page the require from the\n        // previous one is saved to 'previousRequire'. Repeat this as\n        // many times as there are bundles until the module is found or\n        // we exhaust the require chain.\n        if (previousRequire) {\n          return previousRequire(name, true);\n        }\n\n        // Try the node require function if it exists.\n        if (nodeRequire && typeof name === 'string') {\n          return nodeRequire(name);\n        }\n\n        var err = new Error(\"Cannot find module '\" + name + \"'\");\n        err.code = 'MODULE_NOT_FOUND';\n        throw err;\n      }\n\n      localRequire.resolve = resolve;\n      localRequire.cache = {};\n\n      var module = (cache[name] = new newRequire.Module(name));\n\n      modules[name][0].call(\n        module.exports,\n        localRequire,\n        module,\n        module.exports,\n        globalObject\n      );\n    }\n\n    return cache[name].exports;\n\n    function localRequire(x) {\n      var res = localRequire.resolve(x);\n      return res === false ? {} : newRequire(res);\n    }\n\n    function resolve(x) {\n      var id = modules[name][1][x];\n      return id != null ? id : x;\n    }\n  }\n\n  function Module(moduleName) {\n    this.id = moduleName;\n    this.bundle = newRequire;\n    this.exports = {};\n  }\n\n  newRequire.isParcelRequire = true;\n  newRequire.Module = Module;\n  newRequire.modules = modules;\n  newRequire.cache = cache;\n  newRequire.parent = previousRequire;\n  newRequire.register = function (id, exports) {\n    modules[id] = [\n      function (require, module) {\n        module.exports = exports;\n      },\n      {},\n    ];\n  };\n\n  Object.defineProperty(newRequire, 'root', {\n    get: function () {\n      return globalObject[parcelRequireName];\n    },\n  });\n\n  globalObject[parcelRequireName] = newRequire;\n\n  for (var i = 0; i < entry.length; i++) {\n    newRequire(entry[i]);\n  }\n\n  if (mainEntry) {\n    // Expose entry point to Node, AMD or browser globals\n    // Based on https://github.com/ForbesLindesay/umd/blob/master/template.js\n    var mainExports = newRequire(mainEntry);\n\n    // CommonJS\n    if (typeof exports === 'object' && typeof module !== 'undefined') {\n      module.exports = mainExports;\n\n      // RequireJS\n    } else if (typeof define === 'function' && define.amd) {\n      define(function () {\n        return mainExports;\n      });\n\n      // <script>\n    } else if (globalName) {\n      this[globalName] = mainExports;\n    }\n  }\n})({\"93Bis\":[function(require,module,exports,__globalThis) {\n// Generated by ReScript, PLEASE EDIT WITH CARE\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"convex_hull\", ()=>convex_hull) /*  Not a pure module */ ;\nvar _convexHullJs = require(\"./ConvexHull.js\");\nvar _colorCodeJs = require(\"./ColorCode.js\");\n// ==== constant value ====\nconst cv = {\n    w: 1000,\n    h: 1000,\n    node_r: 15\n};\nconst text_size = 24;\n// ========\nconst state = {\n    points: null,\n    hull: null,\n    depth: null\n};\nfunction initialize() {\n    state.points = [];\n    state.hull = [];\n    state.depth = 0;\n}\nwindow.setup = function() {\n    const canvas = createCanvas(cv.w, cv.h);\n    canvas.parent('canvas-hole');\n// textSize(text_size);\n// noLoop();\n};\nwindow.draw = function() {\n    background(200);\n    for (const [x, y] of state.points){\n        fill.apply(null, (0, _colorCodeJs.white));\n        circle(x, y, cv.node_r);\n    }\n    const len = min(state.depth, state.hull.length);\n    for(let i = 0; i < len; i++){\n        const [px, py] = state.hull[i];\n        const [qx, qy] = state.hull[(i + 1) % len];\n        line(px, py, qx, qy);\n    }\n    for(let i = 0; i < len; i++){\n        fill.apply(null, (0, _colorCodeJs.red));\n        const [x, y] = state.hull[i];\n        circle(x, y, cv.node_r);\n    }\n};\nfunction mouseReleased() {\n    const pt = [\n        parseInt(mouseX),\n        parseInt(mouseY)\n    ];\n    const [x, y] = pt;\n    if (0 <= x && x < cv.w && 0 <= y && y < cv.h) {\n        state.points.push(pt);\n        run();\n    }\n}\nfunction run() {\n    state.hull = convex_hull(state.points);\n    state.depth = 0;\n}\nfunction prev_btn() {\n    if (state.depth > 0) state.depth--;\n}\nfunction next_btn() {\n    if (state.depth < state.hull.length) state.depth++;\n}\nfunction random_btn() {\n    initialize();\n    const offset = 100;\n    for(let i = 0; i < 50; i++){\n        const x = offset + Math.floor(Math.random() * (cv.w - 2 * offset));\n        const y = offset + Math.floor(Math.random() * (cv.h - 2 * offset));\n        state.points.push([\n            x,\n            y\n        ]);\n    }\n    run();\n}\nfunction reset_btn() {\n    initialize();\n}\n$(document).ready(function() {\n    $('#random').click(random_btn);\n    $('#reset').click(reset_btn);\n    $('#prev').click(prev_btn);\n    $('#next').click(next_btn);\n    initialize();\n});\nvar convex_hull = _convexHullJs.hull;\n\n},{\"./ConvexHull.js\":\"9oJS8\",\"./ColorCode.js\":\"fgi4l\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"jBTt3\"}],\"9oJS8\":[function(require,module,exports,__globalThis) {\n// Generated by ReScript, PLEASE EDIT WITH CARE\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"cross\", ()=>cross) /* No side effect */ ;\nparcelHelpers.export(exports, \"ccw\", ()=>ccw);\nparcelHelpers.export(exports, \"hull\", ()=>hull);\nvar _camlInt32Js = require(\"rescript/lib/es6/caml_int32.js\");\nfunction cross(pt1, pt2) {\n    return pt1[0] * pt2[1] - pt1[1] * pt2[0];\n}\nfunction ccw(p, q, r) {\n    var qy = q[1];\n    var qx = q[0];\n    var pq_0 = qx - p[0];\n    var pq_1 = qy - p[1];\n    var pq = [\n        pq_0,\n        pq_1\n    ];\n    var qr_0 = r[0] - qx;\n    var qr_1 = r[1] - qy;\n    var qr = [\n        qr_0,\n        qr_1\n    ];\n    return cross(pq, qr) > 0.0;\n}\nfunction hull(pts) {\n    var fpts = pts.map(function(v) {\n        return [\n            v[0],\n            v[1]\n        ];\n    }).toSorted(function(pt1, pt2) {\n        return pt1[0] + pt1[1] - (pt2[0] + pt2[1]);\n    });\n    var n = fpts.length;\n    var calcNext = function(currentIdx) {\n        var _i = 0;\n        var _candidateIdx = _camlInt32Js.mod_(currentIdx + 1 | 0, n);\n        while(true){\n            var candidateIdx = _candidateIdx;\n            var i = _i;\n            if (i >= n) return candidateIdx;\n            var next = ccw(fpts[currentIdx], fpts[i], fpts[candidateIdx]) ? i : candidateIdx;\n            _candidateIdx = next;\n            _i = i + 1 | 0;\n            continue;\n        }\n    };\n    if (n <= 2) return [];\n    var hull$1 = [];\n    var loop = function(_currentIdx) {\n        while(true){\n            var currentIdx = _currentIdx;\n            var match = fpts[currentIdx];\n            hull$1.push([\n                match[0] | 0,\n                match[1] | 0\n            ]);\n            var nextIdx = calcNext(currentIdx);\n            if (nextIdx === 0) return;\n            _currentIdx = nextIdx;\n            continue;\n        }\n    };\n    loop(0);\n    return hull$1;\n}\n\n},{\"rescript/lib/es6/caml_int32.js\":\"aniu3\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"jBTt3\"}],\"aniu3\":[function(require,module,exports,__globalThis) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"div\", ()=>div) /* No side effect */ ;\nparcelHelpers.export(exports, \"mod_\", ()=>mod_);\nfunction div(x, y) {\n    if (y === 0) throw {\n        RE_EXN_ID: \"Division_by_zero\",\n        Error: new Error()\n    };\n    return x / y | 0;\n}\nfunction mod_(x, y) {\n    if (y === 0) throw {\n        RE_EXN_ID: \"Division_by_zero\",\n        Error: new Error()\n    };\n    return x % y;\n}\n\n},{\"@parcel/transformer-js/src/esmodule-helpers.js\":\"jBTt3\"}],\"jBTt3\":[function(require,module,exports,__globalThis) {\nexports.interopDefault = function(a) {\n    return a && a.__esModule ? a : {\n        default: a\n    };\n};\nexports.defineInteropFlag = function(a) {\n    Object.defineProperty(a, '__esModule', {\n        value: true\n    });\n};\nexports.exportAll = function(source, dest) {\n    Object.keys(source).forEach(function(key) {\n        if (key === 'default' || key === '__esModule' || Object.prototype.hasOwnProperty.call(dest, key)) return;\n        Object.defineProperty(dest, key, {\n            enumerable: true,\n            get: function() {\n                return source[key];\n            }\n        });\n    });\n    return dest;\n};\nexports.export = function(dest, destName, get) {\n    Object.defineProperty(dest, destName, {\n        enumerable: true,\n        get: get\n    });\n};\n\n},{}],\"fgi4l\":[function(require,module,exports,__globalThis) {\n// Generated by ReScript, PLEASE EDIT WITH CARE\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"grayScale\", ()=>grayScale) /* black Not a pure module */ ;\nparcelHelpers.export(exports, \"hsv\", ()=>hsv);\nparcelHelpers.export(exports, \"black\", ()=>black);\nparcelHelpers.export(exports, \"dark\", ()=>dark);\nparcelHelpers.export(exports, \"gray\", ()=>gray);\nparcelHelpers.export(exports, \"lightGray\", ()=>lightGray);\nparcelHelpers.export(exports, \"white\", ()=>white);\nparcelHelpers.export(exports, \"red\", ()=>red);\nparcelHelpers.export(exports, \"yellow\", ()=>yellow);\nparcelHelpers.export(exports, \"blue\", ()=>blue);\nparcelHelpers.export(exports, \"lightBlue\", ()=>lightBlue);\nparcelHelpers.export(exports, \"orange\", ()=>orange);\nfunction grayScale(v) {\n    console.assert(0 <= v && v <= 255, \"Scale error\");\n    return [\n        v,\n        v,\n        v\n    ];\n}\nfunction hsv(h, s, v) {\n    console.assert(0 <= h && h <= 360, \"Scale error\");\n    console.assert(0 <= s && s <= 100, \"Scale error\");\n    console.assert(0 <= v && v <= 100, \"Scale error\");\n    var normalize = function(x) {\n        return Math.round(x * 255.0) | 0;\n    };\n    var hf = h;\n    var sf = s / 100.0;\n    var vf = v / 100.0;\n    if (s === 0) {\n        var v$1 = normalize(vf);\n        return [\n            v$1,\n            v$1,\n            v$1\n        ];\n    }\n    var nh = hf / 60.0;\n    var i = Math.floor(nh) | 0;\n    var f = nh - i;\n    var p = vf * (1.0 - sf);\n    var q = vf * (1.0 - sf * f);\n    var t = vf * (1.0 - sf * (1.0 - f));\n    var match;\n    switch(i){\n        case 0:\n            match = [\n                vf,\n                t,\n                p\n            ];\n            break;\n        case 1:\n            match = [\n                q,\n                vf,\n                p\n            ];\n            break;\n        case 2:\n            match = [\n                p,\n                vf,\n                t\n            ];\n            break;\n        case 3:\n            match = [\n                p,\n                q,\n                vf\n            ];\n            break;\n        case 4:\n            match = [\n                t,\n                p,\n                vf\n            ];\n            break;\n        default:\n            match = [\n                vf,\n                p,\n                q\n            ];\n    }\n    var r = normalize(match[0]);\n    var g = normalize(match[1]);\n    var b = normalize(match[2]);\n    return [\n        r,\n        g,\n        b\n    ];\n}\nvar black = grayScale(0);\nvar dark = grayScale(30);\nvar gray = grayScale(120);\nvar lightGray = grayScale(180);\nvar white = grayScale(255);\nvar red = hsv(18, 80, 100);\nvar yellow = hsv(57, 80, 100);\nvar blue = hsv(200, 80, 100);\nvar lightBlue = hsv(200, 20, 100);\nvar orange = hsv(40, 80, 100);\n\n},{\"@parcel/transformer-js/src/esmodule-helpers.js\":\"jBTt3\"}]},[\"93Bis\"], \"93Bis\", \"parcelRequire94c2\")\n\n//# sourceMappingURL=DevConvexHullVis.js.map\n","// Generated by ReScript, PLEASE EDIT WITH CARE\n\nimport * as ConvexHull from \"./ConvexHull.js\";\n\nimport { red, white } from './ColorCode.js'\n\n// ==== constant value ====\nconst cv = {\n  w: 1000,\n  h: 1000,\n  node_r: 15,\n}\n\nconst text_size = 24;\n// ========\n\nconst state = {\n  points: null,\n  hull: null,\n  depth: null\n}\n\nfunction initialize() {\n  state.points = [];\n  state.hull = [];\n  state.depth = 0;\n}\n\nwindow.setup = function() {\n  const canvas = createCanvas(cv.w, cv.h);\n  canvas.parent('canvas-hole');\n  // textSize(text_size);\n  // noLoop();\n}\n\nwindow.draw = function() {\n  background(200);\n  for (const [x, y] of state.points) {\n    fill.apply(null, white);\n    circle(x, y, cv.node_r);\n  }\n  const len = min(state.depth, state.hull.length);\n  for (let i = 0; i < len; i++) {\n    const [px, py] = state.hull[i];\n    const [qx, qy] = state.hull[(i+1)%len];\n    line(px, py, qx, qy);\n  }\n  for (let i = 0; i < len; i++) {\n    fill.apply(null, red);\n    const [x, y] = state.hull[i];\n    circle(x, y, cv.node_r);\n  }\n}\n\n\nfunction mouseReleased() {\n  const pt = [ parseInt(mouseX), parseInt(mouseY) ];\n  const [x, y] = pt;\n  if (0 <= x && x < cv.w && 0 <= y && y < cv.h) {\n    state.points.push(pt);\n    run();\n  }\n}\n\nfunction run() {\n  state.hull = convex_hull(state.points);\n  state.depth = 0;\n}\n\nfunction prev_btn() {\n  if (state.depth > 0) {\n    state.depth--;\n  }\n}\n\nfunction next_btn() {\n  if (state.depth < state.hull.length) {\n    state.depth++;\n  }\n}\n\nfunction random_btn() {\n  initialize();\n  const offset = 100;\n  for (let i = 0; i < 50; i++) {\n    const x = offset + Math.floor(Math.random() * (cv.w - 2*offset));\n    const y = offset + Math.floor(Math.random() * (cv.h - 2*offset));\n    state.points.push([ x, y ]);\n  }\n  run();\n}\n\nfunction reset_btn() {\n  initialize();\n}\n\n$(document).ready(function() {\n  $('#random').click(random_btn);\n  $('#reset').click(reset_btn);\n  $('#prev').click(prev_btn);\n  $('#next').click(next_btn);\n  initialize();\n});\n;\n\nvar convex_hull = ConvexHull.hull;\n\nexport {\n  convex_hull ,\n}\n/*  Not a pure module */\n","// Generated by ReScript, PLEASE EDIT WITH CARE\n\nimport * as Caml_int32 from \"rescript/lib/es6/caml_int32.js\";\n\nfunction cross(pt1, pt2) {\n  return pt1[0] * pt2[1] - pt1[1] * pt2[0];\n}\n\nfunction ccw(p, q, r) {\n  var qy = q[1];\n  var qx = q[0];\n  var pq_0 = qx - p[0];\n  var pq_1 = qy - p[1];\n  var pq = [\n    pq_0,\n    pq_1\n  ];\n  var qr_0 = r[0] - qx;\n  var qr_1 = r[1] - qy;\n  var qr = [\n    qr_0,\n    qr_1\n  ];\n  return cross(pq, qr) > 0.0;\n}\n\nfunction hull(pts) {\n  var fpts = pts.map(function (v) {\n          return [\n                  v[0],\n                  v[1]\n                ];\n        }).toSorted(function (pt1, pt2) {\n        return pt1[0] + pt1[1] - (pt2[0] + pt2[1]);\n      });\n  var n = fpts.length;\n  var calcNext = function (currentIdx) {\n    var _i = 0;\n    var _candidateIdx = Caml_int32.mod_(currentIdx + 1 | 0, n);\n    while(true) {\n      var candidateIdx = _candidateIdx;\n      var i = _i;\n      if (i >= n) {\n        return candidateIdx;\n      }\n      var next = ccw(fpts[currentIdx], fpts[i], fpts[candidateIdx]) ? i : candidateIdx;\n      _candidateIdx = next;\n      _i = i + 1 | 0;\n      continue ;\n    };\n  };\n  if (n <= 2) {\n    return [];\n  }\n  var hull$1 = [];\n  var loop = function (_currentIdx) {\n    while(true) {\n      var currentIdx = _currentIdx;\n      var match = fpts[currentIdx];\n      hull$1.push([\n            match[0] | 0,\n            match[1] | 0\n          ]);\n      var nextIdx = calcNext(currentIdx);\n      if (nextIdx === 0) {\n        return ;\n      }\n      _currentIdx = nextIdx;\n      continue ;\n    };\n  };\n  loop(0);\n  return hull$1;\n}\n\nexport {\n  cross ,\n  ccw ,\n  hull ,\n}\n/* No side effect */\n","\n\n\nfunction div(x, y) {\n  if (y === 0) {\n    throw {\n          RE_EXN_ID: \"Division_by_zero\",\n          Error: new Error()\n        };\n  }\n  return x / y | 0;\n}\n\nfunction mod_(x, y) {\n  if (y === 0) {\n    throw {\n          RE_EXN_ID: \"Division_by_zero\",\n          Error: new Error()\n        };\n  }\n  return x % y;\n}\n\nexport {\n  div ,\n  mod_ ,\n}\n/* No side effect */\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (\n      key === 'default' ||\n      key === '__esModule' ||\n      Object.prototype.hasOwnProperty.call(dest, key)\n    ) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","// Generated by ReScript, PLEASE EDIT WITH CARE\n\n\nfunction grayScale(v) {\n  console.assert(0 <= v && v <= 255, \"Scale error\");\n  return [\n          v,\n          v,\n          v\n        ];\n}\n\nfunction hsv(h, s, v) {\n  console.assert(0 <= h && h <= 360, \"Scale error\");\n  console.assert(0 <= s && s <= 100, \"Scale error\");\n  console.assert(0 <= v && v <= 100, \"Scale error\");\n  var normalize = function (x) {\n    return Math.round(x * 255.0) | 0;\n  };\n  var hf = h;\n  var sf = s / 100.0;\n  var vf = v / 100.0;\n  if (s === 0) {\n    var v$1 = normalize(vf);\n    return [\n            v$1,\n            v$1,\n            v$1\n          ];\n  }\n  var nh = hf / 60.0;\n  var i = Math.floor(nh) | 0;\n  var f = nh - i;\n  var p = vf * (1.0 - sf);\n  var q = vf * (1.0 - sf * f);\n  var t = vf * (1.0 - sf * (1.0 - f));\n  var match;\n  switch (i) {\n    case 0 :\n        match = [\n          vf,\n          t,\n          p\n        ];\n        break;\n    case 1 :\n        match = [\n          q,\n          vf,\n          p\n        ];\n        break;\n    case 2 :\n        match = [\n          p,\n          vf,\n          t\n        ];\n        break;\n    case 3 :\n        match = [\n          p,\n          q,\n          vf\n        ];\n        break;\n    case 4 :\n        match = [\n          t,\n          p,\n          vf\n        ];\n        break;\n    default:\n      match = [\n        vf,\n        p,\n        q\n      ];\n  }\n  var r = normalize(match[0]);\n  var g = normalize(match[1]);\n  var b = normalize(match[2]);\n  return [\n          r,\n          g,\n          b\n        ];\n}\n\nvar black = grayScale(0);\n\nvar dark = grayScale(30);\n\nvar gray = grayScale(120);\n\nvar lightGray = grayScale(180);\n\nvar white = grayScale(255);\n\nvar red = hsv(18, 80, 100);\n\nvar yellow = hsv(57, 80, 100);\n\nvar blue = hsv(200, 80, 100);\n\nvar lightBlue = hsv(200, 20, 100);\n\nvar orange = hsv(40, 80, 100);\n\nexport {\n  grayScale ,\n  hsv ,\n  black ,\n  dark ,\n  gray ,\n  lightGray ,\n  white ,\n  red ,\n  yellow ,\n  blue ,\n  lightBlue ,\n  orange ,\n}\n/* black Not a pure module */\n"],"names":["modules","entry","mainEntry","parcelRequireName","globalName","globalObject","globalThis","self","window","global","previousRequire","cache","nodeRequire","module","require","bind","newRequire","name","jumped","currentRequire","err","Error","code","localRequire","resolve","x","id","Module","call","exports","res","isParcelRequire","moduleName","bundle","parent","register","Object","defineProperty","get","i","length","mainExports","define","amd","__globalThis","parcelHelpers","defineInteropFlag","export","convex_hull","_convexHullJs","_colorCodeJs","cv","w","h","node_r","state","points","hull","depth","initialize","prev_btn","next_btn","random_btn","offset","Math","floor","random","y","push","reset_btn","setup","canvas","createCanvas","draw","background","fill","apply","white","circle","len","min","px","py","qx","qy","line","red","$","document","ready","click","cross","ccw","_camlInt32Js","pt1","pt2","p","q","r","pts","fpts","map","v","toSorted","n","calcNext","currentIdx","_i","_candidateIdx","mod_","candidateIdx","hull$1","loop","_currentIdx","match","nextIdx","div","RE_EXN_ID","interopDefault","a","__esModule","default","value","exportAll","source","dest","keys","forEach","key","prototype","hasOwnProperty","enumerable","destName","grayScale","console","assert","hsv","s","normalize","round","sf","vf","v$1","nh","hf","f","t","black","dark","gray","lightGray","yellow","blue","lightBlue","orange"],"version":3,"file":"DevConvexHullVis.js.map"}