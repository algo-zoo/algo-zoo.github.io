!function(r,e,t,o,n){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a="function"==typeof i[o]&&i[o],u=a.cache||{},s="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function l(e,t){if(!u[e]){if(!r[e]){var n="function"==typeof i[o]&&i[o];if(!t&&n)return n(e,!0);if(a)return a(e,!0);if(s&&"string"==typeof e)return s(e);var f=Error("Cannot find module '"+e+"'");throw f.code="MODULE_NOT_FOUND",f}c.resolve=function(t){var o=r[e][1][t];return null!=o?o:t},c.cache={};var p=u[e]=new l.Module(e);r[e][0].call(p.exports,c,p,p.exports,i)}return u[e].exports;function c(r){var e=c.resolve(r);return!1===e?{}:l(e)}}l.isParcelRequire=!0,l.Module=function(r){this.id=r,this.bundle=l,this.exports={}},l.modules=r,l.cache=u,l.parent=a,l.register=function(e,t){r[e]=[function(r,e){e.exports=t},{}]},Object.defineProperty(l,"root",{get:function(){return i[o]}}),i[o]=l;for(var f=0;f<e.length;f++)l(e[f]);if(t){var p=l(t);"object"==typeof exports&&"undefined"!=typeof module?module.exports=p:"function"==typeof define&&define.amd&&define(function(){return p})}}({dAPiW:[function(r,e,t,o){var n=r("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(t),n.export(t,"boxSize",()=>p),n.export(t,"state",()=>c),n.export(t,"drawBox",()=>d),n.export(t,"drawStack",()=>v),n.export(t,"loadProgram",()=>x),n.export(t,"getStackState",()=>m),n.export(t,"draw",()=>h),n.export(t,"createCanvas",()=>j),n.export(t,"initializeStack",()=>g),n.export(t,"setup",()=>_),n.export(t,"prev",()=>E),n.export(t,"next",()=>O);var i=r("./P5.js"),a=r("./DrawUtil.js"),u=r("./ColorCode.js"),s=r("@rescript/core/src/Core__Int.js"),l=r("@rescript/core/src/Core__Array.js"),f=r("@rescript/core/src/Core__Option.js"),p=(Math.sqrt(2)*a.nodeRadius|0)<<1,c={index:{contents:0}};function d(r,e){strokeWeight(a.strokeWeight),i.fillColor(u.lightBlue),rect(r-(p/2|0)|0,e-(p/2|0)|0,p,p)}function v(r){var e=(p/2|0)+p|0;r.toReversed().forEach(function(r,t){var o=e+Math.imul(t,p+15|0)|0,n=p+(p/2|0)|0;d(o,n),a.drawNode(o,n,String(r))});var t=r.length,o=(e-(p/2|0)|0)-15|0,n=(o+Math.imul(t,p+15|0)|0)+15|0,i=p-15|0,u=(p+p|0)+15|0;strokeWeight(a.strokeWeight<<1),line(o,i,n,i),line(o,u,n,u),line(n,i,n,u)}function x(){var r=$("#program").val(),e=RegExp("push\\((\\d+)\\)"),t=RegExp("pop\\(\\)");return l.keepSome(r.split("\n").map(function(r){var o=e.exec(r);if(null==o)return t.test(r)?"Pop":void 0;var n=o.slice(1)[0];return{TAG:"Push",_0:f.getExn(s.fromString(n,void 0),void 0)}}))}function m(r){var e=x();console.assert(0<=r&&r<=e.length,"Range error");for(var t=[],o=0;;){var n=o;if(r===n)return t;var i=e[n];"object"!=typeof i?t.pop():t.push(i._0),o=n+1|0}}function h(){background(200),v(m(c.index.contents))}function j(){createCanvas(1e3,1e3).parent("canvas-hole"),noLoop()}function g(){$("#program").val("push(4)\npush(2)\npush(9)\npop()\npush(1)\npop()\npush(9)\npush(7)\npush(6)"),c.index.contents=0}function _(){j(),g()}function E(){c.index.contents=c.index.contents-1|0}function O(){c.index.contents=c.index.contents+1|0}$(document).ready(function(){[["#prev",E],["#next",O]].forEach(function(r){var e=r[1];$(r[0]).on("click",function(){e(),redraw()})})}),window.setup=_,window.draw=h},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3","./P5.js":"kRQjY","./ColorCode.js":"fgi4l","@rescript/core/src/Core__Array.js":"kmH7i","@rescript/core/src/Core__Int.js":"da5Bi","@rescript/core/src/Core__Option.js":"4Dake","./DrawUtil.js":"d335M"}],jBTt3:[function(r,e,t,o){t.interopDefault=function(r){return r&&r.__esModule?r:{default:r}},t.defineInteropFlag=function(r){Object.defineProperty(r,"__esModule",{value:!0})},t.exportAll=function(r,e){return Object.keys(r).forEach(function(t){"default"===t||"__esModule"===t||Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}),e},t.export=function(r,e,t){Object.defineProperty(r,e,{enumerable:!0,get:t})}},{}],kRQjY:[function(r,e,t,o){var n=r("@parcel/transformer-js/src/esmodule-helpers.js");function i(r){fill.apply(null,r)}n.defineInteropFlag(t),n.export(t,"fillColor",()=>i)},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],fgi4l:[function(r,e,t,o){var n=r("@parcel/transformer-js/src/esmodule-helpers.js");function i(r){return console.assert(0<=r&&r<=255,"Scale error"),[r,r,r]}function a(r,e,t){console.assert(0<=r&&r<=360,"Scale error"),console.assert(0<=e&&e<=100,"Scale error"),console.assert(0<=t&&t<=100,"Scale error");var o,n=function(r){return 0|Math.round(255*r)},i=e/100,a=t/100;if(0===e){var u=n(a);return[u,u,u]}var s=r/60,l=0|Math.floor(s),f=s-l,p=a*(1-i),c=a*(1-i*f),d=a*(1-i*(1-f));switch(l){case 0:o=[a,d,p];break;case 1:o=[c,a,p];break;case 2:o=[p,a,d];break;case 3:o=[p,c,a];break;case 4:o=[d,p,a];break;default:o=[a,p,c]}return[n(o[0]),n(o[1]),n(o[2])]}n.defineInteropFlag(t),n.export(t,"grayScale",()=>i),n.export(t,"hsv",()=>a),n.export(t,"black",()=>u),n.export(t,"dark",()=>s),n.export(t,"gray",()=>l),n.export(t,"lightGray",()=>f),n.export(t,"pale",()=>p),n.export(t,"white",()=>c),n.export(t,"red",()=>d),n.export(t,"yellow",()=>v),n.export(t,"blue",()=>x),n.export(t,"lightBlue",()=>m),n.export(t,"orange",()=>h);var u=i(0),s=i(30),l=i(50),f=i(80),p=i(180),c=i(255),d=a(18,80,100),v=a(57,80,100),x=a(200,80,100),m=a(200,20,100),h=a(40,80,100)},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],kmH7i:[function(r,e,t,o){var n=r("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(t),n.export(t,"make",()=>a),n.export(t,"fromInitializer",()=>u),n.export(t,"equal",()=>s),n.export(t,"compare",()=>l),n.export(t,"indexOfOpt",()=>f),n.export(t,"lastIndexOfOpt",()=>p),n.export(t,"reduce",()=>c),n.export(t,"reduceWithIndex",()=>d),n.export(t,"reduceRight",()=>v),n.export(t,"reduceRightWithIndex",()=>x),n.export(t,"findIndexOpt",()=>m),n.export(t,"filterMap",()=>g),n.export(t,"keepSome",()=>_),n.export(t,"toShuffled",()=>j),n.export(t,"shuffle",()=>h),n.export(t,"findMap",()=>E),n.export(t,"last",()=>O);var i=r("rescript/lib/es6/caml_option.js");function a(r,e){if(r<=0)return[];var t=Array(r);return t.fill(e),t}function u(r,e){if(r<=0)return[];for(var t=Array(r),o=0;o<r;++o)t[o]=e(o);return t}function s(r,e,t){var o=r.length;if(o!==e.length)return!1;for(var n=0;;){var i=n;if(i===o)return!0;if(!t(r[i],e[i]))return!1;n=i+1|0}}function l(r,e,t){var o=r.length,n=e.length;if(o<n)return -1;if(o>n)return 1;for(var i=0;;){var a=i;if(a===o)return 0;var u=t(r[a],e[a]);if(0!==u)return u;i=a+1|0}}function f(r,e){var t=r.indexOf(e);if(-1!==t)return t}function p(r,e){var t=r.lastIndexOf(e);if(-1!==t)return t}function c(r,e,t){return r.reduce(t,e)}function d(r,e,t){return r.reduce(t,e)}function v(r,e,t){return r.reduceRight(t,e)}function x(r,e,t){return r.reduceRight(t,e)}function m(r,e){var t=r.findIndex(e);if(-1!==t)return t}function h(r){for(var e,t=r.length,o=0;o<t;++o)!function(r,e,t){var o=r[e];r[e]=r[t],r[t]=o}(r,o,(0|Math.floor(Math.random()*(t-(e=o)|0)))+e|0)}function j(r){var e=r.slice();return h(e),e}function g(r,e){for(var t=r.length,o=Array(t),n=0,a=0;a<t;++a){var u=e(r[a]);void 0!==u&&(o[n]=i.valFromOption(u),n=n+1|0)}return o.length=n,o}function _(r){return g(r,function(r){return r})}function E(r,e){for(var t=0;;){var o=t;if(o===r.length)return;var n=e(r[o]);if(void 0!==n)return n;t=o+1|0}}function O(r){return r[r.length-1|0]}},{"rescript/lib/es6/caml_option.js":"lBDcT","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],lBDcT:[function(r,e,t,o){var n=r("@parcel/transformer-js/src/esmodule-helpers.js");function i(r){return void 0!==r.BS_PRIVATE_NESTED_SOME_NONE}function a(r){return void 0===r?{BS_PRIVATE_NESTED_SOME_NONE:0}:null!==r&&void 0!==r.BS_PRIVATE_NESTED_SOME_NONE?{BS_PRIVATE_NESTED_SOME_NONE:r.BS_PRIVATE_NESTED_SOME_NONE+1|0}:r}function u(r){if(null!=r)return a(r)}function s(r){if(void 0!==r)return a(r)}function l(r){if(null!==r)return a(r)}function f(r){if(null===r||void 0===r.BS_PRIVATE_NESTED_SOME_NONE)return r;var e=r.BS_PRIVATE_NESTED_SOME_NONE;if(0!==e)return{BS_PRIVATE_NESTED_SOME_NONE:e-1|0}}function p(r){if(void 0!==r)return f(r)}function c(r){return void 0!==r?r.VAL:r}n.defineInteropFlag(t),n.export(t,"nullable_to_opt",()=>u),n.export(t,"undefined_to_opt",()=>s),n.export(t,"null_to_opt",()=>l),n.export(t,"valFromOption",()=>f),n.export(t,"some",()=>a),n.export(t,"isNested",()=>i),n.export(t,"option_get",()=>p),n.export(t,"option_unwrap",()=>c)},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],da5Bi:[function(r,e,t,o){var n=r("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(t),n.export(t,"Constants",()=>p),n.export(t,"fromString",()=>a),n.export(t,"range",()=>u),n.export(t,"rangeWithOptions",()=>s),n.export(t,"clamp",()=>l),n.export(t,"Bitwise",()=>f);var i=r("./Core__Array.js");function a(r,e){var t=void 0!==e?parseInt(r,e):parseInt(r);if(!isNaN(t)&&!(t>0x7fffffff)&&!(t<-0x80000000))return 0|t}function u(r,e,t){var o,n,a=void 0!==t?t:{},u=r>e,s=a.step;if(void 0!==s){if(0!==s)o=s;else{if(r!==e)throw RangeError("Incorrect range arguments");o=s}}else o=u?-1:1;if(u===o>=0)n=0;else if(0===o)n=+(!0===a.inclusive);else{var l,f=u?r-e|0:e-r|0;n=0|Math.ceil((!0===a.inclusive?f+1|0:f)/((l=o)>=0?l:0|-l))}return i.fromInitializer(n,function(e){return r+Math.imul(e,o)|0})}function s(r,e,t){return u(r,e,t)}function l(r,e,t){var o=void 0!==e&&e<t?e:t;return void 0!==r&&r>o?r:o}var f={lnot:function(r){return -1^r}},p={minValue:-0x80000000,maxValue:0x7fffffff}},{"./Core__Array.js":"kmH7i","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],"4Dake":[function(r,e,t,o){var n=r("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(t),n.export(t,"filter",()=>u),n.export(t,"forEach",()=>s),n.export(t,"getExn",()=>l),n.export(t,"mapOr",()=>f),n.export(t,"mapWithDefault",()=>g),n.export(t,"map",()=>p),n.export(t,"flatMap",()=>c),n.export(t,"getOr",()=>d),n.export(t,"getWithDefault",()=>_),n.export(t,"orElse",()=>v),n.export(t,"isSome",()=>x),n.export(t,"isNone",()=>m),n.export(t,"equal",()=>h),n.export(t,"compare",()=>j);var i=r("rescript/lib/es6/caml_option.js"),a=r("./Core__Error.js");function u(r,e){if(void 0!==r&&e(i.valFromOption(r)))return r}function s(r,e){if(void 0!==r)return e(i.valFromOption(r))}function l(r,e){return void 0!==r?i.valFromOption(r):a.panic(void 0!==e?e:"Option.getExn called for None value")}function f(r,e,t){return void 0!==r?t(i.valFromOption(r)):e}function p(r,e){if(void 0!==r)return i.some(e(i.valFromOption(r)))}function c(r,e){if(void 0!==r)return e(i.valFromOption(r))}function d(r,e){return void 0!==r?i.valFromOption(r):e}function v(r,e){return void 0!==r?r:e}function x(r){return void 0!==r}function m(r){return void 0===r}function h(r,e,t){return void 0===r?void 0===e:void 0!==e&&t(i.valFromOption(r),i.valFromOption(e))}function j(r,e,t){return void 0!==r?void 0!==e?t(i.valFromOption(r),i.valFromOption(e)):1:void 0!==e?-1:0}var g=f,_=d},{"rescript/lib/es6/caml_option.js":"lBDcT","./Core__Error.js":"gydnd","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],gydnd:[function(r,e,t,o){var n=r("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(t),n.export(t,"$$EvalError",()=>i),n.export(t,"$$RangeError",()=>a),n.export(t,"$$ReferenceError",()=>u),n.export(t,"$$SyntaxError",()=>s),n.export(t,"$$TypeError",()=>l),n.export(t,"$$URIError",()=>f),n.export(t,"panic",()=>p);var i={},a={},u={},s={},l={},f={};function p(r){throw Error("Panic! "+r)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],d335M:[function(r,e,t,o){var n=r("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(t),n.export(t,"strokeWeight",()=>s),n.export(t,"textSize",()=>l),n.export(t,"nodeRadius",()=>f),n.export(t,"drawNode",()=>u);var i=r("./P5.js"),a=r("./ColorCode.js");function u(r,e,t){strokeWeight(2),i.fillColor(a.white),ellipse(r,e,50,50),textAlign(CENTER,CENTER),textSize(24),i.fillColor(a.black),text(t,r,e)}var s=2,l=24,f=25},{"./P5.js":"kRQjY","./ColorCode.js":"fgi4l","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}]},["dAPiW"],"dAPiW","parcelRequire94c2");
//# sourceMappingURL=StackVis.js.map
