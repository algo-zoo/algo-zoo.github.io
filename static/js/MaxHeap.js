!function(e,t,r,i,l){var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof a[i]&&a[i],n=s.cache||{},h="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function o(t,r){if(!n[t]){if(!e[t]){var l="function"==typeof a[i]&&a[i];if(!r&&l)return l(t,!0);if(s)return s(t,!0);if(h&&"string"==typeof t)return h(t);var p=Error("Cannot find module '"+t+"'");throw p.code="MODULE_NOT_FOUND",p}u.resolve=function(r){var i=e[t][1][r];return null!=i?i:r},u.cache={};var d=n[t]=new o.Module(t);e[t][0].call(d.exports,u,d,d.exports,a)}return n[t].exports;function u(e){var t=u.resolve(e);return!1===t?{}:o(t)}}o.isParcelRequire=!0,o.Module=function(e){this.id=e,this.bundle=o,this.exports={}},o.modules=e,o.cache=n,o.parent=s,o.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(o,"root",{get:function(){return a[i]}}),a[i]=o;for(var p=0;p<t.length;p++)o(t[p]);if(r){var d=o(r);"object"==typeof exports&&"undefined"!=typeof module?module.exports=d:"function"==typeof define&&define.amd&&define(function(){return d})}}({l6uRZ:[function(e,t,r,i){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var l=e("./Heap.js");class a extends l.Heap{compare(e,t){return e<t}}let s=new a;window.setup=s.setup.bind(s),window.draw=s.draw.bind(s),$(document).ready(function(){$("#run").click(()=>s.setup()),$("#prev").click(()=>s.prev()),$("#next").click(()=>s.next()),$("#program").on("input",()=>s.reset()),$("#program").val("insert(42)\ninsert(2)\ninsert(5)\ninsert(58)\ninsert(27)\ninsert(34)\ninsert(1)\ninsert(8)\ndelete()\ninsert(39)\ninsert(55)"),$("#program").height($("#program")[0].scrollHeight)})},{"./Heap.js":"4Hr8s","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],"4Hr8s":[function(e,t,r,i){var l=e("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(r),l.export(r,"Heap",()=>n);var a=e("./ColorCode.js");class s{setArray(e){this.arr=e,redraw()}setup(e){let t=150*(2*Math.ceil(Math.log2(e)+1e-5)+2);createCanvas(150*(+e+2),t).parent("canvas-hole"),textSize(60),noLoop()}draw(){background(200),this.drawArray(),this.drawTree()}drawElement(e,t,r,i){strokeWeight(6),fill.apply(null,i),rect(e,t,150,150),null!=r&&(textAlign(CENTER,CENTER),fill.apply(null,a.black),text(r,e+75,t+75))}drawIndex(e,t,r){textAlign(CENTER,CENTER),fill.apply(null,a.black),text(r,e+75,t+225)}drawArray(){for(let e=0;e<this.arr.length;e++){let t=150*e+150;this.drawElement(t,225,this.arr[e],a.blue),this.drawIndex(t,225,e)}}drawNode(e,t,r,i){strokeWeight(6),fill.apply(null,i),ellipse(e,t,150,150),textAlign(CENTER,CENTER),fill.apply(null,a.black),text(r,e,t)}makeNode(e,t,r,i=null,l=null){return{value:e,x:i&&l?(i.x+l.x)/2:150*r+151.25,y:(t+(t-1)*.5)*150+675,left:i,right:l}}makeTree(e,t,r,i){let l=t<e.length,a=2*t+1<e.length;if(!l)return[i,null];if(a){let[l,a]=this.makeTree(e,2*t+1,r+1,i),[s,n]=this.makeTree(e,2*t+2,r+1,l+1);return[s,this.makeNode(e[t],r,l,a,n)]}{let l=this.makeNode(e[t],r,i);return[i+1,l]}}drawSegment(e,t,r,i){strokeWeight(6),line(e,t,r,i)}drawTreeEdgeRec(e){e&&null!=e.value&&(this.drawTreeEdgeRec(e.left),this.drawTreeEdgeRec(e.right),e.left&&null!=e.left.value&&this.drawSegment(e.x,e.y,e.left.x,e.left.y),e.right&&null!=e.right.value&&this.drawSegment(e.x,e.y,e.right.x,e.right.y))}drawTreeRec(e){e&&null!=e.value&&(this.drawTreeRec(e.left),this.drawTreeRec(e.right),this.drawNode(e.x,e.y,e.value,a.white))}drawTree(){let[e,t]=this.makeTree(this.arr,0,0,0);this.drawTreeEdgeRec(t),this.drawTreeRec(t)}}class n{constructor(){this.cbt=new s,this.reset_value()}compare(e,t){alert('Implementation Error: The function "compare" must be implemented.')}setup(){this.initialize(),this.cbt.setup(this.max_size),redraw()}reset_value(){this.max_size=null,this.heap=[],this.logs=[],this.idx=0}reset(){this.reset_value(),this.refresh()}refresh(){$("#prev").prop("disabled",0==this.logs.length||0==this.idx),$("#next").prop("disabled",0==this.logs.length||this.idx+1==this.logs.length),redraw()}prev(){this.idx>0&&(this.idx-=1,this.refresh())}next(){this.idx+1<this.logs.length&&(this.idx+=1,this.refresh())}draw(){let e=this.logs[this.idx];e&&e.array.length>=0&&(this.cbt.setArray(e.array),this.cbt.draw(),this.drawLabel(e.label))}drawLabel(e){textAlign(LEFT),fill.apply(null,a.red),text(e,150,150)}loadCommands(){let e=[];for(let t of $("#program").val().split(/\r?\n/)){let r=t.match(/^insert\((\d+)\)$/);r?e.push({opcode:0,value:parseInt(r[1])}):t.match(/^delete\(\)$/)?e.push({opcode:1}):t.match(/^\s*$/)||alert('ERROR: "'+t+'"')}return e}heapSwap(e,t){let r=this.heap[e];this.heap[e]=this.heap[t],this.heap[t]=r}parentIndex(e){return Math.floor((e-1)/2)}leftChildIndex(e){return 2*e+1}rightChildIndex(e){return 2*e+2}hasLeftChild(e){return this.leftChildIndex(e)<this.heap.length}hasRightChild(e){return this.rightChildIndex(e)<this.heap.length}heapify(e){if(0==e)return;let t=this.parentIndex(e);this.compare(this.heap[t],this.heap[e])&&(this.heapSwap(t,e),this.heapify(t))}heapInsert(e){this.heap.push(e),this.heapify(this.heap.length-1)}heapDelete(){if(0!=this.heap.length){this.heap[0]=this.heap[this.heap.length-1],this.heap.pop();for(var e=0;this.hasLeftChild(e);){var t=this.leftChildIndex(e);if(this.hasRightChild(e)){var r=this.rightChildIndex(e);this.compare(this.heap[t],this.heap[r])&&(t=r)}if(this.compare(this.heap[e],this.heap[t]))this.heapSwap(e,t),e=t;else break}}}initialize(){this.reset_value();let e=this.loadCommands();var t=0;for(let r of(this.max_size=0,e))t+=0==r.opcode?1:-1,this.max_size=Math.max(this.max_size,t);let r=(function(e){let t=Array.from(this.heap);for(;t.length<this.max_size;)t.push(null);this.logs.push({label:e,array:t})}).bind(this);for(let t of(r(""),e))0==t.opcode?(this.heapInsert(t.value),r("insert("+t.value.toString()+")")):1==t.opcode&&(this.heapDelete(),r("delete()"))}}},{"./ColorCode.js":"fgi4l","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],fgi4l:[function(e,t,r,i){var l=e("@parcel/transformer-js/src/esmodule-helpers.js");function a(e){return console.assert(0<=e&&e<=255,"Scale error"),[e,e,e]}function s(e,t,r){console.assert(0<=e&&e<=360,"Scale error"),console.assert(0<=t&&t<=100,"Scale error"),console.assert(0<=r&&r<=100,"Scale error");var i,l=function(e){return 0|Math.round(255*e)},a=t/100,s=r/100;if(0===t){var n=l(s);return[n,n,n]}var h=e/60,o=0|Math.floor(h),p=h-o,d=s*(1-a),u=s*(1-a*p),f=s*(1-a*(1-p));switch(o){case 0:i=[s,f,d];break;case 1:i=[u,s,d];break;case 2:i=[d,s,f];break;case 3:i=[d,u,s];break;case 4:i=[f,d,s];break;default:i=[s,d,u]}return[l(i[0]),l(i[1]),l(i[2])]}l.defineInteropFlag(r),l.export(r,"grayScale",()=>a),l.export(r,"hsv",()=>s),l.export(r,"black",()=>n),l.export(r,"dark",()=>h),l.export(r,"gray",()=>o),l.export(r,"lightGray",()=>p),l.export(r,"white",()=>d),l.export(r,"red",()=>u),l.export(r,"yellow",()=>f),l.export(r,"blue",()=>c),l.export(r,"lightBlue",()=>g),l.export(r,"orange",()=>x);var n=a(0),h=a(30),o=a(120),p=a(180),d=a(255),u=s(18,80,100),f=s(57,80,100),c=s(200,80,100),g=s(200,20,100),x=s(40,80,100)},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],jBTt3:[function(e,t,r,i){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,t){return Object.keys(e).forEach(function(r){"default"===r||"__esModule"===r||Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})}),t},r.export=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:r})}},{}]},["l6uRZ"],"l6uRZ","parcelRequire94c2");
//# sourceMappingURL=MaxHeap.js.map
