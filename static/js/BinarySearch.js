!function(e,r,t,n,o){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a="function"==typeof i[n]&&i[n],c=a.cache||{},u="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function s(r,t){if(!c[r]){if(!e[r]){var o="function"==typeof i[n]&&i[n];if(!t&&o)return o(r,!0);if(a)return a(r,!0);if(u&&"string"==typeof r)return u(r);var f=Error("Cannot find module '"+r+"'");throw f.code="MODULE_NOT_FOUND",f}p.resolve=function(t){var n=e[r][1][t];return null!=n?n:t},p.cache={};var l=c[r]=new s.Module(r);e[r][0].call(l.exports,p,l,l.exports,i)}return c[r].exports;function p(e){var r=p.resolve(e);return!1===r?{}:s(r)}}s.isParcelRequire=!0,s.Module=function(e){this.id=e,this.bundle=s,this.exports={}},s.modules=e,s.cache=c,s.parent=a,s.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]},Object.defineProperty(s,"root",{get:function(){return i[n]}}),i[n]=s;for(var f=0;f<r.length;f++)s(r[f]);if(t){var l=s(t);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd&&define(function(){return l})}}({fMWuX:[function(e,r,t,n){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"boxSize",()=>w),o.export(t,"canvasHeight",()=>C),o.export(t,"addLog",()=>f),o.export(t,"getRandomArray",()=>l),o.export(t,"getTarget",()=>p),o.export(t,"state",()=>m),o.export(t,"setup",()=>S),o.export(t,"refreshState",()=>E),o.export(t,"initializeRandomArray",()=>_),o.export(t,"drawIndex",()=>j),o.export(t,"drawElement",()=>y),o.export(t,"getMidium",()=>M),o.export(t,"drawArrow",()=>b),o.export(t,"draw",()=>N),o.export(t,"nextState",()=>T),o.export(t,"run",()=>O),o.export(t,"reset",()=>I),o.export(t,"generate",()=>R),o.export(t,"set",()=>A);var i=e("./P5.js"),a=e("./ColorCode.js"),c=e("@rescript/core/src/Core__Int.js"),u=e("@rescript/core/src/Core__Array.js"),s=e("./NumberGuess.js");function f(e){var r=$("#textbox"),t=r.val();r.val(t+e+"\n")}function l(e){var r=Math.max(100,Math.imul(e,5));return u.fromInitializer(e,function(e){return 0|Math.floor(Math.random()*r)}).toSorted(function(e,r){return e-r})}function p(){var e=$("#target").val();return s.parseIntWithDefault(e)}var d={contents:0},v={contents:0},g={contents:"Start"},x={contents:0},h={contents:u.make(0,0)},m={left:d,right:v,mode:g,compare_cnt:x,arr:h};function S(){createCanvas(Math.imul(50,h.contents.length+2|0),200).parent("canvas-hole"),textSize(20),noLoop()}function E(){var e=$("#array").val(),r=u.filterMap(e.split(",").map(function(e){return c.fromString(e,void 0)}),function(e){return e});d.contents=0,v.contents=r.length-1|0,g.contents="Start",x.contents=0,h.contents=r,$("#textbox").val("")}function _(){var e=$("#size").val(),r=s.parseIntWithDefault(e);if(r<=0){alert("配列の要素数は1以上の自然数を指定してください．");return}var t=l(r).toString();$("#array").val(t)}function j(e){var r=Math.imul(e+1|0,50);i.fillColor(a.black),textAlign(CENTER,CENTER),text(String(e),r+25|0,150)}function y(e,r){var t=Math.imul(r+1|0,50);i.fillColor("End"===g.contents&&d.contents===r&&h.contents[r]===p()?a.red:d.contents<=r&&r<=v.contents?a.blue:a.lightGray),rect(t,75,50,50),i.fillColor(a.black),textAlign(CENTER,CENTER),text(String(e),t+25|0,100)}function M(){return 0|Math.floor((d.contents+v.contents|0)/2)}function b(e){var r=Math.imul(e+1|0,50)+25|0;i.fillColor("End"===g.contents&&h.contents[e]===p()?a.red:e===M()?a.yellow:a.white),beginShape(),[[r-5|0,20],[r+5|0,20],[r+5|0,45],[r+12|0,45],[r,70],[r-12|0,45],[r-5|0,45]].forEach(function(e){vertex(e[0],e[1])}),endShape(CLOSE)}function N(){if(background(200),h.contents.forEach(function(e,r){y(e,r),j(r)}),("Range"===g.contents||"CalcMid"===g.contents)&&(b(d.contents),b(v.contents)),"CalcMid"===g.contents&&b(M()),"End"===g.contents&&h.contents[d.contents]===p())return b(d.contents)}function T(){if("Start"===g.contents)return g.contents="Range",f("left: "+String(d.contents)+", right: "+String(v.contents));var e=M(),r=h.contents[e],t=p();if("Range"!==g.contents)return"CalcMid"!==g.contents?void 0:(r<t?d.contents=e+1|0:r>t&&(v.contents=e-1|0),r===t)?(d.contents=e,g.contents="End",f("値を発見．探索終了．")):d.contents>v.contents?(g.contents="End",f("left: "+String(d.contents)+", right: "+String(v.contents)),f("探索範囲内に値を発見できず．探索終了．")):(g.contents="Range",f("left: "+String(d.contents)+", right: "+String(v.contents)));f("left: "+String(d.contents)+", right: "+String(v.contents)+", mid: "+String(e)+" (= (left+right)/2 の小数点切り捨て )．"),f("【"+String(x.contents)+"回目の比較】"+(r===t?"中間値 (= arr[mid] = "+String(r)+" ) == 探索値 (= "+String(t)+" )が成立．":r<t?"中間値 (= arr[mid] = "+String(r)+" ) < 探索値 (= "+String(t)+" )が成立． leftにmid++1 (= "+String(e+1|0)+" )を代入．":"探索値 (= "+String(t)+" ) < 中間値 (= arr[mid] = "+String(r)+" )が成立． rightにmid-1 (= "+String(e-1|0)+" )を代入．")),g.contents="CalcMid",x.contents=x.contents+1|0}function O(){T(),redraw()}function I(){E(),redraw()}function A(){E(),S(),redraw()}$(document).ready(function(){[["#run",O],["#reset",I],["#generate",_],["#set",A]].forEach(function(e){$(e[0]).on("click",e[1])})}),window.setup=S,window.draw=N;var w=50,C=200,R=_},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3","@rescript/core/src/Core__Array.js":"kmH7i","./NumberGuess.js":"5ZEzZ","@rescript/core/src/Core__Int.js":"da5Bi","./ColorCode.js":"fgi4l","./P5.js":"kRQjY"}],jBTt3:[function(e,r,t,n){t.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},t.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.exportAll=function(e,r){return Object.keys(e).forEach(function(t){"default"===t||"__esModule"===t||Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(r,t,{enumerable:!0,get:function(){return e[t]}})}),r},t.export=function(e,r,t){Object.defineProperty(e,r,{enumerable:!0,get:t})}},{}],kmH7i:[function(e,r,t,n){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"make",()=>a),o.export(t,"fromInitializer",()=>c),o.export(t,"equal",()=>u),o.export(t,"compare",()=>s),o.export(t,"indexOfOpt",()=>f),o.export(t,"lastIndexOfOpt",()=>l),o.export(t,"reduce",()=>p),o.export(t,"reduceWithIndex",()=>d),o.export(t,"reduceRight",()=>v),o.export(t,"reduceRightWithIndex",()=>g),o.export(t,"findIndexOpt",()=>x),o.export(t,"filterMap",()=>S),o.export(t,"keepSome",()=>E),o.export(t,"toShuffled",()=>m),o.export(t,"shuffle",()=>h),o.export(t,"findMap",()=>_),o.export(t,"last",()=>j);var i=e("rescript/lib/es6/caml_option.js");function a(e,r){if(e<=0)return[];var t=Array(e);return t.fill(r),t}function c(e,r){if(e<=0)return[];for(var t=Array(e),n=0;n<e;++n)t[n]=r(n);return t}function u(e,r,t){var n=e.length;if(n!==r.length)return!1;for(var o=0;;){var i=o;if(i===n)return!0;if(!t(e[i],r[i]))return!1;o=i+1|0}}function s(e,r,t){var n=e.length,o=r.length;if(n<o)return -1;if(n>o)return 1;for(var i=0;;){var a=i;if(a===n)return 0;var c=t(e[a],r[a]);if(0!==c)return c;i=a+1|0}}function f(e,r){var t=e.indexOf(r);if(-1!==t)return t}function l(e,r){var t=e.lastIndexOf(r);if(-1!==t)return t}function p(e,r,t){return e.reduce(t,r)}function d(e,r,t){return e.reduce(t,r)}function v(e,r,t){return e.reduceRight(t,r)}function g(e,r,t){return e.reduceRight(t,r)}function x(e,r){var t=e.findIndex(r);if(-1!==t)return t}function h(e){for(var r,t=e.length,n=0;n<t;++n)!function(e,r,t){var n=e[r];e[r]=e[t],e[t]=n}(e,n,(0|Math.floor(Math.random()*(t-(r=n)|0)))+r|0)}function m(e){var r=e.slice();return h(r),r}function S(e,r){for(var t=e.length,n=Array(t),o=0,a=0;a<t;++a){var c=r(e[a]);void 0!==c&&(n[o]=i.valFromOption(c),o=o+1|0)}return n.length=o,n}function E(e){return S(e,function(e){return e})}function _(e,r){for(var t=0;;){var n=t;if(n===e.length)return;var o=r(e[n]);if(void 0!==o)return o;t=n+1|0}}function j(e){return e[e.length-1|0]}},{"rescript/lib/es6/caml_option.js":"lBDcT","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],lBDcT:[function(e,r,t,n){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");function i(e){return void 0!==e.BS_PRIVATE_NESTED_SOME_NONE}function a(e){return void 0===e?{BS_PRIVATE_NESTED_SOME_NONE:0}:null!==e&&void 0!==e.BS_PRIVATE_NESTED_SOME_NONE?{BS_PRIVATE_NESTED_SOME_NONE:e.BS_PRIVATE_NESTED_SOME_NONE+1|0}:e}function c(e){if(null!=e)return a(e)}function u(e){if(void 0!==e)return a(e)}function s(e){if(null!==e)return a(e)}function f(e){if(null===e||void 0===e.BS_PRIVATE_NESTED_SOME_NONE)return e;var r=e.BS_PRIVATE_NESTED_SOME_NONE;if(0!==r)return{BS_PRIVATE_NESTED_SOME_NONE:r-1|0}}function l(e){if(void 0!==e)return f(e)}function p(e){return void 0!==e?e.VAL:e}o.defineInteropFlag(t),o.export(t,"nullable_to_opt",()=>c),o.export(t,"undefined_to_opt",()=>u),o.export(t,"null_to_opt",()=>s),o.export(t,"valFromOption",()=>f),o.export(t,"some",()=>a),o.export(t,"isNested",()=>i),o.export(t,"option_get",()=>l),o.export(t,"option_unwrap",()=>p)},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],"5ZEzZ":[function(e,r,t,n){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"parseIntWithDefault",()=>a),o.export(t,"getRange",()=>c),o.export(t,"getTarget",()=>u),o.export(t,"setTarget",()=>s),o.export(t,"setRandomTarget",()=>f),o.export(t,"makeColorBar",()=>l),o.export(t,"makeBar",()=>p),o.export(t,"makeRow",()=>d),o.export(t,"binarySearch",()=>v);var i=e("@rescript/core/src/Core__Int.js");function a(e){var r=i.fromString(e,void 0);return void 0!==r?r:0}function c(){return[a($("#begin").val())-1|0,a($("#end").val())]}function u(){return a($("#target").val())}function s(e){$("#target").val(String(e))}function f(){var e=c(),r=e[0],t=0|Math.floor(Math.random()*(e[1]-r|0));s((r+t|0)+1|0)}function l(e,r){var t=c(),n=t[1],o=t[0],i=(e-o|0)/(n-o|0)*100,a=(r-o|0)/(n-o|0)*100-i,u=function(e,r){return $("<div class='"+e+"' style='"+("width: calc("+r.toString())+"% - 1px)'>&nbsp;</div>")};return $("<div class='bar'></div>").append([u("gray-bar",i),u("blue-bar",a),u("gray-bar",100-(i+a))])}function p(e,r,t){var n=$("<div class='header-left'></div>").text(e),o="【探索範囲="+String(r+1|0)+"~"+String(t)+", 幅="+String(t-r|0)+"】",i=$("<div class='header-right'></div>").text(o),a=l(r,t);return $("<div></div>").append([n,i,a])}function d(e,r){var t=$("<td></td>").css("width","10%").append(e),n=$("<td></td>").css("width","90%"),o="jq"===r.NAME?n.append([r.VAL]):n.append(r.VAL);return $("<tr></tr>").append([t,o])}function v(){var e=c(),r=e[1],t=e[0],n=u();if(r<t){alert("エラー: 始点は終点以下の値を指定してください");return}if(n<t||n>r){alert("エラー: 答えの数値は探索範囲内を指定してください");return}var o=$("#chat").empty().append([$("<tbody></tbody>")]);d("初期状態",{NAME:"jq",VAL:p("\uD83E\uDD21（…… 答えの数は "+String(n)+" だ！ ……）",t,r)}).appendTo(o);var i=function(e,r,t){for(;;){var i=t,a=r,c=e;if((i-a|0)<2)return i;var u=(a+i|0)/2|0,s=String(c)+"回目",f="\uD83E\uDD14「"+String(u)+"以下か？」 ⇒ ";if(n<=u){d(s,{NAME:"jq",VAL:p(f+"\uD83E\uDD21「Yes」",a,u)}).appendTo(o),t=u,e=c+1|0;continue}d(s,{NAME:"jq",VAL:p(f+"\uD83E\uDD21「No」",u,i)}).appendTo(o),r=u,e=c+1|0}}(1,t,r);d("答え",{NAME:"text",VAL:String(i)}).appendTo(o)}$(document).ready(function(){$("#random").on("click",f),$("#binary").on("click",v),f()})},{"@rescript/core/src/Core__Int.js":"da5Bi","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],da5Bi:[function(e,r,t,n){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(t),o.export(t,"Constants",()=>l),o.export(t,"fromString",()=>a),o.export(t,"range",()=>c),o.export(t,"rangeWithOptions",()=>u),o.export(t,"clamp",()=>s),o.export(t,"Bitwise",()=>f);var i=e("./Core__Array.js");function a(e,r){var t=void 0!==r?parseInt(e,r):parseInt(e);if(!isNaN(t)&&!(t>0x7fffffff)&&!(t<-0x80000000))return 0|t}function c(e,r,t){var n,o,a=void 0!==t?t:{},c=e>r,u=a.step;if(void 0!==u){if(0!==u)n=u;else{if(e!==r)throw RangeError("Incorrect range arguments");n=u}}else n=c?-1:1;if(c===n>=0)o=0;else if(0===n)o=+(!0===a.inclusive);else{var s,f=c?e-r|0:r-e|0;o=0|Math.ceil((!0===a.inclusive?f+1|0:f)/((s=n)>=0?s:0|-s))}return i.fromInitializer(o,function(r){return e+Math.imul(r,n)|0})}function u(e,r,t){return c(e,r,t)}function s(e,r,t){var n=void 0!==r&&r<t?r:t;return void 0!==e&&e>n?e:n}var f={lnot:function(e){return -1^e}},l={minValue:-0x80000000,maxValue:0x7fffffff}},{"./Core__Array.js":"kmH7i","@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],fgi4l:[function(e,r,t,n){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");function i(e){return console.assert(0<=e&&e<=255,"Scale error"),[e,e,e]}function a(e,r,t){console.assert(0<=e&&e<=360,"Scale error"),console.assert(0<=r&&r<=100,"Scale error"),console.assert(0<=t&&t<=100,"Scale error");var n,o=function(e){return 0|Math.round(255*e)},i=r/100,a=t/100;if(0===r){var c=o(a);return[c,c,c]}var u=e/60,s=0|Math.floor(u),f=u-s,l=a*(1-i),p=a*(1-i*f),d=a*(1-i*(1-f));switch(s){case 0:n=[a,d,l];break;case 1:n=[p,a,l];break;case 2:n=[l,a,d];break;case 3:n=[l,p,a];break;case 4:n=[d,l,a];break;default:n=[a,l,p]}return[o(n[0]),o(n[1]),o(n[2])]}o.defineInteropFlag(t),o.export(t,"grayScale",()=>i),o.export(t,"hsv",()=>a),o.export(t,"black",()=>c),o.export(t,"dark",()=>u),o.export(t,"gray",()=>s),o.export(t,"lightGray",()=>f),o.export(t,"pale",()=>l),o.export(t,"white",()=>p),o.export(t,"red",()=>d),o.export(t,"yellow",()=>v),o.export(t,"blue",()=>g),o.export(t,"lightBlue",()=>x),o.export(t,"orange",()=>h);var c=i(0),u=i(30),s=i(50),f=i(80),l=i(180),p=i(255),d=a(18,80,100),v=a(57,80,100),g=a(200,80,100),x=a(200,20,100),h=a(40,80,100)},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}],kRQjY:[function(e,r,t,n){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");function i(e){fill.apply(null,e)}o.defineInteropFlag(t),o.export(t,"fillColor",()=>i)},{"@parcel/transformer-js/src/esmodule-helpers.js":"jBTt3"}]},["fMWuX"],"fMWuX","parcelRequire94c2");
//# sourceMappingURL=BinarySearch.js.map
